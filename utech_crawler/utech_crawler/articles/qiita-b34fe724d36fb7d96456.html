<!DOCTYPE html><html xmlns:og="http://ogp.me/ns#"><head><meta charset="UTF-8" /><title>八元数を作ろう - Qiita</title><meta content="width=device-width,initial-scale=1" name="viewport" /><meta content="四元数に引き続き八元数を作ります。複雑な八元数の積をなるべく少ないルールで導出します。最後に考え方をプログラムで表現します。

関連する亜種も見ます。


双四元数
双曲四元数
分解型四元数


シリーズの記事です。


多項式の積を計算
外積と愉快な仲間たち
ユークリッド空間のホッジ双対とバブルソート
四元数を作ろう
四元数と行列で見る内積と外積の「内」と「外」
八元数を作ろう ← この記事
八元数の積をプログラムで確認
外積の成分をプログラムで確認
多元数の積の構成..." name="description" /><meta content="summary" name="twitter:card" /><meta content="@Qiita" name="twitter:site" /><meta content="7shi" name="twitter:creator" /><meta content="八元数を作ろう - Qiita" property="og:title" /><meta content="article" property="og:type" /><meta content="http://qiita.com/7shi/items/b34fe724d36fb7d96456" property="og:url" /><meta content="http://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" property="og:image" /><meta content="四元数に引き続き八元数を作ります。複雑な八元数の積をなるべく少ないルールで導出します。最後に考え方をプログラムで表現します。

関連する亜種も見ます。

* [双四元数](https://en.wikipedia.org/wiki/B..." property="og:description" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><link rel="shortcut icon" type="image/x-icon" href="http://cdn.qiita.com/assets/favicons/public/production-4ff10c1e1e2b5fcb353ff9cafdd56c70.ico" /><link rel="apple-touch-icon" type="image/png" href="http://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link rel="stylesheet" media="all" href="http://cdn.qiita.com/assets/public-e8d29e8ff1879118096f0f5877946857.min.css" /><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="pOFcVo1OmHrncO6C0B5TNecfZtRz+g7JbjYM/M3wa5fKY8cOFmChMRijW56g6+1sh1hCZ+Q+VD5S6AUHLP5lUQ==" /></head><body class="without-js" id=""><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-TBQWPN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>
  document.body.className = document.body.className.replace('without-js', '') + ' with-js';
  window.Qiita = {"asset_host":"cdn.qiita.com","TLD":"com","controller_path":"public/items","controller_action":"public/items#show","controller":"items","action":"show","env":"production","flash":{},"is_landing_page":false,"is_team_page":false,"root_domain":"qiita.com","variant":null,"config":{"mixpanel":{"career":"dd35af27e959781713d63fd7ca898a8d","per_team":"c0a2116368b33b44b5029ebd2cc9b094","public":"be87616606b0e26a87689099aab2c4e5","team":"b7c0342acba2dbc8742484d98788efb3"},"default_locale":"ja","locale":"en"},"team":null,"user":null,"GIT_BRANCH":null,"DEBUG":false};

</script>
<div class="headerContainer headerContainer-public" role="navigation"><div data-react-class="T.HeaderContainer" data-react-props="{&quot;user&quot;:null,&quot;team&quot;:null,&quot;news&quot;:{&quot;type&quot;:&quot;募集&quot;,&quot;content&quot;:&quot;QiitaやQiita:Teamを良くしたいエンジニア&quot;,&quot;url&quot;:&quot;http://increments.co.jp/jobs/engineers?utm_source=qiita\u0026utm_medium=header_news&quot;},&quot;initial_unread_count&quot;:null,&quot;siteid_image&quot;:&quot;http://cdn.qiita.com/siteid-reverse.png&quot;,&quot;is_team_page&quot;:false,&quot;on_team_setting&quot;:false,&quot;show_post_menu&quot;:true,&quot;show_search_menu&quot;:true,&quot;is_fluid&quot;:false,&quot;locale&quot;:&quot;en&quot;}"></div></div><div id="main"><ol class="itemBreadcrumbs" itemscope="" itemtype="http://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="/"><span itemprop="name">Qiita</span></a><meta content="1" itemprop="position" /></li><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="/items"><span itemprop="name">Items</span></a><meta content="2" itemprop="position" /></li><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="/tags/%E6%95%B0%E5%AD%A6"><span itemprop="name">数学</span></a><meta content="3" itemprop="position" /></li></ol><article itemscope="" itemtype="http://schema.org/Article"><div class="ArticleMainHeader "><div class="container"></div><div class="container"><div class="row s-flex-align-center"><div class="col-sm-9"><h1 class="ArticleMainHeader__title">八元数を作ろう</h1><ul class="TagList"><li class="TagList__item" data-count="503"><a class="u-link-unstyled TagList__label" href="/tags/%E6%95%B0%E5%AD%A6"><img alt="数学" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/8fe97b92406365b26c7ffbda350a237c07ef4feb/medium.jpg?1421593187" /><span>数学</span></a></li><li class="TagList__item" data-count="9"><a class="u-link-unstyled TagList__label" href="/tags/%E5%9B%9B%E5%85%83%E6%95%B0"><img alt="四元数" class="TagList__icon" src="//cdn.qiita.com/assets/icons/medium/missing-2e17009a0b32a6423572b0e6dc56727e.png" /><span>四元数</span></a></li><li class="TagList__item" data-count="160"><a class="u-link-unstyled TagList__label" href="/tags/F%23"><img alt="F#" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/ba95a660afc4ec92093e69afbd0b70d04e51245b/medium.jpg?1395581508" /><span>F#</span></a></li><li class="TagList__item" data-count="4"><a class="u-link-unstyled TagList__label" href="/tags/%E5%85%AB%E5%85%83%E6%95%B0"><img alt="八元数" class="TagList__icon" src="//cdn.qiita.com/assets/icons/medium/missing-2e17009a0b32a6423572b0e6dc56727e.png" /><span>八元数</span></a></li></ul></div><div class="col-sm-3"><div class="itemsShowHeaderStock"><ul class="list-unstyled itemsShowHeaderStock_statusList"><li><div class="itemsShowHeaderStock_count stock"><span class="fa fa-thumbs-up"></span><span class="js-likecount">2</span></div><div class="itemsShowHeaderStock_countText">Like</div></li><li><div class="itemsShowHeaderStock_count" content="0 UserComments" itemprop="interactionCount"><span class="fa fa-comment"></span>0</div><div class="itemsShowHeaderStock_countText">Comment</div></li></ul></div><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:2,&quot;uuid&quot;:&quot;b34fe724d36fb7d96456&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-header&quot;}"></div><ul class="list-inline ArticleMainHeader__users"><li class="js-hovercard" data-hovercard-target-name="big538"><a itemprop="url" href="/big538"><img alt="big538" class="thumb thumb--xs" src="https://avatars.githubusercontent.com/u/23475692?v=3" /></a></li><li class="js-hovercard" data-hovercard-target-name="YoutaroMine"><a itemprop="url" href="/YoutaroMine"><img alt="YoutaroMine" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/51445/profile-images/1473692443" /></a></li></ul></div></div></div></div><div class="ArticleAsideHeader"><div class="container"><div class="u-flex u-space-between"><div class="u-flex u-flex-wrap"><div class="u-flex u-align-center s-pdv-5 u-flex-wrap"><div class="ArticleAsideHeader__author"><a href="/7shi"><img class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" alt="1473685823" /></a> <a class="u-link-unstyled" href="/7shi">7shi</a> </div><div class="ArticleAsideHeader__date"><span data-toggle="tooltip" title="posted at 2016-12-06">Edited at <time datetime="2017-02-28T16:48:13+09:00" itemprop="dateModified">2017-02-28</time></span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"><div class="ArticleAsideHeader__revision"> <a data-toggle="tooltip" title="Revisions" href="/7shi/items/b34fe724d36fb7d96456/revisions"><span class="fa fa-history"></span></a><span class="ArticleAsideHeader__revisionCount">59</span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"></div></div><div class="u-flex u-align-center s-flex-justiry-between s-pdv-5 u-shrink-0"><div class="ArticleAsideHeader__stock"><div class="js-stockbutton" data-position="top" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h fa-lg"></span></a><ul class="dropdown-menu dropdown-menu-right"><li class="dropdown__item--mobile"><a href="/7shi/items/b34fe724d36fb7d96456/revisions"><span class="fa fa-fw fa-history"></span> Revisions<span>(59)</span></a></li><li><a href="/7shi/items/b34fe724d36fb7d96456.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><span class="fa fa-fw fa-flag"></span> Report article</a></li></ul></div></div></div></div></div><div class="container"><div class="row" id="article-body-wrapper"><div class="col-sm-9"><section class="markdownContent markdownContent-headingEnabled js-task-list-container clearfix position-relative" id="item-b34fe724d36fb7d96456" itemprop="articleBody"><p>四元数に引き続き八元数を作ります。複雑な八元数の積をなるべく少ないルールで導出します。最後に考え方をプログラムで表現します。</p>

<p>関連する亜種も見ます。</p>

<ul>
<li><a href="https://en.wikipedia.org/wiki/Biquaternion" rel="nofollow noopener" target="_blank">双四元数</a></li>
<li><a href="https://en.wikipedia.org/wiki/hyperbolic_quaternion" rel="nofollow noopener" target="_blank">双曲四元数</a></li>
<li><a href="https://en.wikipedia.org/wiki/Split-quaternion" rel="nofollow noopener" target="_blank">分解型四元数</a></li>
</ul>

<p>シリーズの記事です。</p>

<ol>
<li><a href="http://qiita.com/7shi/items/4fb60dacad46cb8e63b3" id="reference-eee8e117a2888b585a8e">多項式の積を計算</a></li>
<li><a href="http://qiita.com/7shi/items/017d2d2c758f76071f23" id="reference-90556e790e0ef4c70047">外積と愉快な仲間たち</a></li>
<li><a href="http://qiita.com/7shi/items/f54302058149d07da592" id="reference-db77b7f845f6406ccdc0">ユークリッド空間のホッジ双対とバブルソート</a></li>
<li><a href="http://qiita.com/7shi/items/2036e7a739c2a9e04025" id="reference-ae2e9e1d9abaf6c6df3a">四元数を作ろう</a></li>
<li><a href="http://qiita.com/7shi/items/a80988a32a0d706e9378" id="reference-709e641d40c64e171a09">四元数と行列で見る内積と外積の「内」と「外」</a></li>
<li>八元数を作ろう ← この記事</li>
<li><a href="http://qiita.com/7shi/items/8495b2d6b888e7b8703f" id="reference-7d36bb5edfbb111e8537">八元数の積をプログラムで確認</a></li>
<li><a href="http://qiita.com/7shi/items/02c758c03d2fd7038912" id="reference-e0143d284239a1012ef3">外積の成分をプログラムで確認</a></li>
<li><a href="http://qiita.com/7shi/items/88be5203769e629df243" id="reference-cd5d1a6f4fc52740eefd">多元数の積の構成</a></li>
</ol>

<p>関連するコードをまとめたリポジトリです。</p>

<ul>
<li><a href="https://bitbucket.org/7shi/math7" class="autolink" rel="nofollow noopener" target="_blank">https://bitbucket.org/7shi/math7</a></li>
</ul>

<h1>
<span id="双四元数" class="fragment"></span><a href="#%E5%8F%8C%E5%9B%9B%E5%85%83%E6%95%B0"><i class="fa fa-link"></i></a>双四元数</h1>

<p>複素数 $\mathbb{C}$ の係数に複素数を入れることで双複素数 $\mathbb{C}⊗\mathbb{C}$ を作りましたが、同じように複素数の係数に四元数 $\mathbb{H}$ を入れることで双四元数 $\mathbb{C}⊗\mathbb{H}$ が作れます。</p>

<p>※ 四元数の中に四元数を入れた $\mathbb{H}⊗\mathbb{H}$ ではありません。</p>

<p>新たに外側の虚数 $h$ を追加します。係数が増えすぎて混乱するため添え字で表します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;(a_1+a_2i+a_3j+a_4k)+(a_5+a_6i+a_7j+a_8k)h \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6ih+a_7jh+a_8kh \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6hi+a_7hj+a_8hk
\end{align}
</pre></div></div>

<p>双四元数において $i,j,k$ と $h$ は同列の存在ではなく、$h$ は係数の一部として扱います。通常の複素数を用いた式 $2ix$ で $x$ の係数が $2i$ であるのと同じように、$2hj$ で $j$ の係数が $2h$ だと考えます。そのため $h$ は自由に動かすことができます（$2hj=2jh$）。この考え方を反映して $h$ を係数に含めています。</p>

<h2>
<span id="元の計算規則" class="fragment"></span><a href="#%E5%85%83%E3%81%AE%E8%A8%88%E7%AE%97%E8%A6%8F%E5%89%87"><i class="fa fa-link"></i></a>元の計算規則</h2>

<p>$i,j,k$ の積は通常の四元数と同じです。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
i^2=j^2=k^2=ijk=-1 \\
ij=-ji=k,\ jk=-kj=i,\ ki=-ik=j
</pre></div></div>

<p>$h$ が絡んだ場合、$h$ は係数の一部として計算します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
h^2&amp;=-1 \\
(hi)^2&amp;=(hh)(ii)=(-1)(-1)=1 \\
(hj)^2&amp;=(hh)(jj)=(-1)(-1)=1 \\
(hk)^2&amp;=(hh)(kk)=(-1)(-1)=1 \\
(hi)(hj)&amp;=(hh)(ij)=(-1)(k)=-k \\
(hj)(hi)&amp;=(hh)(ji)=(-1)(-k)=k \\
(hj)(hk)&amp;=(hh)(jk)=(-1)(i)=-i \\
(hk)(hj)&amp;=(hh)(kj)=(-1)(-i)=i \\
(hk)(hi)&amp;=(hh)(ki)=(-1)(j)=-j \\
(hi)(hk)&amp;=(hh)(ik)=(-1)(-j)=j \\
\end{align}
</pre></div></div>

<p>元の積が閉じていることから一般の積も閉じています。計算は複雑なため省略しますが、興味があれば確認してみると良いでしょう。</p>

<h2>
<span id="ローレンツ変換との関係" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%AC%E3%83%B3%E3%83%84%E5%A4%89%E6%8F%9B%E3%81%A8%E3%81%AE%E9%96%A2%E4%BF%82"><i class="fa fa-link"></i></a>ローレンツ変換との関係</h2>

<p>双四元数から $1,hi,hj,hk$ を取り出せば、ノルムは $+,-,-,-$ 型になります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;\{a+b(hi)+c(hj)+d(hk)\}^*\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;=\{a-b(hi)-c(hj)-d(hk)\}\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;=a\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;\quad -b(hi)\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;\quad -c(hj)\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;\quad -d(hk)\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;=aa+ab(hi)+ac(hj)+ad(hk) \\
&amp;\quad -ba(hi)-bb\underbrace{(hi)(hi)}_{1}-bc\underbrace{(hi)(hj)}_{-k}-bd\underbrace{(hi)(hk)}_{j} \\
&amp;\quad -ca(hj)-cb\underbrace{(hj)(hi)}_{k}-cc\underbrace{(hj)(hj)}_{1}-cd\underbrace{(hj)(hk)}_{-i} \\
&amp;\quad -da(hk)-db\underbrace{(hk)(hi)}_{-j}-dc\underbrace{(hk)(hj)}_{i}-dd\underbrace{(hk)(hk)}_{1} \\
&amp;=a^2-b^2-c^2-d^2
\end{align}
</pre></div></div>

<p>この性質を利用して、ローレンツ変換の計算に使うことができます。参考までに同等の理論について述べた文献を示します。</p>

<ul>
<li><a href="http://gotoclinic.org/policy.html" rel="nofollow noopener" target="_blank">時間と空間の原理 新八元数と相対性理論</a></li>
</ul>

<p>なお、積の計算過程で $(hi)(hj)=-k$ のように $h$ が付かない元が現れていますが、$hh$ をそれ以上計算しなければ元に $h$ を残すことができます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
(hi)(hj)=(hh)(ij)=h(hk)
</pre></div></div>

<h2>
<span id="パウリ行列との関係" class="fragment"></span><a href="#%E3%83%91%E3%82%A6%E3%83%AA%E8%A1%8C%E5%88%97%E3%81%A8%E3%81%AE%E9%96%A2%E4%BF%82"><i class="fa fa-link"></i></a>パウリ行列との関係</h2>

<p>量子力学のスピンで使われる<a href="https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%A6%E3%83%AA%E8%A1%8C%E5%88%97" rel="nofollow noopener" target="_blank">パウリ行列</a>という行列があります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
σ_1=\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right),
σ_2=\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right),
σ_3=\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right)
</pre></div></div>

<p>※ パウリ行列は<a href="https://ja.wikipedia.org/wiki/%E3%82%A8%E3%83%AB%E3%83%9F%E3%83%BC%E3%83%88%E8%A1%8C%E5%88%97" rel="nofollow noopener" target="_blank">エルミート行列</a>（複素共役を取って転置すると元に戻る行列・自己随伴行列）です。</p>

<p>双四元数から $1,hi,hj,hk$ を取り出したものはパウリ行列と同型です。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\{1,hi,hj,hk\}≅\{I,σ_1,σ_2,σ_3\}
</pre></div></div>

<p>双四元数での係数の $h$ は、パウリ行列では $i$ として表れます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
(hi)(hj)=h(hk)\ ↦\ σ_1σ_2=iσ_3
</pre></div></div>

<p>ところで $hi$ に $-h$ を掛ければ $h$ を取り除けます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\underbrace{-h}_{-i}\underbrace{(hi)}_{σ_1}=-(hh)i=i
</pre></div></div>

<p>この関係を使えば四元数とパウリ行列の同型対応が分かります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\{1,i,j,k\}≅\{I,-iσ_1,-iσ_2,-iσ_3\}
</pre></div></div>

<h3>
<span id="行列表現" class="fragment"></span><a href="#%E8%A1%8C%E5%88%97%E8%A1%A8%E7%8F%BE"><i class="fa fa-link"></i></a>行列表現</h3>

<p>パウリ行列を使えば、双四元数や四元数を行列で表現できます。</p>

<p>双四元数の行列表現を確認します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;a+bhi+chj+dhk \\
&amp;↦aI+bσ_1+cσ_2+dσ_3 \\
&amp;=a\left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)
 +b\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right)
 +c\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)
 +d\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a &amp;  0  \\ 0  &amp;  a\end{matrix}\right)
 +\left(\begin{matrix}0 &amp;  b  \\ b  &amp;  0\end{matrix}\right)
 +\left(\begin{matrix}0 &amp; -ci \\ ci &amp;  0\end{matrix}\right)
 +\left(\begin{matrix}d &amp;  0  \\ 0  &amp; -d\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a+d &amp; b-ci \\ b+ci &amp; a-d\end{matrix}\right)
\end{align}
</pre></div></div>

<p>※ エルミート行列であるパウリ行列（と単位行列）から構成されていることから、双四元数の行列表現はエルミート行列です。</p>

<p>四元数の行列表現を確認します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;a+bi+cj+dk \\
&amp;↦aI+b(-iσ_1)+c(-iσ_2)+d(-iσ_3) \\
&amp;=a \left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)
 -bi\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right)
 -ci\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)
 -di\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right) \\
&amp;=\left(\begin{matrix} a  &amp;  0  \\  0  &amp;  a \end{matrix}\right)
 +\left(\begin{matrix} 0  &amp; -bi \\ -bi &amp;  0 \end{matrix}\right)
 +\left(\begin{matrix} 0  &amp; -c  \\  c  &amp;  0 \end{matrix}\right)
 +\left(\begin{matrix}-di &amp;  0  \\  0  &amp;  di\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a-di &amp; -(c+bi) \\ c-bi &amp; a+di\end{matrix}\right)
\end{align}
</pre></div></div>

<p>※ エルミート行列ではありません。$a=0$ であれば<a href="https://ja.wikipedia.org/wiki/%E6%AD%AA%E3%82%A8%E3%83%AB%E3%83%9F%E3%83%BC%E3%83%88%E8%A1%8C%E5%88%97" rel="nofollow noopener" target="_blank">歪エルミート行列</a>になります。</p>

<h3>
<span id="行列式" class="fragment"></span><a href="#%E8%A1%8C%E5%88%97%E5%BC%8F"><i class="fa fa-link"></i></a>行列式</h3>

<p>四元数の行列表現には共役が現れています。</p>

<p>$α=a-di,\ β=-(c+bi)$ とおけば</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\left(\begin{matrix}a-di &amp; -(c+bi) \\ c-bi &amp; a+di\end{matrix}\right)
&amp;=\left(\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right)
\end{align}
</pre></div></div>

<p>このことから、行列式がノルムの2乗になることが分かります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\left|\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right|
&amp;=αα^* +ββ^* \\
&amp;=(a-di)(a+di)+(c+bi)(c-bi) \\
&amp;=(a^2+d^2)+(c^2+b^2) \\
&amp;=a^2+b^2+c^2+d^2
\end{align}
</pre></div></div>

<p>双四元数でも行列式がノルムの2乗となります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\left|\begin{matrix}a+d &amp; b-ci \\ b+ci &amp; a-d\end{matrix}\right|
&amp;=(a+d)(a-d)-(b-ci)(b+ci) \\
&amp;=(a^2-d^2)-(b^2+c^2) \\
&amp;=a^2-b^2-c^2-d^2
\end{align}
</pre></div></div>

<h3>
<span id="記憶法" class="fragment"></span><a href="#%E8%A8%98%E6%86%B6%E6%B3%95"><i class="fa fa-link"></i></a>記憶法</h3>

<p>※ ここで述べることが分かりやすいかは人によりますので、各自工夫してみてください。</p>

<p>双四元数の行列表現の第1列が</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\left(\begin{matrix}a+d \\ b+ci\end{matrix}\right)
</pre></div></div>

<p>になることと（$a$ からU字型に $b, ci, d$）、行列式からノルムが求まることを覚えていれば、パウリ行列を忘れても逆算で求められます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;\left(\begin{matrix}a+d &amp; b-ci \\ b+ci &amp; a-d\end{matrix}\right) \\
&amp;=a\underbrace{\left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)}_{I}
 +b\underbrace{\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right)}_{σ_1}
 +c\underbrace{\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)}_{σ_2}
 +d\underbrace{\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right)}_{σ_3}
\end{align}
</pre></div></div>

<p>※ $σ_2,σ_3$ の第2列がマイナスになっているのは、共役と関係あることが分かります。</p>

<h3>
<span id="任意性" class="fragment"></span><a href="#%E4%BB%BB%E6%84%8F%E6%80%A7"><i class="fa fa-link"></i></a>任意性</h3>

<p>同型対応は演算の結果が一致すれば良いので任意性があります。例えば四元数の演算規則には巡回性があるため、対応関係を巡回的にずらしても成り立ちます。</p>

<p>巡回性以外にも、例えば次のような同型対応も可能です。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\{1,i,j,k\}≅\{I,iσ_3,iσ_2,iσ_1\}
</pre></div></div>

<p>同型対応を変えれば行列表現も変わります。この対応で行列表現を求めれば、ケーリー=ディクソン構成と共役がきれいに表れます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
α+βj
&amp;=(a+bi)+(c+di)j \\
&amp;=a+bi+cj+dk \\
&amp;↦aI+b(iσ_3)+c(iσ_2)+d(iσ_1) \\
&amp;=a \left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)
 +bi\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right)
 +ci\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)
 +di\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a  &amp;  0  \\  0  &amp;  a \end{matrix}\right)
 +\left(\begin{matrix}bi &amp;  0  \\  0  &amp; -bi\end{matrix}\right)
 +\left(\begin{matrix}0  &amp;  c  \\ -c  &amp;  0 \end{matrix}\right)
 +\left(\begin{matrix}0  &amp;  di \\  di &amp;  0 \end{matrix}\right) \\
&amp;=\left(\begin{matrix}a+bi &amp; c+di \\ -(c-di) &amp; a-bi\end{matrix}\right) \\
&amp;=\left(\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right)
\end{align}
</pre></div></div>

<p>行列の形を見れば、行列式がノルムの2乗になるのは一目瞭然です。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\left|\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right|
=αα^* + ββ^*
=a^2+b^2+c^2+d^2
</pre></div></div>

<h3>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h3>

<p>四元数の行列表現やパウリ行列との関係は以下の書籍を参考にしました。</p>

<ul>
<li><a href="https://www.morikita.co.jp/books/book/3037" rel="nofollow noopener" target="_blank">今野紀雄(2016)『四元数』森北出版</a></li>
</ul>

<p>以下の資料では四元数とパウリ行列によって8次元空間（双四元数によって表されるのと同じ空間）が構成されることや、行列表現の求め方が詳しく説明されています。</p>

<ul>
<li>【PDF】 <a href="http://akita-nct.jp/libra/report/45/45107.pdf" rel="nofollow noopener" target="_blank">吉井洋二・上林一彦(2009)『パウリ行列と4元数』</a>
</li>
</ul>

<h1>
<span id="双曲四元数" class="fragment"></span><a href="#%E5%8F%8C%E6%9B%B2%E5%9B%9B%E5%85%83%E6%95%B0"><i class="fa fa-link"></i></a>双曲四元数</h1>

<p>ローレンツ変換が扱えて、元同士の積で $h$ が出て来ないように元を定義し直したのが双曲四元数です。</p>

<p>人為的に定義を調整しているため、双四元数のサブセットではありません。その調整の代償として結合性が失われています。</p>

<p>【例】 $(ii)j≠i(ij)$</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
(ii)j&amp;=j \\
i(ij)&amp;=ik=-j
\end{align}
</pre></div></div>

<p>双曲四元数についての詳細は<a href="http://qiita.com/7shi/items/2036e7a739c2a9e04025">四元数を作ろう</a>を参照してください。</p>

<h1>
<span id="分解型四元数" class="fragment"></span><a href="#%E5%88%86%E8%A7%A3%E5%9E%8B%E5%9B%9B%E5%85%83%E6%95%B0"><i class="fa fa-link"></i></a>分解型四元数</h1>

<p>双複素数の一部から分解型複素数を作ったのと同じように、双四元数の一部から分解型四元数が作られます。</p>

<p>分解型はノルムの2乗の符号が真ん中で分離されることを意味するため、$(+,+,-,-)$ 型となるように元を選んで文字を付け替えます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\{1,i,hj,hk\} &amp;≅ \{1,i,j,k\} \\
a+bi+chj+dhk  &amp;↦ a+bi+cj+dk
\end{align}
</pre></div></div>

<p>なぜ元をこう選んだのかは、ノルムを計算した後で考察します。</p>

<h2>
<span id="元の計算規則-1" class="fragment"></span><a href="#%E5%85%83%E3%81%AE%E8%A8%88%E7%AE%97%E8%A6%8F%E5%89%87-1"><i class="fa fa-link"></i></a>元の計算規則</h2>

<p>双四元数→分解型四元数の対比により、元の計算規則を確認します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
i^2&amp;=-1&amp;      &amp;↦&amp; i^2&amp;=-1 \\
(hj)^2&amp;=1&amp;    &amp;↦&amp; j^2&amp;=1  \\
(hk)^2&amp;=1&amp;    &amp;↦&amp; k^2&amp;=1  \\
i(hj)&amp;=hk&amp;    &amp;↦&amp; ij&amp;=k   \\
(hj)i&amp;=-hk&amp;   &amp;↦&amp; ji&amp;=-k  \\
(hj)(hk)&amp;=-i&amp; &amp;↦&amp; jk&amp;=-i  \\
(hk)(hj)&amp;=i&amp;  &amp;↦&amp; kj&amp;=i   \\
(hk)i&amp;=hj&amp;    &amp;↦&amp; ki&amp;=j   \\
i(hk)&amp;=-hj&amp;   &amp;↦&amp; ik&amp;=-j
\end{align}
</pre></div></div>

<p>うまく閉じていることが分かります。元の積が閉じていることから、一般の積についても閉じています。</p>

<h2>
<span id="共役" class="fragment"></span><a href="#%E5%85%B1%E5%BD%B9"><i class="fa fa-link"></i></a>共役</h2>

<p>共役は通常の四元数と同様に虚部の符号反転です。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
(a+bi+cj+dk)^*=a-bi-cj-dk
</pre></div></div>

<h2>
<span id="ノルム" class="fragment"></span><a href="#%E3%83%8E%E3%83%AB%E3%83%A0"><i class="fa fa-link"></i></a>ノルム</h2>

<p>ノルムの2乗を計算すれば $(+,+,-,-)$ 型となることが確認できます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;(a+bi+cj+dk)^*(a+bi+cj+dk) \\
&amp;=(a-bi-cj-dk)(a+bi+cj+dk) \\
&amp;=a(a+bi+cj+dk) \\
&amp;\quad -bi(a+bi+cj+dk) \\
&amp;\quad -cj(a+bi+cj+dk) \\
&amp;\quad -dk(a+bi+cj+dk) \\
&amp;=aa+abi+acj+adk \\
&amp;\quad -bai-bb\underbrace{ii}_{-1}-bc\underbrace{ij}_{k}-bd\underbrace{ik}_{-j} \\
&amp;\quad -caj-cb\underbrace{ji}_{-k}-cc\underbrace{jj}_{1}-cd\underbrace{jk}_{-i} \\
&amp;\quad -dak-db\underbrace{ki}_{j}-dc\underbrace{kj}_{i}-dd\underbrace{kk}_{1} \\
&amp;=a^2+b^2-c^2-d^2
\end{align}
</pre></div></div>

<p>元 $1,i,j,k$ の2乗は $1,-1,1,1$ ですが、ノルムの2乗の符号 $(+,+,-,-)$ とは一致しません。元の2乗の符号を $+,-,+,+$ と表して2番目以降の符号を反転させれば、ノルムの2乗の符号と一致します。ノルムの2乗が $a^2-b^2i^2-c^2j^2-d^2k^2$ であることを考えれば、この関係はすぐ分かるでしょう。</p>

<h1>
<span id="八元数" class="fragment"></span><a href="#%E5%85%AB%E5%85%83%E6%95%B0"><i class="fa fa-link"></i></a>八元数</h1>

<p>いよいよラスボスの八元数です。</p>

<p>構成方法は双四元数と同じです。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;(a_1+a_2i+a_3j+a_4k)+(a_5+a_6i+a_7j+a_8k)h \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6ih+a_7jh+a_8kh \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6i_h+a_7j_h+a_8k_h
\end{align}
</pre></div></div>

<p>双四元数では $h$ を係数として扱いましたが、八元数では $i,j,k$ と同列な元として扱う点が異なります。$ih,jh,kh$ は一塊の元のため、ここでは $i_h,j_h,k_h$ と表記します。これは一般的な表記ではありませんが、次のように元が直感的に構成できます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
ih=i_h,\ jh=j_h,\ kh=k_h
</pre></div></div>

<p>※ 元の表記方法はいくつか流儀があります。<a href="https://ja.wikipedia.org/wiki/%E5%85%AB%E5%85%83%E6%95%B0" rel="nofollow noopener" target="_blank">Wikipedia</a>では $e_0,...,e_7$ のように添字で表しています。添字表記では計算ルールを四元数から推測することが難しくなるため、この記事では採用していません。</p>

<p>【例】 $ij=k,\ ih=i_h\ ⇔\ e_1e_2=e_3,\ e_1e_4=e_5$</p>

<h2>
<span id="計算規則" class="fragment"></span><a href="#%E8%A8%88%E7%AE%97%E8%A6%8F%E5%89%87"><i class="fa fa-link"></i></a>計算規則</h2>

<p>虚数の元は2乗が $-1$ になると定義します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
i^2=j^2=k^2=h^2=i_h^2=j_h^2=k_h^2=-1
</pre></div></div>

<p>※ 双四元数では $(ih)^2=(jh)^2=(kh)^2=1$ となるため異なります。</p>

<p>$i,j,k$ の積は通常の四元数と同じです。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
ij=-ji=k,\ jk=-kj=i,\ ki=-ik=j
</pre></div></div>

<p>$h$ も元の1つのため、$i,j,k$ と同じように反交換性を持ちます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
ih=-hi=i_h,\ jh=-hj=j_h,\ kh=-hk=k_h
</pre></div></div>

<p>これだけでは演算が一意に決まりません。任意性がありますが、標準的には $ij_h=-k_h$ と定義します。</p>

<p>※ このように定義すれば、虚部で表される7次元空間を構成する3次元の部分空間が右手系に統一できるという意図があるようです。部分空間については外積やファノ平面などを考える必要があります。詳細は機会があればまとめる予定です。</p>

<p>異なる元の積には巡回性と反交換性が成り立ちます。（同じなら $-1$）</p>

<h3>
<span id="反結合性" class="fragment"></span><a href="#%E5%8F%8D%E7%B5%90%E5%90%88%E6%80%A7"><i class="fa fa-link"></i></a>反結合性</h3>

<p>$ij_h=-k_h$ をベースに演算を組み立てると、次のような性質が現れます。</p>

<p>$h$ が結合した元 $i_h, j_h, k_h$ は、構成する $ih, jh, kh$ を分解して隣接する元と<strong>結合</strong>する際に符号が<strong>反</strong>転します。これを<strong>反結合性</strong>と呼びます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
i(jh)=-(ij)h
</pre></div></div>

<p>結合法則が成り立たないため $ijh$ のように括弧を省略することはできません。混乱を避けるため、八元数の計算では連続した掛け算では常に括弧を付けます。</p>

<p>いくつか例を示します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
ij_h&amp;=\underbrace{i(jh)}_{-(ij)h}=-\underbrace{(ij)}_{k}h=-k_h \\
i_hj&amp;=\underbrace{(ih)j}_{-i(hj)}=-i\underbrace{(hj)}_{-jh}=ij_h=-k_h
\end{align}
</pre></div></div>

<p>$i_hj=ij_h$ より $h$ の位置が動いていると解釈できます。反交換性からも同じ結果になります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
i_hj=-ji_h=-\underbrace{j(ih)}_{-(ji)h}=\underbrace{(ji)}_{-k}h=-k_h
</pre></div></div>

<h3>
<span id="例外" class="fragment"></span><a href="#%E4%BE%8B%E5%A4%96"><i class="fa fa-link"></i></a>例外</h3>

<p>反結合性の例外として、同じ元が隣接した場合は符号の反転なしで結合して $-1$ となります。同じ元同士は結び付きが強いと解釈できます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
【例】\ 
ii_h&amp;=\underbrace{i(i}_{-1}h)=-h \\
i_hh&amp;=(i\underbrace{h)h}_{-1}=-i \\
i_hj_h&amp;=\underbrace{(ih)(jh)}_{X(jh)=-(Xj)h}=-\{\underbrace{(ih)j}_{-kh}\}h=(k\underbrace{h)h}_{-1}=-k
\end{align}
</pre></div></div>

<p>奇妙な規則ですが、巡回性（①②=③ → ②③=① → ③①=②）に由来します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
ih=i_h\ →\ hi_h=i\ →\ i_hi=h
</pre></div></div>

<p>これらに反交換性を適用すれば、先ほど見た関係が得られます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
i_hh=-i,\ ii_h=-h
</pre></div></div>

<p>$i_hj_h=-k$ は複雑ですが $(ij)(hh)=-k$ と覚えれば簡単でしょう。$ij_h=i_hj=-k_h$ と符号が同じ（$-k$）なのも意識すると良いかもしれません。</p>

<p>※ ここでも巡回性は成り立っているため $ki_h=-j_h$ から $i_hj_h=-k$ が得られます。</p>

<h3>
<span id="乗積表" class="fragment"></span><a href="#%E4%B9%97%E7%A9%8D%E8%A1%A8"><i class="fa fa-link"></i></a>乗積表</h3>

<p>まとめとして乗積表を掲載します。</p>

<p>※ 表を覚えるよりも、反結合性と例外に基づいて個々の結果を直接導くことをお勧めします。その過程をプログラムで表現したものを最後に掲載します。</p>

<table>
<thead>
<tr>
<th style="text-align: center">$1$</th>
<th style="text-align: center">$i$</th>
<th style="text-align: center">$j$</th>
<th style="text-align: center">$k$</th>
<th style="text-align: center">$h$</th>
<th style="text-align: center">$i_h$</th>
<th style="text-align: center">$j_h$</th>
<th style="text-align: center">$k_h$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">$i$</td>
<td style="text-align: center">$−1$</td>
<td style="text-align: center">$k$</td>
<td style="text-align: center">$−j$</td>
<td style="text-align: center">$i_h$</td>
<td style="text-align: center">$−h$</td>
<td style="text-align: center">$−k_h$</td>
<td style="text-align: center">$j_h$</td>
</tr>
<tr>
<td style="text-align: center">$j$</td>
<td style="text-align: center">$−k$</td>
<td style="text-align: center">$−1$</td>
<td style="text-align: center">$i$</td>
<td style="text-align: center">$j_h$</td>
<td style="text-align: center">$k_h$</td>
<td style="text-align: center">$−h$</td>
<td style="text-align: center">$−i_h$</td>
</tr>
<tr>
<td style="text-align: center">$k$</td>
<td style="text-align: center">$j$</td>
<td style="text-align: center">$−i$</td>
<td style="text-align: center">$−1$</td>
<td style="text-align: center">$k_h$</td>
<td style="text-align: center">$−j_h$</td>
<td style="text-align: center">$i_h$</td>
<td style="text-align: center">$−h$</td>
</tr>
<tr>
<td style="text-align: center">$h$</td>
<td style="text-align: center">$−i_h$</td>
<td style="text-align: center">$−j_h$</td>
<td style="text-align: center">$−k_h$</td>
<td style="text-align: center">$−1$</td>
<td style="text-align: center">$i$</td>
<td style="text-align: center">$j$</td>
<td style="text-align: center">$k$</td>
</tr>
<tr>
<td style="text-align: center">$i_h$</td>
<td style="text-align: center">$h$</td>
<td style="text-align: center">$−k_h$</td>
<td style="text-align: center">$j_h$</td>
<td style="text-align: center">$−i$</td>
<td style="text-align: center">$−1$</td>
<td style="text-align: center">$−k$</td>
<td style="text-align: center">$j$</td>
</tr>
<tr>
<td style="text-align: center">$j_h$</td>
<td style="text-align: center">$k_h$</td>
<td style="text-align: center">$h$</td>
<td style="text-align: center">$−i_h$</td>
<td style="text-align: center">$−j$</td>
<td style="text-align: center">$k$</td>
<td style="text-align: center">$−1$</td>
<td style="text-align: center">$−i$</td>
</tr>
<tr>
<td style="text-align: center">$k_h$</td>
<td style="text-align: center">$−j_h$</td>
<td style="text-align: center">$i_h$</td>
<td style="text-align: center">$h$</td>
<td style="text-align: center">$−k$</td>
<td style="text-align: center">$−j$</td>
<td style="text-align: center">$i$</td>
<td style="text-align: center">$−1$</td>
</tr>
</tbody>
</table>

<p>第1行と第1列を除いて考えれば、対角成分は元の2乗で $-1$、それ以外の成分は反交換性により反対称です。</p>

<p>※ この乗積表は<a href="https://ja.wikipedia.org/wiki/%E5%85%AB%E5%85%83%E6%95%B0" rel="nofollow noopener" target="_blank">Wikipedia</a>と同じ並べ方です。元の表記を置換すれば一致します。</p>

<p>ケーリー=ディクソンの構成法を反映して、小さいブロックから大きいブロックが構成されています。機会があれば詳細をまとめる予定です。</p>

<h2>
<span id="結合法則" class="fragment"></span><a href="#%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87"><i class="fa fa-link"></i></a>結合法則</h2>

<p>$h$ が関係する組み合わせでは反結合性が現れるため、結合法則を満たしません。</p>

<p>結合法則を満たす： $(ij)k=i(jk)$</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
(ij)k&amp;=kk=-1 \\
i(jk)&amp;=ii=-1
\end{align}
</pre></div></div>

<p>結合法則を満たさない： $(i_hj_h)k_h=-i_h(j_hk_h)$ （反結合）</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
(i_hj_h)k_h&amp;=(-k)k_h=h \\
i_h(j_hk_h)&amp;=i_h(-i)=ii_h=-h
\end{align}
</pre></div></div>

<p>四元数では交換法則、八元数では結合法則を失います。十六元数はもっと不便になります。ここでは詳細には触れませんが、興味があれば調べてみると良いでしょう。</p>

<h2>
<span id="積" class="fragment"></span><a href="#%E7%A9%8D"><i class="fa fa-link"></i></a>積</h2>

<p>四元数の虚部が3次元ベクトルと同一視できるように、八元数の虚部は7次元ベクトルと同一視できます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\vec{v}=\left(\begin{matrix}x_1\\x_2\\x_3\\x_4\\x_5\\x_6\\x_7\end{matrix}\right)=x_1i+x_2j+x_3k+x_4h+x_5i_h+x_6j_h+x_7k_h
</pre></div></div>

<p>八元数で表した7次元ベクトルの積を計算すれば、内積と外積が得られます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\vec{v}\vec{w}=-(\underbrace{\vec{v}\cdot\vec{w}}_{内積})+\underbrace{\vec{v}×\vec{w}}_{外積}
</pre></div></div>

<p>計算過程は<a href="http://qiita.com/7shi/items/8495b2d6b888e7b8703f">八元数の積をプログラムで確認</a>を参照してください。</p>

<p>外積（ベクトル積）が3次元と7次元でしか定義できないのは、四元数と八元数に関係があります。</p>

<p>詳細は以下の記事を参照してください。（$ℓ$ を前置する流儀です）</p>

<ul>
<li><a href="http://hooktail.sub.jp/vectoranalysis/SevenDCrossProd/" rel="nofollow noopener" target="_blank">七次元の外積 [物理のかぎしっぽ]</a></li>
</ul>

<h2>
<span id="共役-1" class="fragment"></span><a href="#%E5%85%B1%E5%BD%B9-1"><i class="fa fa-link"></i></a>共役</h2>

<p>共役は四元数と同様に虚部の符号反転です。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;(a_1+a_2i+a_3j+a_4k+a_5h+a_6i_h+a_7j_h+a_8k_h)^* \\
&amp;=a_1-a_2i-a_3j-a_4k-a_5h-a_6i_h-a_7j_h-a_8k_h
\end{align}
</pre></div></div>

<h2>
<span id="ノルム-1" class="fragment"></span><a href="#%E3%83%8E%E3%83%AB%E3%83%A0-1"><i class="fa fa-link"></i></a>ノルム</h2>

<p>ノルムの2乗を計算すればユークリッド型になることが確認できます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;\|a_1+a_2i+a_3j+a_4k+a_5h+a_6i_h+a_7j_h+a_8k_h\|^2 \\
&amp;=a_1^2+a_2^2+a_3^2+a_4^2+a_5^2+a_6^2+a_7^2+a_8^2
\end{align}
</pre></div></div>

<p>計算過程は<a href="http://qiita.com/7shi/items/8495b2d6b888e7b8703f">八元数の積をプログラムで確認</a>を参照してください。</p>

<h1>
<span id="プログラム" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0"><i class="fa fa-link"></i></a>プログラム</h1>

<p>反結合性と例外をパターンに分類して八元数の乗積表を作るプログラムです。<code>(*)</code> に注目してください。（<a href="https://bitbucket.org/7shi/math7" rel="nofollow noopener" target="_blank">リポジトリ</a>）</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">Octonion.fsx</span></div>
<div class="highlight"><pre>
<span class="k">type</span> <span class="nc">Octonion</span> <span class="o">=</span>
    <span class="n">E</span> <span class="o">|</span> <span class="n">I</span> <span class="o">|</span> <span class="n">J</span> <span class="o">|</span> <span class="n">K</span> <span class="o">|</span> <span class="n">H</span> <span class="k">of</span> <span class="n">Octonion</span>

    <span class="k">override</span> <span class="n">x</span><span class="p">.</span><span class="nf">ToString</span><span class="bp">()</span> <span class="o">=</span>
        <span class="k">match</span> <span class="n">x</span> <span class="k">with</span>
        <span class="o">|</span>   <span class="n">E</span> <span class="o">-&gt;</span> <span class="s">"1"</span> <span class="o">|</span> <span class="n">I</span> <span class="o">-&gt;</span> <span class="s">"i"</span> <span class="o">|</span> <span class="n">J</span> <span class="o">-&gt;</span> <span class="s">"j"</span> <span class="o">|</span> <span class="n">K</span> <span class="o">-&gt;</span> <span class="s">"k"</span>
        <span class="o">|</span> <span class="n">H</span> <span class="n">E</span> <span class="o">-&gt;</span> <span class="s">"h"</span>
        <span class="o">|</span> <span class="n">H</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="kt">string</span> <span class="n">x</span> <span class="o">+</span> <span class="s">"h"</span>

    <span class="k">member</span> <span class="n">x</span><span class="p">.</span><span class="nf">Next</span> <span class="o">=</span>
        <span class="k">match</span> <span class="n">x</span> <span class="k">with</span>
        <span class="o">|</span>   <span class="n">I</span> <span class="o">-&gt;</span> <span class="n">J</span>
        <span class="o">|</span>   <span class="n">J</span> <span class="o">-&gt;</span> <span class="n">K</span>
        <span class="o">|</span>   <span class="n">K</span> <span class="o">-&gt;</span> <span class="n">I</span>
        <span class="o">|</span> <span class="n">H</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">H</span> <span class="n">x</span><span class="o">.</span><span class="n">Next</span>
        <span class="o">|</span>   <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span>

    <span class="k">static</span> <span class="k">member</span> <span class="o">(*)(</span><span class="n">a</span><span class="o">:</span><span class="n">Octonion</span><span class="o">,</span> <span class="n">b</span><span class="o">:</span><span class="n">Octonion</span><span class="o">)</span> <span class="o">=</span>
        <span class="k">match</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span> <span class="k">with</span>
        <span class="o">|</span>   <span class="n">x</span><span class="o">,</span>   <span class="n">E</span>            <span class="o">-&gt;</span>  <span class="mi">1</span><span class="o">,</span>   <span class="n">x</span>  <span class="c1">// i1 = i</span>
        <span class="o">|</span>   <span class="n">E</span><span class="o">,</span>   <span class="n">y</span>            <span class="o">-&gt;</span>  <span class="mi">1</span><span class="o">,</span>   <span class="n">y</span>  <span class="c1">// 1i = i</span>
        <span class="o">|</span>   <span class="n">x</span><span class="o">,</span>   <span class="n">y</span> <span class="k">when</span> <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>   <span class="n">E</span>  <span class="c1">// ii = -1</span>
        <span class="o">|</span> <span class="n">H</span> <span class="n">x</span><span class="o">,</span> <span class="n">H</span> <span class="n">E</span>            <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span>   <span class="n">x</span>  <span class="c1">// (ih)h = -i</span>
        <span class="o">|</span> <span class="n">H</span> <span class="n">x</span><span class="o">,</span> <span class="n">H</span> <span class="n">y</span>            <span class="o">-&gt;</span> <span class="n">y</span> <span class="o">*</span> <span class="n">x</span>    <span class="c1">// (ih)(jh) = ji</span>
        <span class="o">|</span>   <span class="n">x</span><span class="o">,</span> <span class="n">H</span> <span class="n">E</span>            <span class="o">-&gt;</span>  <span class="mi">1</span><span class="o">,</span> <span class="n">H</span> <span class="n">x</span>  <span class="c1">// ih = (ih)</span>
        <span class="o">|</span>   <span class="n">x</span><span class="o">,</span> <span class="n">H</span> <span class="n">y</span> <span class="k">when</span> <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">H</span> <span class="n">E</span>  <span class="c1">// i(ih) = -h</span>
        <span class="o">|</span>   <span class="n">x</span><span class="o">,</span> <span class="n">H</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="k">let</span> <span class="nv">c</span><span class="o">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="n">x</span>    <span class="c1">// i(jh) = (ji)h</span>
                      <span class="n">c</span><span class="o">,</span> <span class="n">H</span> <span class="n">z</span>
        <span class="o">|</span>   <span class="n">x</span><span class="o">,</span>   <span class="n">y</span> <span class="k">when</span> <span class="n">x</span><span class="o">.</span><span class="n">Next</span> <span class="o">=</span> <span class="n">y</span>        <span class="c1">// ij = k</span>
                   <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">,</span> <span class="n">y</span><span class="o">.</span><span class="n">Next</span>
        <span class="o">|</span>   <span class="n">x</span><span class="o">,</span>   <span class="n">y</span> <span class="o">-&gt;</span> <span class="k">let</span> <span class="nv">c</span><span class="o">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="n">x</span>    <span class="c1">// ji = -ij</span>
                      <span class="o">-</span><span class="n">c</span><span class="o">,</span> <span class="n">z</span>

<span class="k">let</span> <span class="nv">str</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">z</span><span class="o">)</span> <span class="o">=</span>
    <span class="o">(</span><span class="k">if</span> <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">then</span> <span class="s">"-"</span> <span class="k">else</span> <span class="s">" "</span><span class="o">)</span> <span class="o">+</span> <span class="kt">string</span> <span class="n">z</span>
    <span class="o">|&gt;</span> <span class="n">sprintf</span> <span class="s">"%-3s"</span>

<span class="k">let</span> <span class="nv">elems</span> <span class="o">=</span> <span class="o">[</span><span class="n">E</span><span class="o">;</span> <span class="n">I</span><span class="o">;</span> <span class="n">J</span><span class="o">;</span> <span class="n">K</span><span class="o">;</span> <span class="n">H</span> <span class="n">E</span><span class="o">;</span> <span class="n">H</span> <span class="n">I</span><span class="o">;</span> <span class="n">H</span> <span class="n">J</span><span class="o">;</span> <span class="n">H</span> <span class="n">K</span><span class="o">]</span>

<span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="n">elems</span> <span class="k">do</span>
    <span class="n">elems</span>
    <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">map</span> <span class="o">((*)</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">str</span><span class="o">)</span>
    <span class="o">|&gt;</span> <span class="nn">String</span><span class="p">.</span><span class="n">concat</span> <span class="s">" "</span>
    <span class="o">|&gt;</span> <span class="n">printfn</span> <span class="s">"%s"</span>
</pre></div>
</div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">実行結果</span></div>
<div class="highlight"><pre>
 1   i   j   k   h   ih  jh  kh
 i  -1   k  -j   ih -h  -kh  jh
 j  -k  -1   i   jh  kh -h  -ih
 k   j  -i  -1   kh -jh  ih -h 
 h  -ih -jh -kh -1   i   j   k 
 ih  h  -kh  jh -i  -1  -k   j 
 jh  kh  h  -ih -j   k  -1  -i 
 kh -jh  ih  h  -k  -j   i  -1 
</pre></div>
</div>

<h1>
<span id="参考-1" class="fragment"></span><a href="#%E5%8F%82%E8%80%83-1"><i class="fa fa-link"></i></a>参考</h1>

<ul>
<li><a href="http://homepages.wmich.edu/%7Edrichter/octonions.htm" rel="nofollow noopener" target="_blank">Octonions</a></li>
<li><a href="http://www.geocities.jp/ikuro_kotaro/koramu/1869_mz.htm" rel="nofollow noopener" target="_blank">四元数と八元数</a></li>
</ul>

<h1>
<span id="多元数" class="fragment"></span><a href="#%E5%A4%9A%E5%85%83%E6%95%B0"><i class="fa fa-link"></i></a>多元数</h1>

<p><a href="https://ja.wikipedia.org/wiki/%E5%A4%9A%E5%85%83%E6%95%B0" rel="nofollow noopener" target="_blank">多元数</a>のバリエーションをまとめました。</p>

<table>
<thead>
<tr>
<th>基本</th>
<th>双</th>
<th>分解型</th>
<th>分解型双</th>
<th>双曲</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://ja.wikipedia.org/wiki/%E8%A4%87%E7%B4%A0%E6%95%B0" rel="nofollow noopener" target="_blank">複素数</a></td>
<td><a href="https://en.wikipedia.org/wiki/bicomplex_number" rel="nofollow noopener" target="_blank">双複素数</a></td>
<td><a href="https://ja.wikipedia.org/wiki/%E5%88%86%E8%A7%A3%E5%9E%8B%E8%A4%87%E7%B4%A0%E6%95%B0" rel="nofollow noopener" target="_blank">分解型複素数</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://ja.wikipedia.org/wiki/%E5%9B%9B%E5%85%83%E6%95%B0" rel="nofollow noopener" target="_blank">四元数</a></td>
<td><a href="https://en.wikipedia.org/wiki/biquaternion" rel="nofollow noopener" target="_blank">双四元数</a></td>
<td><a href="https://en.wikipedia.org/wiki/Split-quaternion" rel="nofollow noopener" target="_blank">分解型四元数</a></td>
<td><a href="https://en.wikipedia.org/wiki/split-biquaternion" rel="nofollow noopener" target="_blank">分解型双四元数</a></td>
<td><a href="https://en.wikipedia.org/wiki/hyperbolic_quaternion" rel="nofollow noopener" target="_blank">双曲四元数</a></td>
</tr>
<tr>
<td><a href="https://ja.wikipedia.org/wiki/%E5%85%AB%E5%85%83%E6%95%B0" rel="nofollow noopener" target="_blank">八元数</a></td>
<td><a href="https://en.wikipedia.org/wiki/Bioctonion" rel="nofollow noopener" target="_blank">双八元数</a></td>
<td><a href="https://en.wikipedia.org/wiki/split-octonion" rel="nofollow noopener" target="_blank">分解型八元数</a></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="https://ja.wikipedia.org/wiki/%E5%8D%81%E5%85%AD%E5%85%83%E6%95%B0" rel="nofollow noopener" target="_blank">十六元数</a></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="hidden"><form class="js-task-list-update" action="/7shi/items/b34fe724d36fb7d96456" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="1oKHST/aOhkAQU5DGilLKYLU5Hks0ReSdXhoUhlGEY64ABwRpPQDUv+S+19q3PVw4pPAyrsVTWVJpmGp+EgfSA==" /><input type="hidden" name="updated_at_confirmation_in_unixtime" id="updated_at_confirmation_in_unixtime" value="1488268093" class="js-task-list-updated-at" /><textarea name="raw_body" id="raw_body" class="js-task-list-field">
四元数に引き続き八元数を作ります。複雑な八元数の積をなるべく少ないルールで導出します。最後に考え方をプログラムで表現します。

関連する亜種も見ます。

* [双四元数](https://en.wikipedia.org/wiki/Biquaternion)
* [双曲四元数](https://en.wikipedia.org/wiki/hyperbolic_quaternion)
* [分解型四元数](https://en.wikipedia.org/wiki/Split-quaternion)

シリーズの記事です。

1. [多項式の積を計算](http://qiita.com/7shi/items/4fb60dacad46cb8e63b3)
1. [外積と愉快な仲間たち](http://qiita.com/7shi/items/017d2d2c758f76071f23)
1. [ユークリッド空間のホッジ双対とバブルソート](http://qiita.com/7shi/items/f54302058149d07da592)
1. [四元数を作ろう](http://qiita.com/7shi/items/2036e7a739c2a9e04025)
1. [四元数と行列で見る内積と外積の「内」と「外」](http://qiita.com/7shi/items/a80988a32a0d706e9378)
1. 八元数を作ろう ← この記事
1. [八元数の積をプログラムで確認](http://qiita.com/7shi/items/8495b2d6b888e7b8703f)
1. [外積の成分をプログラムで確認](http://qiita.com/7shi/items/02c758c03d2fd7038912)
1. [多元数の積の構成](http://qiita.com/7shi/items/88be5203769e629df243)

関連するコードをまとめたリポジトリです。

* https://bitbucket.org/7shi/math7

# 双四元数

複素数 $\mathbb{C}$ の係数に複素数を入れることで双複素数 $\mathbb{C}⊗\mathbb{C}$ を作りましたが、同じように複素数の係数に四元数 $\mathbb{H}$ を入れることで双四元数 $\mathbb{C}⊗\mathbb{H}$ が作れます。

※ 四元数の中に四元数を入れた $\mathbb{H}⊗\mathbb{H}$ ではありません。

新たに外側の虚数 $h$ を追加します。係数が増えすぎて混乱するため添え字で表します。

```math
\begin{align}
&amp;(a_1+a_2i+a_3j+a_4k)+(a_5+a_6i+a_7j+a_8k)h \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6ih+a_7jh+a_8kh \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6hi+a_7hj+a_8hk
\end{align}
```

双四元数において $i,j,k$ と $h$ は同列の存在ではなく、$h$ は係数の一部として扱います。通常の複素数を用いた式 $2ix$ で $x$ の係数が $2i$ であるのと同じように、$2hj$ で $j$ の係数が $2h$ だと考えます。そのため $h$ は自由に動かすことができます（$2hj=2jh$）。この考え方を反映して $h$ を係数に含めています。

## 元の計算規則

$i,j,k$ の積は通常の四元数と同じです。

```math
i^2=j^2=k^2=ijk=-1 \\
ij=-ji=k,\ jk=-kj=i,\ ki=-ik=j
```

$h$ が絡んだ場合、$h$ は係数の一部として計算します。

```math
\begin{align}
h^2&amp;=-1 \\
(hi)^2&amp;=(hh)(ii)=(-1)(-1)=1 \\
(hj)^2&amp;=(hh)(jj)=(-1)(-1)=1 \\
(hk)^2&amp;=(hh)(kk)=(-1)(-1)=1 \\
(hi)(hj)&amp;=(hh)(ij)=(-1)(k)=-k \\
(hj)(hi)&amp;=(hh)(ji)=(-1)(-k)=k \\
(hj)(hk)&amp;=(hh)(jk)=(-1)(i)=-i \\
(hk)(hj)&amp;=(hh)(kj)=(-1)(-i)=i \\
(hk)(hi)&amp;=(hh)(ki)=(-1)(j)=-j \\
(hi)(hk)&amp;=(hh)(ik)=(-1)(-j)=j \\
\end{align}
```

元の積が閉じていることから一般の積も閉じています。計算は複雑なため省略しますが、興味があれば確認してみると良いでしょう。

## ローレンツ変換との関係

双四元数から $1,hi,hj,hk$ を取り出せば、ノルムは $+,-,-,-$ 型になります。

```math
\begin{align}
&amp;\{a+b(hi)+c(hj)+d(hk)\}^*\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;=\{a-b(hi)-c(hj)-d(hk)\}\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;=a\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;\quad -b(hi)\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;\quad -c(hj)\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;\quad -d(hk)\{a+b(hi)+c(hj)+d(hk)\} \\
&amp;=aa+ab(hi)+ac(hj)+ad(hk) \\
&amp;\quad -ba(hi)-bb\underbrace{(hi)(hi)}_{1}-bc\underbrace{(hi)(hj)}_{-k}-bd\underbrace{(hi)(hk)}_{j} \\
&amp;\quad -ca(hj)-cb\underbrace{(hj)(hi)}_{k}-cc\underbrace{(hj)(hj)}_{1}-cd\underbrace{(hj)(hk)}_{-i} \\
&amp;\quad -da(hk)-db\underbrace{(hk)(hi)}_{-j}-dc\underbrace{(hk)(hj)}_{i}-dd\underbrace{(hk)(hk)}_{1} \\
&amp;=a^2-b^2-c^2-d^2
\end{align}
```

この性質を利用して、ローレンツ変換の計算に使うことができます。参考までに同等の理論について述べた文献を示します。

* [時間と空間の原理 新八元数と相対性理論](http://gotoclinic.org/policy.html)

なお、積の計算過程で $(hi)(hj)=-k$ のように $h$ が付かない元が現れていますが、$hh$ をそれ以上計算しなければ元に $h$ を残すことができます。

```math
(hi)(hj)=(hh)(ij)=h(hk)
```

## パウリ行列との関係

量子力学のスピンで使われる[パウリ行列](https://ja.wikipedia.org/wiki/%E3%83%91%E3%82%A6%E3%83%AA%E8%A1%8C%E5%88%97)という行列があります。

```math
σ_1=\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right),
σ_2=\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right),
σ_3=\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right)
```

※ パウリ行列は[エルミート行列](https://ja.wikipedia.org/wiki/%E3%82%A8%E3%83%AB%E3%83%9F%E3%83%BC%E3%83%88%E8%A1%8C%E5%88%97)（複素共役を取って転置すると元に戻る行列・自己随伴行列）です。

双四元数から $1,hi,hj,hk$ を取り出したものはパウリ行列と同型です。

```math
\{1,hi,hj,hk\}≅\{I,σ_1,σ_2,σ_3\}
```

双四元数での係数の $h$ は、パウリ行列では $i$ として表れます。

```math
(hi)(hj)=h(hk)\ ↦\ σ_1σ_2=iσ_3
```

ところで $hi$ に $-h$ を掛ければ $h$ を取り除けます。

```math
\underbrace{-h}_{-i}\underbrace{(hi)}_{σ_1}=-(hh)i=i
```

この関係を使えば四元数とパウリ行列の同型対応が分かります。

```math
\{1,i,j,k\}≅\{I,-iσ_1,-iσ_2,-iσ_3\}
```

### 行列表現

パウリ行列を使えば、双四元数や四元数を行列で表現できます。

双四元数の行列表現を確認します。

```math
\begin{align}
&amp;a+bhi+chj+dhk \\
&amp;↦aI+bσ_1+cσ_2+dσ_3 \\
&amp;=a\left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)
 +b\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right)
 +c\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)
 +d\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a &amp;  0  \\ 0  &amp;  a\end{matrix}\right)
 +\left(\begin{matrix}0 &amp;  b  \\ b  &amp;  0\end{matrix}\right)
 +\left(\begin{matrix}0 &amp; -ci \\ ci &amp;  0\end{matrix}\right)
 +\left(\begin{matrix}d &amp;  0  \\ 0  &amp; -d\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a+d &amp; b-ci \\ b+ci &amp; a-d\end{matrix}\right)
\end{align}
```

※ エルミート行列であるパウリ行列（と単位行列）から構成されていることから、双四元数の行列表現はエルミート行列です。

四元数の行列表現を確認します。

```math
\begin{align}
&amp;a+bi+cj+dk \\
&amp;↦aI+b(-iσ_1)+c(-iσ_2)+d(-iσ_3) \\
&amp;=a \left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)
 -bi\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right)
 -ci\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)
 -di\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right) \\
&amp;=\left(\begin{matrix} a  &amp;  0  \\  0  &amp;  a \end{matrix}\right)
 +\left(\begin{matrix} 0  &amp; -bi \\ -bi &amp;  0 \end{matrix}\right)
 +\left(\begin{matrix} 0  &amp; -c  \\  c  &amp;  0 \end{matrix}\right)
 +\left(\begin{matrix}-di &amp;  0  \\  0  &amp;  di\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a-di &amp; -(c+bi) \\ c-bi &amp; a+di\end{matrix}\right)
\end{align}
```

※ エルミート行列ではありません。$a=0$ であれば[歪エルミート行列](https://ja.wikipedia.org/wiki/%E6%AD%AA%E3%82%A8%E3%83%AB%E3%83%9F%E3%83%BC%E3%83%88%E8%A1%8C%E5%88%97)になります。

### 行列式

四元数の行列表現には共役が現れています。

$α=a-di,\ β=-(c+bi)$ とおけば

```math
\begin{align}
\left(\begin{matrix}a-di &amp; -(c+bi) \\ c-bi &amp; a+di\end{matrix}\right)
&amp;=\left(\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right)
\end{align}
```

このことから、行列式がノルムの2乗になることが分かります。

```math
\begin{align}
\left|\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right|
&amp;=αα^* +ββ^* \\
&amp;=(a-di)(a+di)+(c+bi)(c-bi) \\
&amp;=(a^2+d^2)+(c^2+b^2) \\
&amp;=a^2+b^2+c^2+d^2
\end{align}
```

双四元数でも行列式がノルムの2乗となります。

```math
\begin{align}
\left|\begin{matrix}a+d &amp; b-ci \\ b+ci &amp; a-d\end{matrix}\right|
&amp;=(a+d)(a-d)-(b-ci)(b+ci) \\
&amp;=(a^2-d^2)-(b^2+c^2) \\
&amp;=a^2-b^2-c^2-d^2
\end{align}
```

### 記憶法

※ ここで述べることが分かりやすいかは人によりますので、各自工夫してみてください。

双四元数の行列表現の第1列が

```math
\left(\begin{matrix}a+d \\ b+ci\end{matrix}\right)
```

になることと（$a$ からU字型に $b, ci, d$）、行列式からノルムが求まることを覚えていれば、パウリ行列を忘れても逆算で求められます。

```math
\begin{align}
&amp;\left(\begin{matrix}a+d &amp; b-ci \\ b+ci &amp; a-d\end{matrix}\right) \\
&amp;=a\underbrace{\left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)}_{I}
 +b\underbrace{\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right)}_{σ_1}
 +c\underbrace{\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)}_{σ_2}
 +d\underbrace{\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right)}_{σ_3}
\end{align}
```

※ $σ_2,σ_3$ の第2列がマイナスになっているのは、共役と関係あることが分かります。

### 任意性

同型対応は演算の結果が一致すれば良いので任意性があります。例えば四元数の演算規則には巡回性があるため、対応関係を巡回的にずらしても成り立ちます。

巡回性以外にも、例えば次のような同型対応も可能です。

```math
\{1,i,j,k\}≅\{I,iσ_3,iσ_2,iσ_1\}
```

同型対応を変えれば行列表現も変わります。この対応で行列表現を求めれば、ケーリー=ディクソン構成と共役がきれいに表れます。

```math
\begin{align}
α+βj
&amp;=(a+bi)+(c+di)j \\
&amp;=a+bi+cj+dk \\
&amp;↦aI+b(iσ_3)+c(iσ_2)+d(iσ_1) \\
&amp;=a \left(\begin{matrix}1 &amp;  0 \\ 0 &amp;  1\end{matrix}\right)
 +bi\left(\begin{matrix}1 &amp;  0 \\ 0 &amp; -1\end{matrix}\right)
 +ci\left(\begin{matrix}0 &amp; -i \\ i &amp;  0\end{matrix}\right)
 +di\left(\begin{matrix}0 &amp;  1 \\ 1 &amp;  0\end{matrix}\right) \\
&amp;=\left(\begin{matrix}a  &amp;  0  \\  0  &amp;  a \end{matrix}\right)
 +\left(\begin{matrix}bi &amp;  0  \\  0  &amp; -bi\end{matrix}\right)
 +\left(\begin{matrix}0  &amp;  c  \\ -c  &amp;  0 \end{matrix}\right)
 +\left(\begin{matrix}0  &amp;  di \\  di &amp;  0 \end{matrix}\right) \\
&amp;=\left(\begin{matrix}a+bi &amp; c+di \\ -(c-di) &amp; a-bi\end{matrix}\right) \\
&amp;=\left(\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right)
\end{align}
```

行列の形を見れば、行列式がノルムの2乗になるのは一目瞭然です。

```math
\left|\begin{matrix}α &amp; β \\ -β^* &amp; α^* \end{matrix}\right|
=αα^* + ββ^*
=a^2+b^2+c^2+d^2
```

### 参考

四元数の行列表現やパウリ行列との関係は以下の書籍を参考にしました。

* [今野紀雄(2016)『四元数』森北出版](https://www.morikita.co.jp/books/book/3037)

以下の資料では四元数とパウリ行列によって8次元空間（双四元数によって表されるのと同じ空間）が構成されることや、行列表現の求め方が詳しく説明されています。

* 【PDF】 [吉井洋二・上林一彦(2009)『パウリ行列と4元数』](http://akita-nct.jp/libra/report/45/45107.pdf)

# 双曲四元数

ローレンツ変換が扱えて、元同士の積で $h$ が出て来ないように元を定義し直したのが双曲四元数です。

人為的に定義を調整しているため、双四元数のサブセットではありません。その調整の代償として結合性が失われています。

【例】 $(ii)j≠i(ij)$

```math
\begin{align}
(ii)j&amp;=j \\
i(ij)&amp;=ik=-j
\end{align}
```

双曲四元数についての詳細は[四元数を作ろう](http://qiita.com/7shi/items/2036e7a739c2a9e04025)を参照してください。

# 分解型四元数

双複素数の一部から分解型複素数を作ったのと同じように、双四元数の一部から分解型四元数が作られます。

分解型はノルムの2乗の符号が真ん中で分離されることを意味するため、$(+,+,-,-)$ 型となるように元を選んで文字を付け替えます。

```math
\begin{align}
\{1,i,hj,hk\} &amp;≅ \{1,i,j,k\} \\
a+bi+chj+dhk  &amp;↦ a+bi+cj+dk
\end{align}
```

なぜ元をこう選んだのかは、ノルムを計算した後で考察します。

## 元の計算規則

双四元数→分解型四元数の対比により、元の計算規則を確認します。

```math
\begin{align}
i^2&amp;=-1&amp;      &amp;↦&amp; i^2&amp;=-1 \\
(hj)^2&amp;=1&amp;    &amp;↦&amp; j^2&amp;=1  \\
(hk)^2&amp;=1&amp;    &amp;↦&amp; k^2&amp;=1  \\
i(hj)&amp;=hk&amp;    &amp;↦&amp; ij&amp;=k   \\
(hj)i&amp;=-hk&amp;   &amp;↦&amp; ji&amp;=-k  \\
(hj)(hk)&amp;=-i&amp; &amp;↦&amp; jk&amp;=-i  \\
(hk)(hj)&amp;=i&amp;  &amp;↦&amp; kj&amp;=i   \\
(hk)i&amp;=hj&amp;    &amp;↦&amp; ki&amp;=j   \\
i(hk)&amp;=-hj&amp;   &amp;↦&amp; ik&amp;=-j
\end{align}
```

うまく閉じていることが分かります。元の積が閉じていることから、一般の積についても閉じています。

## 共役

共役は通常の四元数と同様に虚部の符号反転です。

```math
(a+bi+cj+dk)^*=a-bi-cj-dk
```

## ノルム

ノルムの2乗を計算すれば $(+,+,-,-)$ 型となることが確認できます。

```math
\begin{align}
&amp;(a+bi+cj+dk)^*(a+bi+cj+dk) \\
&amp;=(a-bi-cj-dk)(a+bi+cj+dk) \\
&amp;=a(a+bi+cj+dk) \\
&amp;\quad -bi(a+bi+cj+dk) \\
&amp;\quad -cj(a+bi+cj+dk) \\
&amp;\quad -dk(a+bi+cj+dk) \\
&amp;=aa+abi+acj+adk \\
&amp;\quad -bai-bb\underbrace{ii}_{-1}-bc\underbrace{ij}_{k}-bd\underbrace{ik}_{-j} \\
&amp;\quad -caj-cb\underbrace{ji}_{-k}-cc\underbrace{jj}_{1}-cd\underbrace{jk}_{-i} \\
&amp;\quad -dak-db\underbrace{ki}_{j}-dc\underbrace{kj}_{i}-dd\underbrace{kk}_{1} \\
&amp;=a^2+b^2-c^2-d^2
\end{align}
```

元 $1,i,j,k$ の2乗は $1,-1,1,1$ ですが、ノルムの2乗の符号 $(+,+,-,-)$ とは一致しません。元の2乗の符号を $+,-,+,+$ と表して2番目以降の符号を反転させれば、ノルムの2乗の符号と一致します。ノルムの2乗が $a^2-b^2i^2-c^2j^2-d^2k^2$ であることを考えれば、この関係はすぐ分かるでしょう。

# 八元数

いよいよラスボスの八元数です。

構成方法は双四元数と同じです。

```math
\begin{align}
&amp;(a_1+a_2i+a_3j+a_4k)+(a_5+a_6i+a_7j+a_8k)h \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6ih+a_7jh+a_8kh \\
&amp;=a_1+a_2i+a_3j+a_4k+a_5h+a_6i_h+a_7j_h+a_8k_h
\end{align}
```

双四元数では $h$ を係数として扱いましたが、八元数では $i,j,k$ と同列な元として扱う点が異なります。$ih,jh,kh$ は一塊の元のため、ここでは $i_h,j_h,k_h$ と表記します。これは一般的な表記ではありませんが、次のように元が直感的に構成できます。

```math
ih=i_h,\ jh=j_h,\ kh=k_h
```

※ 元の表記方法はいくつか流儀があります。[Wikipedia](https://ja.wikipedia.org/wiki/%E5%85%AB%E5%85%83%E6%95%B0)では $e_0,...,e_7$ のように添字で表しています。添字表記では計算ルールを四元数から推測することが難しくなるため、この記事では採用していません。

【例】 $ij=k,\ ih=i_h\ ⇔\ e_1e_2=e_3,\ e_1e_4=e_5$

## 計算規則

虚数の元は2乗が $-1$ になると定義します。

```math
i^2=j^2=k^2=h^2=i_h^2=j_h^2=k_h^2=-1
```

※ 双四元数では $(ih)^2=(jh)^2=(kh)^2=1$ となるため異なります。

$i,j,k$ の積は通常の四元数と同じです。

```math
ij=-ji=k,\ jk=-kj=i,\ ki=-ik=j
```

$h$ も元の1つのため、$i,j,k$ と同じように反交換性を持ちます。

```math
ih=-hi=i_h,\ jh=-hj=j_h,\ kh=-hk=k_h
```

これだけでは演算が一意に決まりません。任意性がありますが、標準的には $ij_h=-k_h$ と定義します。

※ このように定義すれば、虚部で表される7次元空間を構成する3次元の部分空間が右手系に統一できるという意図があるようです。部分空間については外積やファノ平面などを考える必要があります。詳細は機会があればまとめる予定です。

異なる元の積には巡回性と反交換性が成り立ちます。（同じなら $-1$）

### 反結合性

$ij_h=-k_h$ をベースに演算を組み立てると、次のような性質が現れます。

$h$ が結合した元 $i_h, j_h, k_h$ は、構成する $ih, jh, kh$ を分解して隣接する元と**結合**する際に符号が**反**転します。これを**反結合性**と呼びます。

```math
i(jh)=-(ij)h
```

結合法則が成り立たないため $ijh$ のように括弧を省略することはできません。混乱を避けるため、八元数の計算では連続した掛け算では常に括弧を付けます。

いくつか例を示します。

```math
\begin{align}
ij_h&amp;=\underbrace{i(jh)}_{-(ij)h}=-\underbrace{(ij)}_{k}h=-k_h \\
i_hj&amp;=\underbrace{(ih)j}_{-i(hj)}=-i\underbrace{(hj)}_{-jh}=ij_h=-k_h
\end{align}
```

$i_hj=ij_h$ より $h$ の位置が動いていると解釈できます。反交換性からも同じ結果になります。

```math
i_hj=-ji_h=-\underbrace{j(ih)}_{-(ji)h}=\underbrace{(ji)}_{-k}h=-k_h
```

### 例外

反結合性の例外として、同じ元が隣接した場合は符号の反転なしで結合して $-1$ となります。同じ元同士は結び付きが強いと解釈できます。

```math
\begin{align}
【例】\ 
ii_h&amp;=\underbrace{i(i}_{-1}h)=-h \\
i_hh&amp;=(i\underbrace{h)h}_{-1}=-i \\
i_hj_h&amp;=\underbrace{(ih)(jh)}_{X(jh)=-(Xj)h}=-\{\underbrace{(ih)j}_{-kh}\}h=(k\underbrace{h)h}_{-1}=-k
\end{align}
```

奇妙な規則ですが、巡回性（①②=③ → ②③=① → ③①=②）に由来します。

```math
ih=i_h\ →\ hi_h=i\ →\ i_hi=h
```

これらに反交換性を適用すれば、先ほど見た関係が得られます。

```math
i_hh=-i,\ ii_h=-h
```

$i_hj_h=-k$ は複雑ですが $(ij)(hh)=-k$ と覚えれば簡単でしょう。$ij_h=i_hj=-k_h$ と符号が同じ（$-k$）なのも意識すると良いかもしれません。

※ ここでも巡回性は成り立っているため $ki_h=-j_h$ から $i_hj_h=-k$ が得られます。

### 乗積表

まとめとして乗積表を掲載します。

※ 表を覚えるよりも、反結合性と例外に基づいて個々の結果を直接導くことをお勧めします。その過程をプログラムで表現したものを最後に掲載します。

$1$|$i$|$j$|$k$|$h$|$i_h$|$j_h$|$k_h$
:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:
$i$|$−1$|$k$|$−j$|$i_h$|$−h$|$−k_h$|$j_h$
$j$|$−k$|$−1$|$i$|$j_h$|$k_h$|$−h$|$−i_h$
$k$|$j$|$−i$|$−1$|$k_h$|$−j_h$|$i_h$|$−h$
$h$|$−i_h$|$−j_h$|$−k_h$|$−1$|$i$|$j$|$k$
$i_h$|$h$|$−k_h$|$j_h$|$−i$|$−1$|$−k$|$j$
$j_h$|$k_h$|$h$|$−i_h$|$−j$|$k$|$−1$|$−i$
$k_h$|$−j_h$|$i_h$|$h$|$−k$|$−j$|$i$|$−1$

第1行と第1列を除いて考えれば、対角成分は元の2乗で $-1$、それ以外の成分は反交換性により反対称です。

※ この乗積表は[Wikipedia](https://ja.wikipedia.org/wiki/%E5%85%AB%E5%85%83%E6%95%B0)と同じ並べ方です。元の表記を置換すれば一致します。

ケーリー=ディクソンの構成法を反映して、小さいブロックから大きいブロックが構成されています。機会があれば詳細をまとめる予定です。

## 結合法則

$h$ が関係する組み合わせでは反結合性が現れるため、結合法則を満たしません。

結合法則を満たす： $(ij)k=i(jk)$

```math
\begin{align}
(ij)k&amp;=kk=-1 \\
i(jk)&amp;=ii=-1
\end{align}
```

結合法則を満たさない： $(i_hj_h)k_h=-i_h(j_hk_h)$ （反結合）

```math
\begin{align}
(i_hj_h)k_h&amp;=(-k)k_h=h \\
i_h(j_hk_h)&amp;=i_h(-i)=ii_h=-h
\end{align}
```

四元数では交換法則、八元数では結合法則を失います。十六元数はもっと不便になります。ここでは詳細には触れませんが、興味があれば調べてみると良いでしょう。

## 積

四元数の虚部が3次元ベクトルと同一視できるように、八元数の虚部は7次元ベクトルと同一視できます。

```math
\vec{v}=\left(\begin{matrix}x_1\\x_2\\x_3\\x_4\\x_5\\x_6\\x_7\end{matrix}\right)=x_1i+x_2j+x_3k+x_4h+x_5i_h+x_6j_h+x_7k_h
```

八元数で表した7次元ベクトルの積を計算すれば、内積と外積が得られます。

```math
\vec{v}\vec{w}=-(\underbrace{\vec{v}\cdot\vec{w}}_{内積})+\underbrace{\vec{v}×\vec{w}}_{外積}
```

計算過程は[八元数の積をプログラムで確認](http://qiita.com/7shi/items/8495b2d6b888e7b8703f)を参照してください。

外積（ベクトル積）が3次元と7次元でしか定義できないのは、四元数と八元数に関係があります。

詳細は以下の記事を参照してください。（$ℓ$ を前置する流儀です）

* [七次元の外積 [物理のかぎしっぽ]](http://hooktail.sub.jp/vectoranalysis/SevenDCrossProd/)

## 共役

共役は四元数と同様に虚部の符号反転です。

```math
\begin{align}
&amp;(a_1+a_2i+a_3j+a_4k+a_5h+a_6i_h+a_7j_h+a_8k_h)^* \\
&amp;=a_1-a_2i-a_3j-a_4k-a_5h-a_6i_h-a_7j_h-a_8k_h
\end{align}
```

## ノルム

ノルムの2乗を計算すればユークリッド型になることが確認できます。

```math
\begin{align}
&amp;\|a_1+a_2i+a_3j+a_4k+a_5h+a_6i_h+a_7j_h+a_8k_h\|^2 \\
&amp;=a_1^2+a_2^2+a_3^2+a_4^2+a_5^2+a_6^2+a_7^2+a_8^2
\end{align}
```

計算過程は[八元数の積をプログラムで確認](http://qiita.com/7shi/items/8495b2d6b888e7b8703f)を参照してください。

# プログラム

反結合性と例外をパターンに分類して八元数の乗積表を作るプログラムです。`(*)` に注目してください。（[リポジトリ](https://bitbucket.org/7shi/math7)）

```fsharp:Octonion.fsx
type Octonion =
    E | I | J | K | H of Octonion

    override x.ToString() =
        match x with
        |   E -&gt; &quot;1&quot; | I -&gt; &quot;i&quot; | J -&gt; &quot;j&quot; | K -&gt; &quot;k&quot;
        | H E -&gt; &quot;h&quot;
        | H x -&gt; string x + &quot;h&quot;

    member x.Next =
        match x with
        |   I -&gt; J
        |   J -&gt; K
        |   K -&gt; I
        | H x -&gt; H x.Next
        |   x -&gt; x

    static member (*)(a:Octonion, b:Octonion) =
        match a, b with
        |   x,   E            -&gt;  1,   x  // i1 = i
        |   E,   y            -&gt;  1,   y  // 1i = i
        |   x,   y when x = y -&gt; -1,   E  // ii = -1
        | H x, H E            -&gt; -1,   x  // (ih)h = -i
        | H x, H y            -&gt; y * x    // (ih)(jh) = ji
        |   x, H E            -&gt;  1, H x  // ih = (ih)
        |   x, H y when x = y -&gt; -1, H E  // i(ih) = -h
        |   x, H y -&gt; let c, z = y * x    // i(jh) = (ji)h
                      c, H z
        |   x,   y when x.Next = y        // ij = k
                   -&gt; 1, y.Next
        |   x,   y -&gt; let c, z = y * x    // ji = -ij
                      -c, z

let str (a, z) =
    (if a = -1 then &quot;-&quot; else &quot; &quot;) + string z
    |&gt; sprintf &quot;%-3s&quot;

let elems = [E; I; J; K; H E; H I; H J; H K]

for x in elems do
    elems
    |&gt; List.map ((*) x &gt;&gt; str)
    |&gt; String.concat &quot; &quot;
    |&gt; printfn &quot;%s&quot;
```
```text:実行結果
 1   i   j   k   h   ih  jh  kh
 i  -1   k  -j   ih -h  -kh  jh
 j  -k  -1   i   jh  kh -h  -ih
 k   j  -i  -1   kh -jh  ih -h 
 h  -ih -jh -kh -1   i   j   k 
 ih  h  -kh  jh -i  -1  -k   j 
 jh  kh  h  -ih -j   k  -1  -i 
 kh -jh  ih  h  -k  -j   i  -1 
```

# 参考

* [Octonions](http://homepages.wmich.edu/~drichter/octonions.htm)
* [四元数と八元数](http://www.geocities.jp/ikuro_kotaro/koramu/1869_mz.htm)

# 多元数

[多元数](https://ja.wikipedia.org/wiki/%E5%A4%9A%E5%85%83%E6%95%B0)のバリエーションをまとめました。

基本|双|分解型|分解型双|双曲
----|----|----|----|----
[複素数](https://ja.wikipedia.org/wiki/%E8%A4%87%E7%B4%A0%E6%95%B0)|[双複素数](https://en.wikipedia.org/wiki/bicomplex_number)|[分解型複素数](https://ja.wikipedia.org/wiki/%E5%88%86%E8%A7%A3%E5%9E%8B%E8%A4%87%E7%B4%A0%E6%95%B0)||
[四元数](https://ja.wikipedia.org/wiki/%E5%9B%9B%E5%85%83%E6%95%B0)|[双四元数](https://en.wikipedia.org/wiki/biquaternion)|[分解型四元数](https://en.wikipedia.org/wiki/Split-quaternion)|[分解型双四元数](https://en.wikipedia.org/wiki/split-biquaternion)|[双曲四元数](https://en.wikipedia.org/wiki/hyperbolic_quaternion)
[八元数](https://ja.wikipedia.org/wiki/%E5%85%AB%E5%85%83%E6%95%B0)|[双八元数](https://en.wikipedia.org/wiki/Bioctonion)|[分解型八元数](https://en.wikipedia.org/wiki/split-octonion)||
[十六元数](https://ja.wikipedia.org/wiki/%E5%8D%81%E5%85%AD%E5%85%83%E6%95%B0)||||
</textarea><input type="submit" name="commit" value="Save changes" data-disable-with="Save changes" /></form></div></section></div><div class="col-sm-3"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="八元数を作ろう by @7shi on @Qiita" data-url="http://qiita.com/7shi/items/b34fe724d36fb7d96456" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="八元数を作ろう" href="http://b.hatena.ne.jp/entry/http://qiita.com/7shi/items/b34fe724d36fb7d96456" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/7shi/items/b34fe724d36fb7d96456" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/7shi/items/b34fe724d36fb7d96456" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div><section class="itemsShowAuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><a href="/7shi"><img alt="" class="itemsShowAuthorInfo_userIcon" itemprop="image" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" /></a><div class="itemsShowAuthorInfo_profileStats"><strong class="itemsShowAuthorInfo_userName" itemprop="name"><a itemprop="url" href="/7shi">7shi</a></strong><div class="itemsShowAuthorInfo_contribution"><span class="itemsShowAuthorInfo_count">2522</span><span class="itemsShowAuthorInfo_unit">Contribution</span></div><div data-react-class="T.UserFollowButton" data-react-props="{&quot;url_name&quot;:&quot;7shi&quot;,&quot;initial_followed_by&quot;:false,&quot;size&quot;:&quot;btn-xs&quot;,&quot;position&quot;:&quot;author-info&quot;}"></div></div><section class="itemsShowAuthorPopularItems"><h5 class="itemsShowAuthorPopularItems_sectionTitle">Popular Posts</h5><ul class="itemsShowAuthorPopularItems_posts list-unstyled"><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/145f1234f8ec2af923ef">Haskell 超入門</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/547b6137d7a3c482fe68">モナド則がちょっと分かった？</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/cac7b3e9b90bf91b00cc">文字列で学ぶC++入門</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/85afd7bbd5d6c4115ad6">Haskell アクション 超入門</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/d1e5a0c22be6cf61d286">Haskell IDE Leksah 入門</a></li></ul></section></section><div class="scroll-chaser"><div class="google-adsense"><style>.test-text-responsible { width: 200px; height: 200px; }@media(min-width: 1200px) {  .test-text-responsible { width: 250px; height: 250px; }}@media(max-width: 979px) and (min-width: 768px) {  .test-text-responsible { width: 120px; height: 240px; }}@media(max-width: 767px) {  .test-text-responsible { width: 320px; height: 50px; }}</style><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle test-text-responsible" data-ad-client="ca-pub-8127218772604357" data-ad-slot="3880091879" style="display:inline-block"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div><div data-react-class="T.Toc" data-react-props="{&quot;body&quot;:&quot;\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%8C%E5%9B%9B%E5%85%83%E6%95%B0\&quot;\u003e双四元数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%85%83%E3%81%AE%E8%A8%88%E7%AE%97%E8%A6%8F%E5%89%87\&quot;\u003e元の計算規則\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%83%AD%E3%83%BC%E3%83%AC%E3%83%B3%E3%83%84%E5%A4%89%E6%8F%9B%E3%81%A8%E3%81%AE%E9%96%A2%E4%BF%82\&quot;\u003eローレンツ変換との関係\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%83%91%E3%82%A6%E3%83%AA%E8%A1%8C%E5%88%97%E3%81%A8%E3%81%AE%E9%96%A2%E4%BF%82\&quot;\u003eパウリ行列との関係\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E8%A1%8C%E5%88%97%E8%A1%A8%E7%8F%BE\&quot;\u003e行列表現\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E8%A1%8C%E5%88%97%E5%BC%8F\&quot;\u003e行列式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E8%A8%98%E6%86%B6%E6%B3%95\&quot;\u003e記憶法\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E4%BB%BB%E6%84%8F%E6%80%A7\&quot;\u003e任意性\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%82%E8%80%83\&quot;\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%8C%E6%9B%B2%E5%9B%9B%E5%85%83%E6%95%B0\&quot;\u003e双曲四元数\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%88%86%E8%A7%A3%E5%9E%8B%E5%9B%9B%E5%85%83%E6%95%B0\&quot;\u003e分解型四元数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%85%83%E3%81%AE%E8%A8%88%E7%AE%97%E8%A6%8F%E5%89%87-1\&quot;\u003e元の計算規則\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%85%B1%E5%BD%B9\&quot;\u003e共役\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%83%8E%E3%83%AB%E3%83%A0\&quot;\u003eノルム\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%85%AB%E5%85%83%E6%95%B0\&quot;\u003e八元数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E8%A8%88%E7%AE%97%E8%A6%8F%E5%89%87\&quot;\u003e計算規則\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%8D%E7%B5%90%E5%90%88%E6%80%A7\&quot;\u003e反結合性\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E4%BE%8B%E5%A4%96\&quot;\u003e例外\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E4%B9%97%E7%A9%8D%E8%A1%A8\&quot;\u003e乗積表\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E7%B5%90%E5%90%88%E6%B3%95%E5%89%87\&quot;\u003e結合法則\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E7%A9%8D\&quot;\u003e積\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%85%B1%E5%BD%B9-1\&quot;\u003e共役\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%83%8E%E3%83%AB%E3%83%A0-1\&quot;\u003eノルム\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0\&quot;\u003eプログラム\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%82%E8%80%83-1\&quot;\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%A4%9A%E5%85%83%E6%95%B0\&quot;\u003e多元数\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n&quot;,&quot;wrapper&quot;:&quot;#article-body-wrapper&quot;}"></div></div></div><div class="row"><div class="col-sm-9"><div class="ArticleFooter__menu"><div class="s-flex-align-center"><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:2,&quot;show_count&quot;:true,&quot;uuid&quot;:&quot;b34fe724d36fb7d96456&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-footer&quot;}"></div><div class="ArticleFooter__userList"><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="big538"><a itemprop="url" href="/big538"><img alt="big538" class="thumb thumb--xs" src="https://avatars.githubusercontent.com/u/23475692?v=3" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="YoutaroMine"><a itemprop="url" href="/YoutaroMine"><img alt="YoutaroMine" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/51445/profile-images/1473692443" /></a></div></div></div></div><div class="u-flex u-align-center"><div class="ArticleFooter__stock"><div class="js-stockbutton" data-position="footer_menu" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="ArticleFooter__editRequest"><a class="u-link-no-underline" data-toggle="tooltip" title="You can propose improvements about the article to the author 💪" href="/drafts/b34fe724d36fb7d96456/edit"><span class="fa fa-send-o fa-lg"></span> <span>Edit request</span></a></div><div class="dropdown ArticleFooter__dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a href="/7shi/items/b34fe724d36fb7d96456.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><i class="fa fa-fw fa-flag"></i> Report article</a></li></ul></div></div></div><ul class="references js-referencesView"><li class="references_header"><i class="fa fa-fw fa-link"></i> Linked from these articles</li><a class="references_toggleOldReferences js-toggleOldReferences" href="#"><i class="fa fa-expand js-toggleOldReferencesIcon"></i><span class="js-toggleOldReferencesText">Show old 3 links</span></a><li class="references_reference js-reference js-oldReference"><span>Linked from </span><a href="/7shi/items/2036e7a739c2a9e04025#_reference-918d9d92de0755de3ae6"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />四元数を作ろう</a><time class="references_datetime js-dateTimeView" datetime="2016-12-05T17:44:40+00:00">3 months ago</time></li><li class="references_reference js-reference js-oldReference"><span>Linked from </span><a href="/7shi/items/a80988a32a0d706e9378#_reference-23415e822b29b8ce65e4"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />四元数と行列で見る内積と外積の「内」と「外」</a><time class="references_datetime js-dateTimeView" datetime="2016-12-05T17:47:29+00:00">3 months ago</time></li><li class="references_reference js-reference js-oldReference"><span>Linked from </span><a href="/7shi/items/8495b2d6b888e7b8703f#_reference-f8b8ed46d8746725f41a"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />八元数の積をプログラムで確認</a><time class="references_datetime js-dateTimeView" datetime="2016-12-13T10:11:43+00:00">3 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/017d2d2c758f76071f23#_reference-231411b8198b1f21d2da"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />外積と愉快な仲間たち</a><time class="references_datetime js-dateTimeView" datetime="2016-12-15T04:36:33+00:00">3 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/f54302058149d07da592#_reference-23e4ec8a43a31522634b"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />ユークリッド空間のホッジ双対とバブルソート</a><time class="references_datetime js-dateTimeView" datetime="2016-12-15T04:41:25+00:00">3 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/4fb60dacad46cb8e63b3#_reference-c4c45d616989951c11cb"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />多項式の積を計算</a><time class="references_datetime js-dateTimeView" datetime="2016-12-19T05:49:03+00:00">2 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/02c758c03d2fd7038912#_reference-649ec9350107d9b307a0"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />外積の成分をプログラムで確認</a><time class="references_datetime js-dateTimeView" datetime="2016-12-20T09:15:07+00:00">2 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/88be5203769e629df243#_reference-1f875ff78dbab479656b"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />多元数の積の構成</a><time class="references_datetime js-dateTimeView" datetime="2017-01-03T18:42:07+00:00">about 2 months ago</time></li></ul><div class="itemsShowBody_articleColumnFooter"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="八元数を作ろう by @7shi on @Qiita" data-url="http://qiita.com/7shi/items/b34fe724d36fb7d96456" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="八元数を作ろう" href="http://b.hatena.ne.jp/entry/http://qiita.com/7shi/items/b34fe724d36fb7d96456" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/7shi/items/b34fe724d36fb7d96456" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/7shi/items/b34fe724d36fb7d96456" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div></div><div class="itemsShowComment_wrapper" id="comments"><div data-react-class="T.CommentListContainer" data-react-props="{&quot;currentUser&quot;:null,&quot;initialComments&quot;:[],&quot;monthly_public_image_uploadable_size_limit&quot;:null,&quot;total_uploaded_public_image_size_in_current_month&quot;:null,&quot;item&quot;:{&quot;id&quot;:445285,&quot;uuid&quot;:&quot;b34fe724d36fb7d96456&quot;,&quot;suspended&quot;:false,&quot;secret&quot;:false},&quot;owner&quot;:{&quot;url_name&quot;:&quot;7shi&quot;},&quot;is_team&quot;:false,&quot;is_project&quot;:false,&quot;logged_in&quot;:false,&quot;polling&quot;:false,&quot;mention_candidates&quot;:[{&quot;id&quot;:32057,&quot;url_name&quot;:&quot;7shi&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823&quot;}]}">Comments Loading...</div></div></div></div></div></article><div class="js-report-form modal fade reportForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Report article</h4></div><div class="modal-body"><form action="/reports" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="178CT1LoOFPFf+6wCoL2XyLUe/1zMutboltXe88x6Uy5PZkXycYBGDqsW6x6d0gGQpNfTuT2sayehV6ALj/nig==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/7shi/items/b34fe724d36fb7d96456" /><input type="hidden" name="item_uuid" id="item_uuid" value="b34fe724d36fb7d96456" /><p>Help us understand the problem. What is going on with this item?</p><br /><div class="form-group"><ul class="list-unstyled"><li><label><input type="radio" name="report_type" id="report_type_spam" value="spam" required="required" /> It&#39;s spam </label></li><li><label><input type="radio" name="report_type" id="report_type_harassment" value="harassment" required="required" /> It&#39;s abusive or harmful </label></li><li><label><input type="radio" name="report_type" id="report_type_inappropriate_content" value="inappropriate_content" required="required" /> It contains inappropriate content </label></li></ul></div><div class="reportForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary reportForm_submitButton"><i class="fa fa-send"></i> Submit</button></div></form></div></div></div></div><script id="js-item" type="application/json">{ "url": "http://qiita.com/7shi/items/b34fe724d36fb7d96456", "id": 445285, "uuid": "b34fe724d36fb7d96456" }</script><script class="js-user" type="application/json">{&quot;id&quot;:32057,&quot;url_name&quot;:&quot;7shi&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823&quot;}</script><script language="JavaScript" src="//cdn.bigmining.com/private/js/qiita_bigmining.js" type="text/javascript"></script></div><footer class="footer"><div class="footer_inner"><div class="footer_container"><ul class="footer_links-left"><li class="footer_link"><a class="footer_copyright" href="http://increments.co.jp">© 2011-2017 Increments Inc.</a></li><li class="footer_link"><a href="http://qiita.com/terms">Terms</a></li><li class="footer_link"><a href="http://qiita.com/privacy">Privacy</a></li><li class="footer_link"><a href="http://help.qiita.com">Help</a></li><li class="footer_link"><a href="https://increments.zendesk.com/anonymous_requests/new">Contact</a></li></ul><ul class="footer_links-right"><li class="footer_link"><a href="http://qiita.com/about">About</a></li><li class="footer_link"><a href="/users">Users</a></li><li class="footer_link"><a href="/tags">Tags</a></li><li class="footer_link"><a href="http://blog.qiita.com">Blog</a></li><li class="footer_link"><a href="http://qiita.com/api/v2/docs">API</a></li><li class="footer_link"><a href="https://teams.qiita.com/">Team</a></li><li class="footer_link"><a href="http://kobito.qiita.com">Kobito</a></li><li class="footer_link"><a class="js-public-form-feedback-link" data-target=".js-feedback-form" data-toggle="modal" href=""><i class="fa fa-heart"></i> Feedback <i class="fa fa-caret-down"></i></a></li></ul></div></div></footer><div class="js-feedback-form modal fade feedbackForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Feedback</h4></div><div class="modal-body"><form class="js-feedback-form-form" action="/feedbacks" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="jlOfBJJpvpAImWhxYMMz+VDLBWachDRJimtCROYETobg0QRcCUeH2/dK3W0QNo2gMIwh1QtAbr62tUu/BwpAQA==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/7shi/items/b34fe724d36fb7d96456" /><div class="form-group"><textarea name="feedback[message]" id="feedback_message" class="form-control js-feedback-form-text-area" placeholder="Please give us any feedback about Qiita." required="required" rows="5">
</textarea></div><div class="feedbackForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary feedbackForm_submitButton"><i class="fa fa-send"></i> Submit</button><p class="feedbackForm_note">We don&#39;t reply to any feedback.<br />If you need help with Qiita, please send a support request from <a href="https://increments.zendesk.com/anonymous_requests/new">here</a>.</p></div><div style="position:fixed;top:-99999px;opacity:0.0001;"><input name="feedback[name]" type="text" /></div></form></div></div></div></div><script>// if (window.mixpanel instanceof Element) {
//   window.mixpanel = [];
// }
// (function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
// for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);</script><script src="http://cdn.qiita.com/assets/public-8c6201a66dc6db6f64a9017391c319bf.min.js"></script><script>
  (function () {
    var script = document.getElementsByTagName('script')[0];
    var load = function (src, id) {
      var el = document.createElement('script');
      el.async = true;
      el.src = src;
      el.id = id;
      script.parentNode.insertBefore(el, script);
    };
      // Optimizely
      load('//cdn.optimizely.com/js/52738645.js', 'optimizely-jssdk');
      // Google Analytics
      window._gaq = window._gaq || [];
      var isCareer = location.hostname.split('.')[0] == 'career';
      if (isCareer) {
        window._gaq.push(['_setAccount', 'UA-24675221-11']);
        window._gaq.push(['_setDomainName', 'qiita.com']);
      } else {
        window._gaq.push(['_setAccount', 'UA-24675221-1']);
      }
      window._gaq.push(['_setCustomVar', 1, 'logged_in', 'false', 2]);
      window._gaq.push(['_trackPageview']);
      var src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      load(src, 'google-analytics-jssdk');
    // Google Analytics - Universal Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-24675221-12', {
          
        });
        ga('set', 'dimension1', 'false');
        ga('set', 'dimension3', 'false');
      ga('require', 'displayfeatures');
      ga('set', 'forceSSL', true);
      ga('send', 'pageview');
    // Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TBQWPN');
  })();
</script>
</body></html>