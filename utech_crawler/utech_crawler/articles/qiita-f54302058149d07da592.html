<!DOCTYPE html><html xmlns:og="http://ogp.me/ns#"><head><meta charset="UTF-8" /><title>ユークリッド空間のホッジ双対とバブルソート - Qiita</title><meta content="width=device-width,initial-scale=1" name="viewport" /><meta content="幾何学積によるバブルソートを応用したホッジ双対の作り方と、内積との関係を紹介します。幾何学積・ウェッジ積やホッジ双対の基本的な扱い方に慣れるのが目的のため、説明をユークリッド空間に限定します。説明した事項をF#で実装しながら、最後にホッジ双対による4次元の内積を求めます。

シリーズの記事です。


多項式の積を計算
外積と愉快な仲間たち
ユークリッド空間のホッジ双対とバブルソート ← この記事
四元数を作ろう
四元数と行列で見る内積と外積の「内」と「外」
八元数を作ろ..." name="description" /><meta content="summary" name="twitter:card" /><meta content="@Qiita" name="twitter:site" /><meta content="7shi" name="twitter:creator" /><meta content="ユークリッド空間のホッジ双対とバブルソート - Qiita" property="og:title" /><meta content="article" property="og:type" /><meta content="http://qiita.com/7shi/items/f54302058149d07da592" property="og:url" /><meta content="http://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" property="og:image" /><meta content="幾何学積によるバブルソートを応用したホッジ双対の作り方と、内積との関係を紹介します。幾何学積・ウェッジ積やホッジ双対の基本的な扱い方に慣れるのが目的のため、説明をユークリッド空間に限定します。説明した事項をF#で実装しながら、最後にホ..." property="og:description" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><link rel="shortcut icon" type="image/x-icon" href="http://cdn.qiita.com/assets/favicons/public/production-4ff10c1e1e2b5fcb353ff9cafdd56c70.ico" /><link rel="apple-touch-icon" type="image/png" href="http://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link rel="stylesheet" media="all" href="http://cdn.qiita.com/assets/public-e8d29e8ff1879118096f0f5877946857.min.css" /><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="79htdiYOixOpTLL9AOEcdT3V7pIKAscyXMZnpsT3IwuBWvYuvSCyWFafB+FwFKIsXZLKIZ3GncVgGG5dJfktzQ==" /></head><body class="without-js" id=""><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-TBQWPN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>
  document.body.className = document.body.className.replace('without-js', '') + ' with-js';
  window.Qiita = {"asset_host":"cdn.qiita.com","TLD":"com","controller_path":"public/items","controller_action":"public/items#show","controller":"items","action":"show","env":"production","flash":{},"is_landing_page":false,"is_team_page":false,"root_domain":"qiita.com","variant":null,"config":{"mixpanel":{"career":"dd35af27e959781713d63fd7ca898a8d","per_team":"c0a2116368b33b44b5029ebd2cc9b094","public":"be87616606b0e26a87689099aab2c4e5","team":"b7c0342acba2dbc8742484d98788efb3"},"default_locale":"ja","locale":"en"},"team":null,"user":null,"GIT_BRANCH":null,"DEBUG":false};

</script>
<div class="headerContainer headerContainer-public" role="navigation"><div data-react-class="T.HeaderContainer" data-react-props="{&quot;user&quot;:null,&quot;team&quot;:null,&quot;news&quot;:{&quot;type&quot;:&quot;Hot&quot;,&quot;content&quot;:&quot;Markdownによる情報共有サービス、Qiita:Team&quot;,&quot;url&quot;:&quot;https://teams.qiita.com?utm_source=qiita\u0026utm_medium=header_news&quot;},&quot;initial_unread_count&quot;:null,&quot;siteid_image&quot;:&quot;http://cdn.qiita.com/siteid-reverse.png&quot;,&quot;is_team_page&quot;:false,&quot;on_team_setting&quot;:false,&quot;show_post_menu&quot;:true,&quot;show_search_menu&quot;:true,&quot;is_fluid&quot;:false,&quot;locale&quot;:&quot;en&quot;}"></div></div><div id="main"><ol class="itemBreadcrumbs" itemscope="" itemtype="http://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="/"><span itemprop="name">Qiita</span></a><meta content="1" itemprop="position" /></li><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="/items"><span itemprop="name">Items</span></a><meta content="2" itemprop="position" /></li><li itemprop="itemListElement" itemscope="" itemtype="http://schema.org/ListItem"><a itemprop="item" href="/tags/%E6%95%B0%E5%AD%A6"><span itemprop="name">数学</span></a><meta content="3" itemprop="position" /></li></ol><article itemscope="" itemtype="http://schema.org/Article"><div class="ArticleMainHeader "><div class="container"></div><div class="container"><div class="row s-flex-align-center"><div class="col-sm-9"><h1 class="ArticleMainHeader__title">ユークリッド空間のホッジ双対とバブルソート</h1><ul class="TagList"><li class="TagList__item" data-count="503"><a class="u-link-unstyled TagList__label" href="/tags/%E6%95%B0%E5%AD%A6"><img alt="数学" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/8fe97b92406365b26c7ffbda350a237c07ef4feb/medium.jpg?1421593187" /><span>数学</span></a></li><li class="TagList__item" data-count="3"><a class="u-link-unstyled TagList__label" href="/tags/%E5%A4%96%E7%A9%8D%E4%BB%A3%E6%95%B0"><img alt="外積代数" class="TagList__icon" src="//cdn.qiita.com/assets/icons/medium/missing-2e17009a0b32a6423572b0e6dc56727e.png" /><span>外積代数</span></a></li><li class="TagList__item" data-count="2"><a class="u-link-unstyled TagList__label" href="/tags/%E3%82%AF%E3%83%AA%E3%83%95%E3%82%A9%E3%83%BC%E3%83%89%E4%BB%A3%E6%95%B0"><img alt="クリフォード代数" class="TagList__icon" src="//cdn.qiita.com/assets/icons/medium/missing-2e17009a0b32a6423572b0e6dc56727e.png" /><span>クリフォード代数</span></a></li><li class="TagList__item" data-count="160"><a class="u-link-unstyled TagList__label" href="/tags/F%23"><img alt="F#" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/ba95a660afc4ec92093e69afbd0b70d04e51245b/medium.jpg?1395581508" /><span>F#</span></a></li></ul></div><div class="col-sm-3"><div class="itemsShowHeaderStock"><ul class="list-unstyled itemsShowHeaderStock_statusList"><li><div class="itemsShowHeaderStock_count stock"><span class="fa fa-thumbs-up"></span><span class="js-likecount">3</span></div><div class="itemsShowHeaderStock_countText">Like</div></li><li><div class="itemsShowHeaderStock_count" content="0 UserComments" itemprop="interactionCount"><span class="fa fa-comment"></span>0</div><div class="itemsShowHeaderStock_countText">Comment</div></li></ul></div><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:3,&quot;uuid&quot;:&quot;f54302058149d07da592&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-header&quot;}"></div><ul class="list-inline ArticleMainHeader__users"><li class="js-hovercard" data-hovercard-target-name="apple4751"><a itemprop="url" href="/apple4751"><img alt="apple4751" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/93070/profile-images/1473705835" /></a></li><li class="js-hovercard" data-hovercard-target-name="kktk-KO"><a itemprop="url" href="/kktk-KO"><img alt="kktk-KO" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/46436/profile-images/1473690647" /></a></li><li class="js-hovercard" data-hovercard-target-name="bahaki386"><a itemprop="url" href="/bahaki386"><img alt="bahaki386" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/47544/profile-images/1473691031" /></a></li></ul></div></div></div></div><div class="ArticleAsideHeader"><div class="container"><div class="u-flex u-space-between"><div class="u-flex u-flex-wrap"><div class="u-flex u-align-center s-pdv-5 u-flex-wrap"><div class="ArticleAsideHeader__author"><a href="/7shi"><img class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" alt="1473685823" /></a> <a class="u-link-unstyled" href="/7shi">7shi</a> </div><div class="ArticleAsideHeader__date"><span data-toggle="tooltip" title="posted at 2016-10-31">Edited at <time datetime="2017-01-04T03:52:43+09:00" itemprop="dateModified">2017-01-04</time></span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"><div class="ArticleAsideHeader__revision"> <a data-toggle="tooltip" title="Revisions" href="/7shi/items/f54302058149d07da592/revisions"><span class="fa fa-history"></span></a><span class="ArticleAsideHeader__revisionCount">36</span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"></div></div><div class="u-flex u-align-center s-flex-justiry-between s-pdv-5 u-shrink-0"><div class="ArticleAsideHeader__stock"><div class="js-stockbutton" data-position="top" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h fa-lg"></span></a><ul class="dropdown-menu dropdown-menu-right"><li class="dropdown__item--mobile"><a href="/7shi/items/f54302058149d07da592/revisions"><span class="fa fa-fw fa-history"></span> Revisions<span>(36)</span></a></li><li><a href="/7shi/items/f54302058149d07da592.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><span class="fa fa-fw fa-flag"></span> Report article</a></li></ul></div></div></div></div></div><div class="container"><div class="row" id="article-body-wrapper"><div class="col-sm-9"><section class="markdownContent markdownContent-headingEnabled js-task-list-container clearfix position-relative" id="item-f54302058149d07da592" itemprop="articleBody"><p>幾何学積によるバブルソートを応用したホッジ双対の作り方と、内積との関係を紹介します。幾何学積・ウェッジ積やホッジ双対の基本的な扱い方に慣れるのが目的のため、説明をユークリッド空間に限定します。説明した事項をF#で実装しながら、最後にホッジ双対による4次元の内積を求めます。</p>

<p>シリーズの記事です。</p>

<ol>
<li><a href="http://qiita.com/7shi/items/4fb60dacad46cb8e63b3" id="reference-6c76db314e1a7ae4d52c">多項式の積を計算</a></li>
<li><a href="http://qiita.com/7shi/items/017d2d2c758f76071f23" id="reference-23b37c7d9309ea6adf32">外積と愉快な仲間たち</a></li>
<li>ユークリッド空間のホッジ双対とバブルソート ← この記事</li>
<li><a href="http://qiita.com/7shi/items/2036e7a739c2a9e04025" id="reference-cbe489e5684cae0d63cc">四元数を作ろう</a></li>
<li><a href="http://qiita.com/7shi/items/a80988a32a0d706e9378" id="reference-8620032e07795742b5e7">四元数と行列で見る内積と外積の「内」と「外」</a></li>
<li><a href="http://qiita.com/7shi/items/b34fe724d36fb7d96456" id="reference-23e4ec8a43a31522634b">八元数を作ろう</a></li>
<li><a href="http://qiita.com/7shi/items/8495b2d6b888e7b8703f" id="reference-43af9e86017a46d0a719">八元数の積をプログラムで確認</a></li>
<li><a href="http://qiita.com/7shi/items/02c758c03d2fd7038912" id="reference-25878285e23541c4e3fd">外積の成分をプログラムで確認</a></li>
<li><a href="http://qiita.com/7shi/items/88be5203769e629df243" id="reference-60c719d0147750a31005">多元数の積の構成</a></li>
</ol>

<p>関連するコードをまとめたリポジトリです。</p>

<ul>
<li><a href="https://bitbucket.org/7shi/math7" class="autolink" rel="nofollow noopener" target="_blank">https://bitbucket.org/7shi/math7</a></li>
</ul>

<p>この記事を読んでクリフォード代数に興味を持った方には、次の記事がお勧めです。</p>

<ul>
<li>【PDF】<a href="http://members3.jcom.home.ne.jp/nososnd/field/cliff.pdf" rel="nofollow noopener" target="_blank">クリフォード代数</a>
</li>
<li>【英語】<a href="https://www.av8n.com/physics/clifford-intro.htm" rel="nofollow noopener" target="_blank">Introduction to Clifford Algebra</a>
</li>
</ul>

<h1>
<span id="互換" class="fragment"></span><a href="#%E4%BA%92%E6%8F%9B"><i class="fa fa-link"></i></a>互換</h1>

<p>隣接した因子を交換することを<strong>互換</strong>と呼びます。「互いに入れ換える」というニュアンスです。今回考える互換は等価性を保持するため、その意味で「互換性」と通じる点があります。</p>

<p>※ 後で見るように偶奇性だけが問題となります。互換に隣接の制限を掛けない場合もありますが、偶奇性は保持されるため結果は同じです。</p>

<p>普通の掛け算の例です。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
a\underbrace{bc}_{互換}d=acbd
</pre></div></div>

<p>3因子以上の互換は結合法則を前提とします。ベクトル積は結合法則を満たさないため、互換の対象からは除外します。</p>

<p>ウェッジ積や幾何学積では、互換の際に符号が反転します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\vec{a}∧\underbrace{\vec{b}∧\vec{c}}_{-\vec{c}∧\vec{b}}∧\vec{d}&amp;=-\vec{a}∧\vec{c}∧\vec{b}∧\vec{d} \\
\vec{a}\underbrace{\vec{b}\vec{c}}_{-\vec{c}\vec{b}}\vec{d}&amp;=-\vec{a}\vec{c}\vec{b}\vec{d}
\end{align}
</pre></div></div>

<h2>
<span id="ゼロ" class="fragment"></span><a href="#%E3%82%BC%E3%83%AD"><i class="fa fa-link"></i></a>ゼロ</h2>

<p>ウェッジ積の連結の中で同じ基底が表れたものはゼロになります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\underbrace{\vec{e_1}∧\vec{e_1}}_{0}∧\vec{e_2}=0
</pre></div></div>

<p>位置が離れていても互換を繰り返せば、横隣りになってゼロになります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\vec{e_1}∧\underbrace{\vec{e_3}∧\vec{e_1}}_{-\vec{e_1}∧\vec{e_3}}&amp;=-\underbrace{\vec{e_1}∧\vec{e_1}}_{0}∧\vec{e_3}=0
\end{align}
</pre></div></div>

<p>ウェッジ積では、同じ基底が含まれていれば互換を飛ばして即ゼロになると考えても問題ありません。しかし幾何学積や四元数のように同じ基底同士の積がゼロにならないものでは、きちんと互換を追う必要があります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\vec{e_1}\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_2}&amp;=-\underbrace{\vec{e_1}\vec{e_1}}_{1}\underbrace{\vec{e_2}\vec{e_2}}_{1}=-1 \\
i\underbrace{ji}_{-ij}j&amp;=-\underbrace{ii}_{-1}\underbrace{jj}_{-1}=-1
\end{align}
</pre></div></div>

<h1>
<span id="幾何学積" class="fragment"></span><a href="#%E5%B9%BE%E4%BD%95%E5%AD%A6%E7%A9%8D"><i class="fa fa-link"></i></a>幾何学積</h1>

<p>幾何学積を使えばホッジ双対が簡単に導出できます。そのために必要な幾何学積の性質について説明します。</p>

<h2>
<span id="ソート" class="fragment"></span><a href="#%E3%82%BD%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>ソート</h2>

<p>互換により基底をソートできます。互換の回数に応じて符号が決まります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\vec{e_2}\underbrace{\vec{e_3}\vec{e_1}}_{-\vec{e_1}\vec{e_3}}=-\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_3}=\vec{e_1}\vec{e_2}\vec{e_3}
</pre></div></div>

<p>符号を除けばバブルソートと同じです。詳細は次の記事の前半を参照してください。</p>

<ul>
<li>
<a href="http://qiita.com/7shi/items/1e2a66bf8e8c7f0bd70f" id="reference-f1b23c65f66fc7870fa6">Haskellでバブルソート</a> 2014.09.18</li>
</ul>

<p>※ 後半のHaskellでの実装は飛ばしても構いません。</p>

<p>手計算の場合、ソートの過程で同じ基底が隣接すれば、その場で $1$ にした方が簡単でしょう。</p>

<h3>
<span id="実装" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>実装</h3>

<p><a href="https://bitbucket.org/7shi/math7/src/tip/Math7.Exterior.fsx" rel="nofollow noopener" target="_blank">Math7.Exterior.fsx</a> から引用します。<a href="https://bitbucket.org/7shi/math7/src/tip/Math7.fsx" rel="nofollow noopener" target="_blank">Math7.fsx</a> と <a href="https://bitbucket.org/7shi/math7/src/tip/Math7.Term.fsx" rel="nofollow noopener" target="_blank">Math7.Term.fsx</a> に依存しています。全体は<a href="https://bitbucket.org/7shi/math7" rel="nofollow noopener" target="_blank">リポジトリ</a>を参照してください。</p>

<p>バブルソートをF#で実装します。符号を決めるため互換の回数を数えます。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">bsortE</span> <span class="n">xs</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">rec</span> <span class="n">bswap</span> <span class="n">n</span> <span class="o">=</span> <span class="k">function</span>
        <span class="o">|</span> <span class="bp">[]</span>    <span class="o">-&gt;</span> <span class="n">n</span><span class="o">,</span> <span class="bp">[]</span>
        <span class="o">|</span> <span class="n">x</span><span class="o">::</span><span class="n">xs</span> <span class="o">-&gt;</span>
            <span class="k">match</span> <span class="n">bswap</span> <span class="n">n</span> <span class="n">xs</span> <span class="k">with</span>
            <span class="o">|</span> <span class="n">n</span><span class="o">,</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="n">n</span><span class="o">,</span> <span class="o">[</span><span class="n">x</span><span class="o">]</span>
            <span class="o">|</span> <span class="n">n</span><span class="o">,</span> <span class="n">y</span><span class="o">::</span><span class="n">ys</span> <span class="k">when</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">y</span><span class="o">::</span><span class="n">x</span><span class="o">::</span><span class="n">ys</span>
            <span class="o">|</span> <span class="n">n</span><span class="o">,</span> <span class="n">y</span><span class="o">::</span><span class="n">ys</span>            <span class="o">-&gt;</span> <span class="n">n</span>    <span class="o">,</span> <span class="n">x</span><span class="o">::</span><span class="n">y</span><span class="o">::</span><span class="n">ys</span>
    <span class="k">let</span> <span class="nv">rec</span> <span class="n">bsort</span> <span class="n">n</span> <span class="n">xs</span> <span class="o">=</span>
        <span class="k">match</span> <span class="n">bswap</span> <span class="n">n</span> <span class="n">xs</span> <span class="k">with</span>
        <span class="o">|</span> <span class="n">n</span><span class="o">,</span> <span class="bp">[]</span>    <span class="o">-&gt;</span> <span class="n">n</span><span class="o">,</span> <span class="bp">[]</span>
        <span class="o">|</span> <span class="n">n</span><span class="o">,</span> <span class="n">y</span><span class="o">::</span><span class="n">ys</span> <span class="o">-&gt;</span> <span class="k">let</span> <span class="nv">n</span><span class="o">,</span> <span class="n">ys</span> <span class="o">=</span> <span class="n">bsort</span> <span class="n">n</span> <span class="n">ys</span>
                      <span class="n">n</span><span class="o">,</span> <span class="n">y</span><span class="o">::</span><span class="n">ys</span>
    <span class="n">bsort</span> <span class="mi">0</span> <span class="n">xs</span>

<span class="k">let</span> <span class="nv">e</span> <span class="o">=</span> <span class="o">[</span><span class="mi">3</span><span class="o">;</span> <span class="mi">2</span><span class="o">;</span> <span class="mi">1</span><span class="o">]</span>
<span class="k">let</span> <span class="nv">n</span><span class="o">,</span> <span class="n">es</span> <span class="o">=</span> <span class="n">bsortE</span> <span class="n">e</span>
<span class="n">printfn</span> <span class="s">"%A -&gt; %d, %A"</span> <span class="n">e</span> <span class="n">n</span> <span class="n">es</span>
</pre></div></div>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">出力結果</span></div>
<div class="highlight"><pre>
[3; 2; 1] -&gt; 3, [1; 2; 3]
</pre></div>
</div>

<p>回数に応じて符号を変えれば実装は完了です。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">sort</span> <span class="o">(</span><span class="n">t</span><span class="o">:</span><span class="n">term</span><span class="o">)</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">n</span><span class="o">,</span> <span class="n">e</span> <span class="o">=</span> <span class="n">bsortE</span> <span class="n">t</span><span class="o">.</span><span class="n">E</span>
    <span class="k">let</span> <span class="nv">s</span> <span class="o">=</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">term</span><span class="o">(</span><span class="n">s</span> <span class="o">*</span> <span class="n">t</span><span class="o">.</span><span class="n">N</span><span class="o">,</span> <span class="n">t</span><span class="o">.</span><span class="n">A</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span>

<span class="k">let</span> <span class="nv">t</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">fromE</span> <span class="o">[</span><span class="mi">3</span><span class="o">;</span> <span class="mi">2</span><span class="o">;</span> <span class="mi">1</span><span class="o">]</span>
<span class="n">printfn</span> <span class="s">@"%s \to %s"</span> <span class="o">(</span><span class="n">str</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">sort</span> <span class="n">t</span> <span class="o">|&gt;</span> <span class="n">str</span><span class="o">)</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\vec{e_3}∧\vec{e_2}∧\vec{e_1} \to -\vec{e_1}∧\vec{e_2}∧\vec{e_3}
</pre></div></div>

<h2>
<span id="逆元" class="fragment"></span><a href="#%E9%80%86%E5%85%83"><i class="fa fa-link"></i></a>逆元</h2>

<p>変数 $a$ に掛けて $1$ になる変数を $a^{-1}$ と表記して逆元と呼びます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
aa^{-1}=a^{-1}a=1
</pre></div></div>

<p>幾何学積では同じ基底同士を計算すれば $1$ になることから、基底の逆元は自分自身です。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;\vec{e_1}\vec{e_1}=1 \\
&amp;∴ (\vec{e_1})^{-1}=\vec{e_1}
\end{align}
</pre></div></div>

<p>複数の基底が連結されていれば、逆に並べたものが逆元となります。逆元とは交換するため左右どちらから掛けても構いません。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;(\vec{e_3}\vec{e_2}\vec{e_1})(\vec{e_1}\vec{e_2}\vec{e_3})=1 \\
&amp;(\vec{e_1}\vec{e_2}\vec{e_3})(\vec{e_3}\vec{e_2}\vec{e_1})=1 \\
&amp;∴ (\vec{e_1}\vec{e_2}\vec{e_3})^{-1}=\vec{e_3}\vec{e_2}\vec{e_1}
\end{align}
</pre></div></div>

<p>マイナスが付いていれば、逆元にもマイナスを付けることで相殺します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;(-\vec{e_1}\vec{e_2}\vec{e_3})(-\vec{e_3}\vec{e_2}\vec{e_1})=1 \\
&amp;∴ (-\vec{e_1}\vec{e_2}\vec{e_3})^{-1}=-\vec{e_3}\vec{e_2}\vec{e_1}
\end{align}
</pre></div></div>

<h3>
<span id="実装-1" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85-1"><i class="fa fa-link"></i></a>実装</h3>

<p>今回の範囲では係数は符号以外無視できるので、実装は簡単です。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">inv</span> <span class="o">(</span><span class="n">t</span><span class="o">:</span><span class="n">term</span><span class="o">)</span> <span class="o">=</span> <span class="n">term</span><span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="n">N</span><span class="o">,</span> <span class="bp">[]</span><span class="o">,</span> <span class="nn">List</span><span class="p">.</span><span class="n">rev</span> <span class="n">t</span><span class="o">.</span><span class="n">E</span><span class="o">)</span>

<span class="k">let</span> <span class="nv">t</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">fromE</span> <span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="o">]</span>
<span class="n">printfn</span> <span class="s">@"%s \to %s"</span> <span class="o">(</span><span class="n">str</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">inv</span> <span class="n">t</span> <span class="o">|&gt;</span> <span class="n">str</span><span class="o">)</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\vec{e_1}∧\vec{e_2}∧\vec{e_3} \to \vec{e_3}∧\vec{e_2}∧\vec{e_1}
</pre></div></div>

<h2>
<span id="虚数" class="fragment"></span><a href="#%E8%99%9A%E6%95%B0"><i class="fa fa-link"></i></a>虚数</h2>

<p>複数の基底を連結した幾何学積を2乗すれば $-1$ になります。同じ基底を隣接させて消すためソートを行います。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
(\vec{e_1}\vec{e_2})^2&amp;=\vec{e_1}\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_2} \\
&amp;=-\underbrace{\vec{e_1}\vec{e_1}}_{1}\underbrace{\vec{e_2}\vec{e_2}}_{1} \\
&amp;=-1 \\
(\vec{e_1}\vec{e_2}\vec{e_3})^2&amp;=\vec{e_1}\vec{e_2}\underbrace{\vec{e_3}\vec{e_1}}_{-\vec{e_1}\vec{e_3}}\vec{e_2}\vec{e_3} \\
&amp;=-\vec{e_1}\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_3}\vec{e_2}\vec{e_3} \\
&amp;=\underbrace{\vec{e_1}\vec{e_1}}_{1}\vec{e_2}\underbrace{\vec{e_3}\vec{e_2}}_{-\vec{e_2}\vec{e_3}}\vec{e_3} \\
&amp;=-\underbrace{\vec{e_2}\vec{e_2}}_{1}\underbrace{\vec{e_3}\vec{e_3}}_{1} \\
&amp;=-1
\end{align}
</pre></div></div>

<p>※ 隣接させて消すパズルのように捉えるのがコツです。</p>

<p>2乗すれば $-1$ になることから、虚数 $i$ と同一視できます。ただし含まれる基底が異なることから分かるように、2次元と3次元では別々の虚数（四元数の $i,j,k$ のような）のため、ここでは添え字で区別しておきます。</p>

<ul>
<li>2次元 $i_2=\vec{e_1}\vec{e_2}$</li>
<li>3次元 $i_3=\vec{e_1}\vec{e_2}\vec{e_3}$</li>
</ul>

<h3>
<span id="実装-2" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85-2"><i class="fa fa-link"></i></a>実装</h3>

<p>隣接した同じ基底を除去する関数 <code>rmPairE</code> を実装します。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">rec</span> <span class="n">rmPairE</span> <span class="o">=</span> <span class="k">function</span>
<span class="o">|</span> <span class="bp">[]</span> <span class="o">-&gt;</span> <span class="bp">[]</span>
<span class="o">|</span> <span class="n">x</span><span class="o">::</span><span class="n">y</span><span class="o">::</span><span class="n">xs</span> <span class="k">when</span> <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">rmPairE</span> <span class="n">xs</span>
<span class="o">|</span> <span class="n">x</span><span class="o">::</span><span class="n">xs</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">::</span><span class="n">rmPairE</span> <span class="n">xs</span>

<span class="k">let</span> <span class="nv">vecg</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">vec</span> <span class="s">""</span>
<span class="k">let</span> <span class="nv">e</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">;</span> <span class="mi">1</span><span class="o">;</span> <span class="mi">1</span><span class="o">;</span> <span class="mi">2</span><span class="o">;</span> <span class="mi">3</span><span class="o">;</span> <span class="mi">3</span><span class="o">;</span> <span class="mi">4</span><span class="o">]</span>
<span class="n">printfn</span> <span class="s">@"%s \to %s"</span> <span class="o">(</span><span class="n">vecg</span> <span class="n">e</span><span class="o">)</span> <span class="o">(</span><span class="n">rmPairE</span> <span class="n">e</span> <span class="o">|&gt;</span> <span class="n">vecg</span><span class="o">)</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\vec{e_1}\vec{e_1}\vec{e_1}\vec{e_2}\vec{e_3}\vec{e_3}\vec{e_4} \to \vec{e_1}\vec{e_2}\vec{e_4}
</pre></div></div>

<p><code>sort</code> と組み合わせれば2乗が計算できます。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">strg</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">str</span> <span class="n">vecg</span>
<span class="n">printfn</span> <span class="s">@"\begin{align}"</span>
<span class="k">for</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">to</span> <span class="mi">10</span> <span class="k">do</span>
    <span class="k">let</span> <span class="nv">e1</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="n">n</span><span class="o">]</span>
    <span class="k">let</span> <span class="nv">e2</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">append</span> <span class="n">e1</span> <span class="n">e1</span> <span class="o">|&gt;</span> <span class="nn">Term</span><span class="p">.</span><span class="n">fromE</span>
    <span class="k">let</span> <span class="nv">e3</span> <span class="o">=</span> <span class="n">sort</span> <span class="n">e2</span>
    <span class="k">let</span> <span class="nv">e4</span> <span class="o">=</span> <span class="n">term</span><span class="o">(</span><span class="n">e3</span><span class="o">.</span><span class="n">N</span><span class="o">,</span> <span class="n">e3</span><span class="o">.</span><span class="n">A</span><span class="o">,</span> <span class="n">rmPairE</span> <span class="n">e3</span><span class="o">.</span><span class="n">E</span><span class="o">)</span>
    <span class="n">printfn</span> <span class="s">@"i_{%d}^2&amp;=%s \\"</span> <span class="n">n</span> <span class="o">(</span><span class="n">strg</span> <span class="n">e4</span><span class="o">)</span>
<span class="n">printfn</span> <span class="s">@"\end{align}"</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
i_{2}^2&amp;=-1 \\
i_{3}^2&amp;=-1 \\
i_{4}^2&amp;=1 \\
i_{5}^2&amp;=1 \\
i_{6}^2&amp;=-1 \\
i_{7}^2&amp;=-1 \\
i_{8}^2&amp;=1 \\
i_{9}^2&amp;=1 \\
i_{10}^2&amp;=-1 \\
\end{align}
</pre></div></div>

<p>必ずしもすべての次元で $-1$ にならないことが確認できます。</p>

<p>※ 2乗して $-1$ にならない虚数は続編の<a href="http://qiita.com/7shi/items/2036e7a739c2a9e04025">四元数を作ろう</a>で扱います。</p>

<h1>
<span id="ユークリッド空間のホッジ双対" class="fragment"></span><a href="#%E3%83%A6%E3%83%BC%E3%82%AF%E3%83%AA%E3%83%83%E3%83%89%E7%A9%BA%E9%96%93%E3%81%AE%E3%83%9B%E3%83%83%E3%82%B8%E5%8F%8C%E5%AF%BE"><i class="fa fa-link"></i></a>ユークリッド空間のホッジ双対</h1>

<p>以前の記事では3次元に特化して法線でホッジ双対を説明しましたが、ユークリッド空間でのホッジ双対は以下の性質を満たします。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
ξ(\star ξ)=i
</pre></div></div>

<p>※ 後で見ますが、右辺は内積が求まるように定義されています。非ユークリッド空間（相対性理論のミンコフスキー空間など）では右辺 $i$ に計量に応じた係数が付きますが、詳細は省略します。</p>

<p>両辺に逆元 $ξ^{-1}$ を掛ければ、ホッジ双対を求める式が得られます。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\star ξ=ξ^{-1}i
\end{align}
</pre></div></div>

<p>5次元で例を示します。係数は符号以外は変化ないため、基底だけを対象とします。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
ξ&amp;=\vec{e_3}\vec{e_2} \\
\star ξ&amp;=ξ^{-1}i_5 \\
&amp;=\vec{e_2}\underbrace{\vec{e_3}\vec{e_1}}_{-\vec{e_1}\vec{e_3}}\vec{e_2}\vec{e_3}\vec{e_4}\vec{e_5} \\
&amp;=-\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_3}\vec{e_2}\vec{e_3}\vec{e_4}\vec{e_5} \\
&amp;=\vec{e_1}\vec{e_2}\underbrace{\vec{e_3}\vec{e_2}}_{-\vec{e_2}\vec{e_3}}\vec{e_3}\vec{e_4}\vec{e_5} \\
&amp;=-\vec{e_1}\underbrace{\vec{e_2}\vec{e_2}}_{1}\underbrace{\vec{e_3}\vec{e_3}}_{1}\vec{e_4}\vec{e_5} \\
&amp;=-\vec{e_1}\vec{e_4}\vec{e_5}
\end{align}
</pre></div></div>

<p>念のため $ξ(\star ξ)=i$ となるか確認します。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
ξ(\star ξ)=\vec{e_3}\vec{e_2}(-\vec{e_1}\vec{e_4}\vec{e_5})=\vec{e_1}\vec{e_2}\vec{e_3}\vec{e_4}\vec{e_5}=i_5
</pre></div></div>

<h2>
<span id="実装-3" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85-3"><i class="fa fa-link"></i></a>実装</h2>

<p>基底を反転して虚数を掛けてソートしてから隣接した同じ基底を除去します。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">hodge</span> <span class="n">n</span> <span class="o">(</span><span class="n">t</span><span class="o">:</span><span class="n">term</span><span class="o">)</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">e</span> <span class="o">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">append</span> <span class="o">(</span><span class="nn">List</span><span class="p">.</span><span class="n">rev</span> <span class="n">t</span><span class="o">.</span><span class="n">E</span><span class="o">)</span> <span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="n">n</span><span class="o">]</span>
    <span class="k">let</span> <span class="nv">t</span> <span class="o">=</span> <span class="n">term</span><span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="n">N</span><span class="o">,</span> <span class="n">t</span><span class="o">.</span><span class="n">A</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="o">|&gt;</span> <span class="n">sort</span>
    <span class="n">term</span><span class="o">(</span><span class="n">t</span><span class="o">.</span><span class="n">N</span><span class="o">,</span> <span class="n">t</span><span class="o">.</span><span class="n">A</span><span class="o">,</span> <span class="n">rmPairE</span> <span class="n">t</span><span class="o">.</span><span class="n">E</span><span class="o">)</span>
</pre></div></div>

<p>実例を確認するための関数を実装します。基底の組み合わせを列挙しています。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">testHodge</span> <span class="n">n</span> <span class="o">=</span>
    <span class="nn">Math7</span><span class="p">.</span><span class="n">prologue</span> <span class="o">(</span><span class="n">sprintf</span> <span class="s">"## %d次元"</span> <span class="n">n</span><span class="o">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">to</span> <span class="n">n</span> <span class="k">do</span>
        <span class="k">for</span> <span class="n">e</span> <span class="k">in</span> <span class="nn">Math7</span><span class="p">.</span><span class="n">combination</span> <span class="n">n</span> <span class="n">i</span> <span class="k">do</span>
            <span class="k">let</span> <span class="nv">t</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">fromE</span> <span class="n">e</span>
            <span class="n">printfn</span> <span class="s">@"\star(%s)&amp;=%s \\"</span> <span class="o">(</span><span class="n">str</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">hodge</span> <span class="n">n</span> <span class="n">t</span> <span class="o">|&gt;</span> <span class="n">str</span><span class="o">)</span>
    <span class="nn">Math7</span><span class="p">.</span><span class="n">epilogue</span><span class="bp">()</span>
</pre></div></div>

<p>※ <code>combination</code> の詳細は<a href="http://qiita.com/7shi/items/b627930944df6495165e" id="reference-f900035acc11dd1bc463">組み合わせの列挙</a>を参照してください。</p>

<p>以下、この関数を使って実例を確認します。余力があれば $ξ(\star ξ)=i$ が成立しているかどうかを確認すれば面白いかもしれません。</p>

<h2>
<span id="2次元" class="fragment"></span><a href="#2%E6%AC%A1%E5%85%83"><i class="fa fa-link"></i></a>2次元</h2>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="nn">Exterior</span><span class="p">.</span><span class="n">testHodge</span> <span class="mi">2</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\star(1)&amp;=\vec{e_1}∧\vec{e_2} \\
\star(\vec{e_1})&amp;=\vec{e_2} \\
\star(\vec{e_2})&amp;=-\vec{e_1} \\
\star(\vec{e_1}∧\vec{e_2})&amp;=1 \\
\end{align}
</pre></div></div>

<p>ベクトルにホッジスターを複数回適用すると、4回で元に戻ります。よく見ると90°ずつの回転になっています。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\star\vec{e_1}&amp;=\vec{e_2} \\
\star\star\vec{e_1}&amp;=\star\vec{e_2}=-\vec{e_1} \\
\star\star\star\vec{e_1}&amp;=-\star\vec{e_1}=-\vec{e_2} \\
\star\star\star\star\vec{e_1}&amp;=-\star\vec{e_2}=\vec{e_1}
\end{align}
</pre></div></div>

<h2>
<span id="3次元" class="fragment"></span><a href="#3%E6%AC%A1%E5%85%83"><i class="fa fa-link"></i></a>3次元</h2>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="nn">Exterior</span><span class="p">.</span><span class="n">testHodge</span> <span class="mi">3</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\star(1)&amp;=\vec{e_1}∧\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_1})&amp;=\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_2})&amp;=-\vec{e_1}∧\vec{e_3} \\
\star(\vec{e_3})&amp;=\vec{e_1}∧\vec{e_2} \\
\star(\vec{e_1}∧\vec{e_2})&amp;=\vec{e_3} \\
\star(\vec{e_1}∧\vec{e_3})&amp;=-\vec{e_2} \\
\star(\vec{e_2}∧\vec{e_3})&amp;=\vec{e_1} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_3})&amp;=1 \\
\end{align}
</pre></div></div>

<p>ベクトルにホッジスターを複数回適用すると、2回で元に戻ります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\star\vec{e_1}&amp;=\vec{e_2}\vec{e_3} \\
\star\star\vec{e_1}&amp;=\star(\vec{e_2}\vec{e_3})=\vec{e_1}
\end{align}
</pre></div></div>

<h2>
<span id="4次元" class="fragment"></span><a href="#4%E6%AC%A1%E5%85%83"><i class="fa fa-link"></i></a>4次元</h2>

<p>【注意】ここで示すのはユークリッド空間の4次元です。相対性理論で使う4次元はミンコフスキー空間で内積の定義が異なるため、ホッジ双対も異なります。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="nn">Exterior</span><span class="p">.</span><span class="n">testHodge</span> <span class="mi">4</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\star(1)&amp;=\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_1})&amp;=\vec{e_2}∧\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_2})&amp;=-\vec{e_1}∧\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_3})&amp;=\vec{e_1}∧\vec{e_2}∧\vec{e_4} \\
\star(\vec{e_4})&amp;=-\vec{e_1}∧\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_1}∧\vec{e_2})&amp;=\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_1}∧\vec{e_3})&amp;=-\vec{e_2}∧\vec{e_4} \\
\star(\vec{e_1}∧\vec{e_4})&amp;=\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_2}∧\vec{e_3})&amp;=\vec{e_1}∧\vec{e_4} \\
\star(\vec{e_2}∧\vec{e_4})&amp;=-\vec{e_1}∧\vec{e_3} \\
\star(\vec{e_3}∧\vec{e_4})&amp;=\vec{e_1}∧\vec{e_2} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_3})&amp;=\vec{e_4} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_4})&amp;=-\vec{e_3} \\
\star(\vec{e_1}∧\vec{e_3}∧\vec{e_4})&amp;=\vec{e_2} \\
\star(\vec{e_2}∧\vec{e_3}∧\vec{e_4})&amp;=-\vec{e_1} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4})&amp;=1 \\
\end{align}
</pre></div></div>

<p>ベクトルにホッジスターを複数回適用すると、4回で元に戻ります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
\star\vec{e_1}&amp;=\vec{e_2}\vec{e_3}\vec{e_4} \\
\star\star\vec{e_1}&amp;=\star(\vec{e_2}\vec{e_3}\vec{e_4})=-\vec{e_1} \\
\star\star\star\vec{e_1}&amp;=-\star\vec{e_1}=-\vec{e_2}\vec{e_3}\vec{e_4} \\
\star\star\star\star\vec{e_1}&amp;=-\star(\vec{e_2}\vec{e_3}\vec{e_4})=\vec{e_1}
\end{align}
</pre></div></div>

<h1>
<span id="内積" class="fragment"></span><a href="#%E5%86%85%E7%A9%8D"><i class="fa fa-link"></i></a>内積</h1>

<p>ベクトルと、ベクトルのホッジ双対とのウェッジ積は、内積のホッジ双対となります。</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\vec{a}∧\star\vec{b}=\star(\vec{a}\cdot\vec{b})
</pre></div></div>

<p>$ξ(\star ξ)=i$ をベクトルに拡張した形です。ベクトルが複数の基底の和で構成されていれば、その幾何学積には外積まで含まれます。それを消すため幾何学積ではなくウェッジ積を使います。ホッジ双対の絡まないウェッジ積では内積の方が消えますが、それと逆の結果になっています。後の計算例を見て確認してください。</p>

<p>※ ホッジ双対の性質を示すことが狙いのため、幾何学積の定数項として得られる内積との使い分けは追求しません。</p>

<h2>
<span id="擬スカラー" class="fragment"></span><a href="#%E6%93%AC%E3%82%B9%E3%82%AB%E3%83%A9%E3%83%BC"><i class="fa fa-link"></i></a>擬スカラー</h2>

<p>ベクトルのホッジ双対を擬ベクトルと呼んだように、スカラーのホッジ双対を<strong>擬スカラー</strong>と呼びます。</p>

<p>$\vec{a}∧\star\vec{b}=\star(\vec{a}\cdot\vec{b})$ の右辺が見た目で擬スカラーと分かりますし、イコールなので左辺も擬スカラーとなります。</p>

<h2>
<span id="実装-4" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85-4"><i class="fa fa-link"></i></a>実装</h2>

<p>ホッジ双対による内積の計算過程を生成する関数を実装します。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="k">let</span> <span class="nv">showProd</span> <span class="n">title</span> <span class="n">n</span> <span class="o">=</span>
    <span class="nn">Math7</span><span class="p">.</span><span class="n">prologue</span> <span class="n">title</span>
    <span class="n">printfn</span> <span class="s">@"&amp;\vec{a}∧\star\vec{b} \\"</span>
    <span class="k">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="o">[</span><span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="n">n</span><span class="o">]</span> <span class="o">-&gt;</span> <span class="n">term</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="o">[</span><span class="n">sprintf</span> <span class="s">"a_%d"</span> <span class="n">i</span><span class="o">],</span> <span class="o">[</span><span class="n">i</span><span class="o">])]</span>
    <span class="k">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="o">[</span><span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="o">[</span><span class="mi">1</span><span class="o">..</span><span class="n">n</span><span class="o">]</span> <span class="o">-&gt;</span> <span class="n">term</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="o">[</span><span class="n">sprintf</span> <span class="s">"b_%d"</span> <span class="n">i</span><span class="o">],</span> <span class="o">[</span><span class="n">i</span><span class="o">])]</span>
    <span class="k">let</span> <span class="nv">sa</span><span class="o">,</span> <span class="n">sb</span> <span class="o">=</span> <span class="n">strs</span> <span class="n">a</span> <span class="o">|&gt;</span> <span class="nn">Term</span><span class="p">.</span><span class="n">bracket</span><span class="o">,</span> <span class="n">strs</span> <span class="n">b</span> <span class="o">|&gt;</span> <span class="nn">Term</span><span class="p">.</span><span class="n">bracket</span>
    <span class="n">printfn</span> <span class="s">@"&amp;=%s∧\star%s \\"</span> <span class="n">sa</span> <span class="n">sb</span>
    <span class="k">let</span> <span class="nv">al</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">splits</span> <span class="n">a</span>
    <span class="k">let</span> <span class="nv">bl</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">splits</span> <span class="n">b</span> <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">map</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">hodge</span> <span class="n">n</span> <span class="n">e</span><span class="o">))</span>
    <span class="n">printfn</span> <span class="s">@"&amp;=%s∧%s \\"</span> <span class="n">sa</span> <span class="o">(</span><span class="nn">Term</span><span class="p">.</span><span class="n">strs2</span> <span class="n">vec</span> <span class="n">bl</span> <span class="o">|&gt;</span> <span class="nn">Term</span><span class="p">.</span><span class="n">bracket</span><span class="o">)</span>
    <span class="nn">Term</span><span class="p">.</span><span class="n">showProd1</span> <span class="n">op</span> <span class="n">vec</span> <span class="n">al</span> <span class="n">bl</span>
    <span class="k">let</span> <span class="nv">d</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">showProd2</span> <span class="n">op</span> <span class="n">vec</span> <span class="o">(</span><span class="nn">Term</span><span class="p">.</span><span class="n">fromE</span> <span class="o">&gt;&gt;</span> <span class="n">simplify</span><span class="o">)</span> <span class="n">al</span> <span class="n">bl</span>
         <span class="o">|&gt;</span> <span class="nn">Term</span><span class="p">.</span><span class="n">simplify</span>
         <span class="o">|&gt;</span> <span class="nn">Term</span><span class="p">.</span><span class="n">sort</span> <span class="n">id</span> <span class="nn">Term</span><span class="p">.</span><span class="n">byIndexSign</span>
    <span class="k">let</span> <span class="nv">sp4</span> <span class="o">=</span> <span class="nn">Term</span><span class="p">.</span><span class="n">showProd3</span> <span class="n">vec</span> <span class="o">((=)</span> <span class="mi">1</span><span class="o">)</span>
    <span class="n">sp4</span> <span class="n">d</span>
    <span class="n">d</span>
    <span class="o">|&gt;</span> <span class="nn">List</span><span class="p">.</span><span class="n">map</span> <span class="o">(</span><span class="k">fun</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">al</span><span class="o">)</span> <span class="o">-&gt;</span>
        <span class="k">let</span> <span class="nv">h</span> <span class="o">=</span> <span class="n">hodge</span> <span class="n">n</span> <span class="n">e</span>
        <span class="n">term</span><span class="o">(</span><span class="n">h</span><span class="o">.</span><span class="n">N</span><span class="o">,</span> <span class="s">@"\star"</span><span class="o">::</span><span class="n">h</span><span class="o">.</span><span class="n">A</span><span class="o">,</span> <span class="n">h</span><span class="o">.</span><span class="n">E</span><span class="o">),</span> <span class="n">al</span><span class="o">)</span>
    <span class="o">|&gt;</span> <span class="n">sp4</span>
    <span class="n">printfn</span> <span class="s">@"&amp;=\star(\vec{a}\cdot\vec{b})"</span>
    <span class="nn">Math7</span><span class="p">.</span><span class="n">epilogue</span><span class="bp">()</span>
</pre></div></div>

<p>以下、この関数を使って実例を確認します。</p>

<h2>
<span id="2次元-1" class="fragment"></span><a href="#2%E6%AC%A1%E5%85%83-1"><i class="fa fa-link"></i></a>2次元</h2>

<p>ホッジ双対は内積が求まるように定義されています。その条件が $ξ(\star ξ)=i$ です。それが分かりやすいように、敢えて $\star ξ$ の符号を分離せずに内積を計算しています。</p>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="nn">Exterior</span><span class="p">.</span><span class="n">showProd</span> <span class="s">"## 2次元"</span> <span class="mi">2</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;\vec{a}∧\star\vec{b} \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2})∧\star(b_1\vec{e_1}+b_2\vec{e_2}) \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2})∧\{b_1\vec{e_2}+b_2(-\vec{e_1})\} \\
&amp;=a_1\vec{e_1}∧\{b_1\vec{e_2}+b_2(-\vec{e_1})\} \\
&amp;\quad +a_2\vec{e_2}∧\{b_1\vec{e_2}+b_2(-\vec{e_1})\} \\
&amp;=a_1b_1\vec{e_1}∧\vec{e_2}+a_1b_2\underbrace{\vec{e_1}∧(-\vec{e_1})}_{0} \\
&amp;\quad +a_2b_1\underbrace{\vec{e_2}∧\vec{e_2}}_{0}+a_2b_2\underbrace{\vec{e_2}∧(-\vec{e_1})}_{\vec{e_1}∧\vec{e_2}} \\
&amp;=(a_1b_1+a_2b_2)\vec{e_1}∧\vec{e_2} \\
&amp;=\star(a_1b_1+a_2b_2) \\
&amp;=\star(\vec{a}\cdot\vec{b})
\end{align}
</pre></div></div>

<p>ホッジ双対同士の $ξ(\star ξ)$ 以外の組み合わせは同じ基底が含まれるため消えてしまいます。結局 $ξ(\star ξ)=i$ となる基底だけが残り、その係数を足したものが内積になります。</p>

<h2>
<span id="3次元-1" class="fragment"></span><a href="#3%E6%AC%A1%E5%85%83-1"><i class="fa fa-link"></i></a>3次元</h2>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="nn">Exterior</span><span class="p">.</span><span class="n">showProd</span> <span class="s">"## 3次元"</span> <span class="mi">3</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;\vec{a}∧\star\vec{b} \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3})∧\star(b_1\vec{e_1}+b_2\vec{e_2}+b_3\vec{e_3}) \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3})∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;=a_1\vec{e_1}∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;\quad +a_2\vec{e_2}∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;\quad +a_3\vec{e_3}∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;=a_1b_1\vec{e_1}∧\vec{e_2}∧\vec{e_3}+a_1b_2\underbrace{\vec{e_1}∧(-\vec{e_1}∧\vec{e_3})}_{0}+a_1b_3\underbrace{\vec{e_1}∧\vec{e_1}∧\vec{e_2}}_{0} \\
&amp;\quad +a_2b_1\underbrace{\vec{e_2}∧\vec{e_2}∧\vec{e_3}}_{0}+a_2b_2\underbrace{\vec{e_2}∧(-\vec{e_1}∧\vec{e_3})}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}}+a_2b_3\underbrace{\vec{e_2}∧\vec{e_1}∧\vec{e_2}}_{0} \\
&amp;\quad +a_3b_1\underbrace{\vec{e_3}∧\vec{e_2}∧\vec{e_3}}_{0}+a_3b_2\underbrace{\vec{e_3}∧(-\vec{e_1}∧\vec{e_3})}_{0}+a_3b_3\underbrace{\vec{e_3}∧\vec{e_1}∧\vec{e_2}}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}} \\
&amp;=(a_1b_1+a_2b_2+a_3b_3)\vec{e_1}∧\vec{e_2}∧\vec{e_3} \\
&amp;=\star(a_1b_1+a_2b_2+a_3b_3) \\
&amp;=\star(\vec{a}\cdot\vec{b})
\end{align}
</pre></div></div>

<h2>
<span id="4次元-1" class="fragment"></span><a href="#4%E6%AC%A1%E5%85%83-1"><i class="fa fa-link"></i></a>4次元</h2>

<div class="code-frame" data-lang="fsharp"><div class="highlight"><pre>
<span class="nn">Exterior</span><span class="p">.</span><span class="n">showProd</span> <span class="s">"## 4次元"</span> <span class="mi">4</span>
</pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre>
\begin{align}
&amp;\vec{a}∧\star\vec{b} \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3}+a_4\vec{e_4})∧\star(b_1\vec{e_1}+b_2\vec{e_2}+b_3\vec{e_3}+b_4\vec{e_4}) \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3}+a_4\vec{e_4})∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;=a_1\vec{e_1}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;\quad +a_2\vec{e_2}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;\quad +a_3\vec{e_3}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;\quad +a_4\vec{e_4}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;=a_1b_1\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}+a_1b_2\underbrace{\vec{e_1}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{0}+a_1b_3\underbrace{\vec{e_1}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{0}+a_1b_4\underbrace{\vec{e_1}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{0} \\
&amp;\quad +a_2b_1\underbrace{\vec{e_2}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}_{0}+a_2b_2\underbrace{\vec{e_2}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}+a_2b_3\underbrace{\vec{e_2}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{0}+a_2b_4\underbrace{\vec{e_2}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{0} \\
&amp;\quad +a_3b_1\underbrace{\vec{e_3}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}_{0}+a_3b_2\underbrace{\vec{e_3}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{0}+a_3b_3\underbrace{\vec{e_3}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}+a_3b_4\underbrace{\vec{e_3}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{0} \\
&amp;\quad +a_4b_1\underbrace{\vec{e_4}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}_{0}+a_4b_2\underbrace{\vec{e_4}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{0}+a_4b_3\underbrace{\vec{e_4}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{0}+a_4b_4\underbrace{\vec{e_4}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}} \\
&amp;=(a_1b_1+a_2b_2+a_3b_3+a_4b_4)\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4} \\
&amp;=\star(a_1b_1+a_2b_2+a_3b_3+a_4b_4) \\
&amp;=\star(\vec{a}\cdot\vec{b})
\end{align}
</pre></div></div>

<p>手計算ではやる気にならないような計算ですが、プログラムではパラメータを変えるだけで生成されるのが面白い所です。</p>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<ul>
<li><a href="https://ja.wikipedia.org/wiki/%E3%83%9B%E3%83%83%E3%82%B8%E5%8F%8C%E5%AF%BE" rel="nofollow noopener" target="_blank">ホッジ双対 - Wikipedia</a></li>
</ul>
<div class="hidden"><form class="js-task-list-update" action="/7shi/items/f54302058149d07da592" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="QNECthPxvTkMOw8Pfiwg4zWesbb6uy/Wf+N7+iLg2+suU5nuiN+EcvPouhMO2Z66VdmVBW1/dSFDPXIBw+7VLQ==" /><input type="hidden" name="updated_at_confirmation_in_unixtime" id="updated_at_confirmation_in_unixtime" value="1483469563" class="js-task-list-updated-at" /><textarea name="raw_body" id="raw_body" class="js-task-list-field">
幾何学積によるバブルソートを応用したホッジ双対の作り方と、内積との関係を紹介します。幾何学積・ウェッジ積やホッジ双対の基本的な扱い方に慣れるのが目的のため、説明をユークリッド空間に限定します。説明した事項をF#で実装しながら、最後にホッジ双対による4次元の内積を求めます。

シリーズの記事です。

1. [多項式の積を計算](http://qiita.com/7shi/items/4fb60dacad46cb8e63b3)
1. [外積と愉快な仲間たち](http://qiita.com/7shi/items/017d2d2c758f76071f23)
1. ユークリッド空間のホッジ双対とバブルソート ← この記事
1. [四元数を作ろう](http://qiita.com/7shi/items/2036e7a739c2a9e04025)
1. [四元数と行列で見る内積と外積の「内」と「外」](http://qiita.com/7shi/items/a80988a32a0d706e9378)
1. [八元数を作ろう](http://qiita.com/7shi/items/b34fe724d36fb7d96456)
1. [八元数の積をプログラムで確認](http://qiita.com/7shi/items/8495b2d6b888e7b8703f)
1. [外積の成分をプログラムで確認](http://qiita.com/7shi/items/02c758c03d2fd7038912)
1. [多元数の積の構成](http://qiita.com/7shi/items/88be5203769e629df243)

関連するコードをまとめたリポジトリです。

* https://bitbucket.org/7shi/math7

この記事を読んでクリフォード代数に興味を持った方には、次の記事がお勧めです。

* 【PDF】[クリフォード代数](http://members3.jcom.home.ne.jp/nososnd/field/cliff.pdf)
* 【英語】[Introduction to Clifford Algebra](https://www.av8n.com/physics/clifford-intro.htm)

# 互換

隣接した因子を交換することを**互換**と呼びます。「互いに入れ換える」というニュアンスです。今回考える互換は等価性を保持するため、その意味で「互換性」と通じる点があります。

※ 後で見るように偶奇性だけが問題となります。互換に隣接の制限を掛けない場合もありますが、偶奇性は保持されるため結果は同じです。

普通の掛け算の例です。

```math
a\underbrace{bc}_{互換}d=acbd
```

3因子以上の互換は結合法則を前提とします。ベクトル積は結合法則を満たさないため、互換の対象からは除外します。

ウェッジ積や幾何学積では、互換の際に符号が反転します。

```math
\begin{align}
\vec{a}∧\underbrace{\vec{b}∧\vec{c}}_{-\vec{c}∧\vec{b}}∧\vec{d}&amp;=-\vec{a}∧\vec{c}∧\vec{b}∧\vec{d} \\
\vec{a}\underbrace{\vec{b}\vec{c}}_{-\vec{c}\vec{b}}\vec{d}&amp;=-\vec{a}\vec{c}\vec{b}\vec{d}
\end{align}
```

## ゼロ

ウェッジ積の連結の中で同じ基底が表れたものはゼロになります。

```math
\underbrace{\vec{e_1}∧\vec{e_1}}_{0}∧\vec{e_2}=0
```

位置が離れていても互換を繰り返せば、横隣りになってゼロになります。

```math
\begin{align}
\vec{e_1}∧\underbrace{\vec{e_3}∧\vec{e_1}}_{-\vec{e_1}∧\vec{e_3}}&amp;=-\underbrace{\vec{e_1}∧\vec{e_1}}_{0}∧\vec{e_3}=0
\end{align}
```

ウェッジ積では、同じ基底が含まれていれば互換を飛ばして即ゼロになると考えても問題ありません。しかし幾何学積や四元数のように同じ基底同士の積がゼロにならないものでは、きちんと互換を追う必要があります。

```math
\begin{align}
\vec{e_1}\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_2}&amp;=-\underbrace{\vec{e_1}\vec{e_1}}_{1}\underbrace{\vec{e_2}\vec{e_2}}_{1}=-1 \\
i\underbrace{ji}_{-ij}j&amp;=-\underbrace{ii}_{-1}\underbrace{jj}_{-1}=-1
\end{align}
```

# 幾何学積

幾何学積を使えばホッジ双対が簡単に導出できます。そのために必要な幾何学積の性質について説明します。

## ソート

互換により基底をソートできます。互換の回数に応じて符号が決まります。

```math
\vec{e_2}\underbrace{\vec{e_3}\vec{e_1}}_{-\vec{e_1}\vec{e_3}}=-\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_3}=\vec{e_1}\vec{e_2}\vec{e_3}
```

符号を除けばバブルソートと同じです。詳細は次の記事の前半を参照してください。

* [Haskellでバブルソート](http://qiita.com/7shi/items/1e2a66bf8e8c7f0bd70f) 2014.09.18

※ 後半のHaskellでの実装は飛ばしても構いません。

手計算の場合、ソートの過程で同じ基底が隣接すれば、その場で $1$ にした方が簡単でしょう。

### 実装

[Math7.Exterior.fsx](https://bitbucket.org/7shi/math7/src/tip/Math7.Exterior.fsx) から引用します。[Math7.fsx](https://bitbucket.org/7shi/math7/src/tip/Math7.fsx) と [Math7.Term.fsx](https://bitbucket.org/7shi/math7/src/tip/Math7.Term.fsx) に依存しています。全体は[リポジトリ](https://bitbucket.org/7shi/math7)を参照してください。

バブルソートをF#で実装します。符号を決めるため互換の回数を数えます。

```fsharp
let bsortE xs =
    let rec bswap n = function
        | []    -&gt; n, []
        | x::xs -&gt;
            match bswap n xs with
            | n, [] -&gt; n, [x]
            | n, y::ys when x &gt; y -&gt; n + 1, y::x::ys
            | n, y::ys            -&gt; n    , x::y::ys
    let rec bsort n xs =
        match bswap n xs with
        | n, []    -&gt; n, []
        | n, y::ys -&gt; let n, ys = bsort n ys
                      n, y::ys
    bsort 0 xs

let e = [3; 2; 1]
let n, es = bsortE e
printfn &quot;%A -&gt; %d, %A&quot; e n es
```
```text:出力結果
[3; 2; 1] -&gt; 3, [1; 2; 3]
```

回数に応じて符号を変えれば実装は完了です。

```fsharp
let sort (t:term) =
    let n, e = bsortE t.E
    let s = if n % 2 = 0 then 1 else -1
    term(s * t.N, t.A, e)

let t = Term.fromE [3; 2; 1]
printfn @&quot;%s \to %s&quot; (str t) (sort t |&gt; str)
```
```math
\vec{e_3}∧\vec{e_2}∧\vec{e_1} \to -\vec{e_1}∧\vec{e_2}∧\vec{e_3}
```

## 逆元

変数 $a$ に掛けて $1$ になる変数を $a^{-1}$ と表記して逆元と呼びます。

```math
aa^{-1}=a^{-1}a=1
```

幾何学積では同じ基底同士を計算すれば $1$ になることから、基底の逆元は自分自身です。

```math
\begin{align}
&amp;\vec{e_1}\vec{e_1}=1 \\
&amp;∴ (\vec{e_1})^{-1}=\vec{e_1}
\end{align}
```

複数の基底が連結されていれば、逆に並べたものが逆元となります。逆元とは交換するため左右どちらから掛けても構いません。

```math
\begin{align}
&amp;(\vec{e_3}\vec{e_2}\vec{e_1})(\vec{e_1}\vec{e_2}\vec{e_3})=1 \\
&amp;(\vec{e_1}\vec{e_2}\vec{e_3})(\vec{e_3}\vec{e_2}\vec{e_1})=1 \\
&amp;∴ (\vec{e_1}\vec{e_2}\vec{e_3})^{-1}=\vec{e_3}\vec{e_2}\vec{e_1}
\end{align}
```

マイナスが付いていれば、逆元にもマイナスを付けることで相殺します。

```math
\begin{align}
&amp;(-\vec{e_1}\vec{e_2}\vec{e_3})(-\vec{e_3}\vec{e_2}\vec{e_1})=1 \\
&amp;∴ (-\vec{e_1}\vec{e_2}\vec{e_3})^{-1}=-\vec{e_3}\vec{e_2}\vec{e_1}
\end{align}
```

### 実装

今回の範囲では係数は符号以外無視できるので、実装は簡単です。

```fsharp
let inv (t:term) = term(t.N, [], List.rev t.E)

let t = Term.fromE [1..3]
printfn @&quot;%s \to %s&quot; (str t) (inv t |&gt; str)
```
```math
\vec{e_1}∧\vec{e_2}∧\vec{e_3} \to \vec{e_3}∧\vec{e_2}∧\vec{e_1}
```

## 虚数

複数の基底を連結した幾何学積を2乗すれば $-1$ になります。同じ基底を隣接させて消すためソートを行います。

```math
\begin{align}
(\vec{e_1}\vec{e_2})^2&amp;=\vec{e_1}\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_2} \\
&amp;=-\underbrace{\vec{e_1}\vec{e_1}}_{1}\underbrace{\vec{e_2}\vec{e_2}}_{1} \\
&amp;=-1 \\
(\vec{e_1}\vec{e_2}\vec{e_3})^2&amp;=\vec{e_1}\vec{e_2}\underbrace{\vec{e_3}\vec{e_1}}_{-\vec{e_1}\vec{e_3}}\vec{e_2}\vec{e_3} \\
&amp;=-\vec{e_1}\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_3}\vec{e_2}\vec{e_3} \\
&amp;=\underbrace{\vec{e_1}\vec{e_1}}_{1}\vec{e_2}\underbrace{\vec{e_3}\vec{e_2}}_{-\vec{e_2}\vec{e_3}}\vec{e_3} \\
&amp;=-\underbrace{\vec{e_2}\vec{e_2}}_{1}\underbrace{\vec{e_3}\vec{e_3}}_{1} \\
&amp;=-1
\end{align}
```

※ 隣接させて消すパズルのように捉えるのがコツです。

2乗すれば $-1$ になることから、虚数 $i$ と同一視できます。ただし含まれる基底が異なることから分かるように、2次元と3次元では別々の虚数（四元数の $i,j,k$ のような）のため、ここでは添え字で区別しておきます。

* 2次元 $i_2=\vec{e_1}\vec{e_2}$
* 3次元 $i_3=\vec{e_1}\vec{e_2}\vec{e_3}$

### 実装

隣接した同じ基底を除去する関数 `rmPairE` を実装します。

```fsharp
let rec rmPairE = function
| [] -&gt; []
| x::y::xs when x = y -&gt; rmPairE xs
| x::xs -&gt; x::rmPairE xs

let vecg = Term.vec &quot;&quot;
let e = [1; 1; 1; 2; 3; 3; 4]
printfn @&quot;%s \to %s&quot; (vecg e) (rmPairE e |&gt; vecg)
```
```math
\vec{e_1}\vec{e_1}\vec{e_1}\vec{e_2}\vec{e_3}\vec{e_3}\vec{e_4} \to \vec{e_1}\vec{e_2}\vec{e_4}
```

`sort` と組み合わせれば2乗が計算できます。

```fsharp
let strg = Term.str vecg
printfn @&quot;\begin{align}&quot;
for n = 2 to 10 do
    let e1 = [1..n]
    let e2 = List.append e1 e1 |&gt; Term.fromE
    let e3 = sort e2
    let e4 = term(e3.N, e3.A, rmPairE e3.E)
    printfn @&quot;i_{%d}^2&amp;=%s \\&quot; n (strg e4)
printfn @&quot;\end{align}&quot;
```
```math
\begin{align}
i_{2}^2&amp;=-1 \\
i_{3}^2&amp;=-1 \\
i_{4}^2&amp;=1 \\
i_{5}^2&amp;=1 \\
i_{6}^2&amp;=-1 \\
i_{7}^2&amp;=-1 \\
i_{8}^2&amp;=1 \\
i_{9}^2&amp;=1 \\
i_{10}^2&amp;=-1 \\
\end{align}
```

必ずしもすべての次元で $-1$ にならないことが確認できます。

※ 2乗して $-1$ にならない虚数は続編の[四元数を作ろう](http://qiita.com/7shi/items/2036e7a739c2a9e04025)で扱います。

# ユークリッド空間のホッジ双対

以前の記事では3次元に特化して法線でホッジ双対を説明しましたが、ユークリッド空間でのホッジ双対は以下の性質を満たします。

```math
ξ(\star ξ)=i
```

※ 後で見ますが、右辺は内積が求まるように定義されています。非ユークリッド空間（相対性理論のミンコフスキー空間など）では右辺 $i$ に計量に応じた係数が付きますが、詳細は省略します。

両辺に逆元 $ξ^{-1}$ を掛ければ、ホッジ双対を求める式が得られます。

```math
\begin{align}
\star ξ=ξ^{-1}i
\end{align}
```

5次元で例を示します。係数は符号以外は変化ないため、基底だけを対象とします。

```math
\begin{align}
ξ&amp;=\vec{e_3}\vec{e_2} \\
\star ξ&amp;=ξ^{-1}i_5 \\
&amp;=\vec{e_2}\underbrace{\vec{e_3}\vec{e_1}}_{-\vec{e_1}\vec{e_3}}\vec{e_2}\vec{e_3}\vec{e_4}\vec{e_5} \\
&amp;=-\underbrace{\vec{e_2}\vec{e_1}}_{-\vec{e_1}\vec{e_2}}\vec{e_3}\vec{e_2}\vec{e_3}\vec{e_4}\vec{e_5} \\
&amp;=\vec{e_1}\vec{e_2}\underbrace{\vec{e_3}\vec{e_2}}_{-\vec{e_2}\vec{e_3}}\vec{e_3}\vec{e_4}\vec{e_5} \\
&amp;=-\vec{e_1}\underbrace{\vec{e_2}\vec{e_2}}_{1}\underbrace{\vec{e_3}\vec{e_3}}_{1}\vec{e_4}\vec{e_5} \\
&amp;=-\vec{e_1}\vec{e_4}\vec{e_5}
\end{align}
```

念のため $ξ(\star ξ)=i$ となるか確認します。

```math
ξ(\star ξ)=\vec{e_3}\vec{e_2}(-\vec{e_1}\vec{e_4}\vec{e_5})=\vec{e_1}\vec{e_2}\vec{e_3}\vec{e_4}\vec{e_5}=i_5
```

## 実装

基底を反転して虚数を掛けてソートしてから隣接した同じ基底を除去します。

```fsharp
let hodge n (t:term) =
    let e = List.append (List.rev t.E) [1..n]
    let t = term(t.N, t.A, e) |&gt; sort
    term(t.N, t.A, rmPairE t.E)
```

実例を確認するための関数を実装します。基底の組み合わせを列挙しています。

```fsharp
let testHodge n =
    Math7.prologue (sprintf &quot;## %d次元&quot; n)
    for i = 0 to n do
        for e in Math7.combination n i do
            let t = Term.fromE e
            printfn @&quot;\star(%s)&amp;=%s \\&quot; (str t) (hodge n t |&gt; str)
    Math7.epilogue()
```

※ `combination` の詳細は[組み合わせの列挙](http://qiita.com/7shi/items/b627930944df6495165e)を参照してください。

以下、この関数を使って実例を確認します。余力があれば $ξ(\star ξ)=i$ が成立しているかどうかを確認すれば面白いかもしれません。

## 2次元

```fsharp
Exterior.testHodge 2
```
```math
\begin{align}
\star(1)&amp;=\vec{e_1}∧\vec{e_2} \\
\star(\vec{e_1})&amp;=\vec{e_2} \\
\star(\vec{e_2})&amp;=-\vec{e_1} \\
\star(\vec{e_1}∧\vec{e_2})&amp;=1 \\
\end{align}
```

ベクトルにホッジスターを複数回適用すると、4回で元に戻ります。よく見ると90°ずつの回転になっています。

```math
\begin{align}
\star\vec{e_1}&amp;=\vec{e_2} \\
\star\star\vec{e_1}&amp;=\star\vec{e_2}=-\vec{e_1} \\
\star\star\star\vec{e_1}&amp;=-\star\vec{e_1}=-\vec{e_2} \\
\star\star\star\star\vec{e_1}&amp;=-\star\vec{e_2}=\vec{e_1}
\end{align}
```

## 3次元

```fsharp
Exterior.testHodge 3
```
```math
\begin{align}
\star(1)&amp;=\vec{e_1}∧\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_1})&amp;=\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_2})&amp;=-\vec{e_1}∧\vec{e_3} \\
\star(\vec{e_3})&amp;=\vec{e_1}∧\vec{e_2} \\
\star(\vec{e_1}∧\vec{e_2})&amp;=\vec{e_3} \\
\star(\vec{e_1}∧\vec{e_3})&amp;=-\vec{e_2} \\
\star(\vec{e_2}∧\vec{e_3})&amp;=\vec{e_1} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_3})&amp;=1 \\
\end{align}
```

ベクトルにホッジスターを複数回適用すると、2回で元に戻ります。

```math
\begin{align}
\star\vec{e_1}&amp;=\vec{e_2}\vec{e_3} \\
\star\star\vec{e_1}&amp;=\star(\vec{e_2}\vec{e_3})=\vec{e_1}
\end{align}
```

## 4次元

【注意】ここで示すのはユークリッド空間の4次元です。相対性理論で使う4次元はミンコフスキー空間で内積の定義が異なるため、ホッジ双対も異なります。

```fsharp
Exterior.testHodge 4
```
```math
\begin{align}
\star(1)&amp;=\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_1})&amp;=\vec{e_2}∧\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_2})&amp;=-\vec{e_1}∧\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_3})&amp;=\vec{e_1}∧\vec{e_2}∧\vec{e_4} \\
\star(\vec{e_4})&amp;=-\vec{e_1}∧\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_1}∧\vec{e_2})&amp;=\vec{e_3}∧\vec{e_4} \\
\star(\vec{e_1}∧\vec{e_3})&amp;=-\vec{e_2}∧\vec{e_4} \\
\star(\vec{e_1}∧\vec{e_4})&amp;=\vec{e_2}∧\vec{e_3} \\
\star(\vec{e_2}∧\vec{e_3})&amp;=\vec{e_1}∧\vec{e_4} \\
\star(\vec{e_2}∧\vec{e_4})&amp;=-\vec{e_1}∧\vec{e_3} \\
\star(\vec{e_3}∧\vec{e_4})&amp;=\vec{e_1}∧\vec{e_2} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_3})&amp;=\vec{e_4} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_4})&amp;=-\vec{e_3} \\
\star(\vec{e_1}∧\vec{e_3}∧\vec{e_4})&amp;=\vec{e_2} \\
\star(\vec{e_2}∧\vec{e_3}∧\vec{e_4})&amp;=-\vec{e_1} \\
\star(\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4})&amp;=1 \\
\end{align}
```

ベクトルにホッジスターを複数回適用すると、4回で元に戻ります。

```math
\begin{align}
\star\vec{e_1}&amp;=\vec{e_2}\vec{e_3}\vec{e_4} \\
\star\star\vec{e_1}&amp;=\star(\vec{e_2}\vec{e_3}\vec{e_4})=-\vec{e_1} \\
\star\star\star\vec{e_1}&amp;=-\star\vec{e_1}=-\vec{e_2}\vec{e_3}\vec{e_4} \\
\star\star\star\star\vec{e_1}&amp;=-\star(\vec{e_2}\vec{e_3}\vec{e_4})=\vec{e_1}
\end{align}
```

# 内積

ベクトルと、ベクトルのホッジ双対とのウェッジ積は、内積のホッジ双対となります。

```math
\vec{a}∧\star\vec{b}=\star(\vec{a}\cdot\vec{b})
```

$ξ(\star ξ)=i$ をベクトルに拡張した形です。ベクトルが複数の基底の和で構成されていれば、その幾何学積には外積まで含まれます。それを消すため幾何学積ではなくウェッジ積を使います。ホッジ双対の絡まないウェッジ積では内積の方が消えますが、それと逆の結果になっています。後の計算例を見て確認してください。

※ ホッジ双対の性質を示すことが狙いのため、幾何学積の定数項として得られる内積との使い分けは追求しません。

## 擬スカラー

ベクトルのホッジ双対を擬ベクトルと呼んだように、スカラーのホッジ双対を**擬スカラー**と呼びます。

$\vec{a}∧\star\vec{b}=\star(\vec{a}\cdot\vec{b})$ の右辺が見た目で擬スカラーと分かりますし、イコールなので左辺も擬スカラーとなります。

## 実装

ホッジ双対による内積の計算過程を生成する関数を実装します。

```fsharp
let showProd title n =
    Math7.prologue title
    printfn @&quot;&amp;\vec{a}∧\star\vec{b} \\&quot;
    let a = [for i in [1..n] -&gt; term(1, [sprintf &quot;a_%d&quot; i], [i])]
    let b = [for i in [1..n] -&gt; term(1, [sprintf &quot;b_%d&quot; i], [i])]
    let sa, sb = strs a |&gt; Term.bracket, strs b |&gt; Term.bracket
    printfn @&quot;&amp;=%s∧\star%s \\&quot; sa sb
    let al = Term.splits a
    let bl = Term.splits b |&gt; List.map (fun (a, e) -&gt; (a, hodge n e))
    printfn @&quot;&amp;=%s∧%s \\&quot; sa (Term.strs2 vec bl |&gt; Term.bracket)
    Term.showProd1 op vec al bl
    let d = Term.showProd2 op vec (Term.fromE &gt;&gt; simplify) al bl
         |&gt; Term.simplify
         |&gt; Term.sort id Term.byIndexSign
    let sp4 = Term.showProd3 vec ((=) 1)
    sp4 d
    d
    |&gt; List.map (fun (e, al) -&gt;
        let h = hodge n e
        term(h.N, @&quot;\star&quot;::h.A, h.E), al)
    |&gt; sp4
    printfn @&quot;&amp;=\star(\vec{a}\cdot\vec{b})&quot;
    Math7.epilogue()
```

以下、この関数を使って実例を確認します。

## 2次元

ホッジ双対は内積が求まるように定義されています。その条件が $ξ(\star ξ)=i$ です。それが分かりやすいように、敢えて $\star ξ$ の符号を分離せずに内積を計算しています。

```fsharp
Exterior.showProd &quot;## 2次元&quot; 2
```
```math
\begin{align}
&amp;\vec{a}∧\star\vec{b} \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2})∧\star(b_1\vec{e_1}+b_2\vec{e_2}) \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2})∧\{b_1\vec{e_2}+b_2(-\vec{e_1})\} \\
&amp;=a_1\vec{e_1}∧\{b_1\vec{e_2}+b_2(-\vec{e_1})\} \\
&amp;\quad +a_2\vec{e_2}∧\{b_1\vec{e_2}+b_2(-\vec{e_1})\} \\
&amp;=a_1b_1\vec{e_1}∧\vec{e_2}+a_1b_2\underbrace{\vec{e_1}∧(-\vec{e_1})}_{0} \\
&amp;\quad +a_2b_1\underbrace{\vec{e_2}∧\vec{e_2}}_{0}+a_2b_2\underbrace{\vec{e_2}∧(-\vec{e_1})}_{\vec{e_1}∧\vec{e_2}} \\
&amp;=(a_1b_1+a_2b_2)\vec{e_1}∧\vec{e_2} \\
&amp;=\star(a_1b_1+a_2b_2) \\
&amp;=\star(\vec{a}\cdot\vec{b})
\end{align}
```

ホッジ双対同士の $ξ(\star ξ)$ 以外の組み合わせは同じ基底が含まれるため消えてしまいます。結局 $ξ(\star ξ)=i$ となる基底だけが残り、その係数を足したものが内積になります。

## 3次元

```fsharp
Exterior.showProd &quot;## 3次元&quot; 3
```
```math
\begin{align}
&amp;\vec{a}∧\star\vec{b} \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3})∧\star(b_1\vec{e_1}+b_2\vec{e_2}+b_3\vec{e_3}) \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3})∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;=a_1\vec{e_1}∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;\quad +a_2\vec{e_2}∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;\quad +a_3\vec{e_3}∧\{b_1\vec{e_2}∧\vec{e_3}+b_2(-\vec{e_1}∧\vec{e_3})+b_3\vec{e_1}∧\vec{e_2}\} \\
&amp;=a_1b_1\vec{e_1}∧\vec{e_2}∧\vec{e_3}+a_1b_2\underbrace{\vec{e_1}∧(-\vec{e_1}∧\vec{e_3})}_{0}+a_1b_3\underbrace{\vec{e_1}∧\vec{e_1}∧\vec{e_2}}_{0} \\
&amp;\quad +a_2b_1\underbrace{\vec{e_2}∧\vec{e_2}∧\vec{e_3}}_{0}+a_2b_2\underbrace{\vec{e_2}∧(-\vec{e_1}∧\vec{e_3})}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}}+a_2b_3\underbrace{\vec{e_2}∧\vec{e_1}∧\vec{e_2}}_{0} \\
&amp;\quad +a_3b_1\underbrace{\vec{e_3}∧\vec{e_2}∧\vec{e_3}}_{0}+a_3b_2\underbrace{\vec{e_3}∧(-\vec{e_1}∧\vec{e_3})}_{0}+a_3b_3\underbrace{\vec{e_3}∧\vec{e_1}∧\vec{e_2}}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}} \\
&amp;=(a_1b_1+a_2b_2+a_3b_3)\vec{e_1}∧\vec{e_2}∧\vec{e_3} \\
&amp;=\star(a_1b_1+a_2b_2+a_3b_3) \\
&amp;=\star(\vec{a}\cdot\vec{b})
\end{align}
```

## 4次元

```fsharp
Exterior.showProd &quot;## 4次元&quot; 4
```
```math
\begin{align}
&amp;\vec{a}∧\star\vec{b} \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3}+a_4\vec{e_4})∧\star(b_1\vec{e_1}+b_2\vec{e_2}+b_3\vec{e_3}+b_4\vec{e_4}) \\
&amp;=(a_1\vec{e_1}+a_2\vec{e_2}+a_3\vec{e_3}+a_4\vec{e_4})∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;=a_1\vec{e_1}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;\quad +a_2\vec{e_2}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;\quad +a_3\vec{e_3}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;\quad +a_4\vec{e_4}∧\{b_1\vec{e_2}∧\vec{e_3}∧\vec{e_4}+b_2(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})+b_3\vec{e_1}∧\vec{e_2}∧\vec{e_4}+b_4(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})\} \\
&amp;=a_1b_1\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}+a_1b_2\underbrace{\vec{e_1}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{0}+a_1b_3\underbrace{\vec{e_1}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{0}+a_1b_4\underbrace{\vec{e_1}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{0} \\
&amp;\quad +a_2b_1\underbrace{\vec{e_2}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}_{0}+a_2b_2\underbrace{\vec{e_2}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}+a_2b_3\underbrace{\vec{e_2}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{0}+a_2b_4\underbrace{\vec{e_2}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{0} \\
&amp;\quad +a_3b_1\underbrace{\vec{e_3}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}_{0}+a_3b_2\underbrace{\vec{e_3}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{0}+a_3b_3\underbrace{\vec{e_3}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}+a_3b_4\underbrace{\vec{e_3}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{0} \\
&amp;\quad +a_4b_1\underbrace{\vec{e_4}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}}_{0}+a_4b_2\underbrace{\vec{e_4}∧(-\vec{e_1}∧\vec{e_3}∧\vec{e_4})}_{0}+a_4b_3\underbrace{\vec{e_4}∧\vec{e_1}∧\vec{e_2}∧\vec{e_4}}_{0}+a_4b_4\underbrace{\vec{e_4}∧(-\vec{e_1}∧\vec{e_2}∧\vec{e_3})}_{\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4}} \\
&amp;=(a_1b_1+a_2b_2+a_3b_3+a_4b_4)\vec{e_1}∧\vec{e_2}∧\vec{e_3}∧\vec{e_4} \\
&amp;=\star(a_1b_1+a_2b_2+a_3b_3+a_4b_4) \\
&amp;=\star(\vec{a}\cdot\vec{b})
\end{align}
```

手計算ではやる気にならないような計算ですが、プログラムではパラメータを変えるだけで生成されるのが面白い所です。

# 参考

* [ホッジ双対 - Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%9B%E3%83%83%E3%82%B8%E5%8F%8C%E5%AF%BE)
</textarea><input type="submit" name="commit" value="Save changes" data-disable-with="Save changes" /></form></div></section></div><div class="col-sm-3"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="ユークリッド空間のホッジ双対とバブルソート by @7shi on @Qiita" data-url="http://qiita.com/7shi/items/f54302058149d07da592" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="ユークリッド空間のホッジ双対とバブルソート" href="http://b.hatena.ne.jp/entry/http://qiita.com/7shi/items/f54302058149d07da592" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/7shi/items/f54302058149d07da592" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/7shi/items/f54302058149d07da592" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div><section class="itemsShowAuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><a href="/7shi"><img alt="" class="itemsShowAuthorInfo_userIcon" itemprop="image" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" /></a><div class="itemsShowAuthorInfo_profileStats"><strong class="itemsShowAuthorInfo_userName" itemprop="name"><a itemprop="url" href="/7shi">7shi</a></strong><div class="itemsShowAuthorInfo_contribution"><span class="itemsShowAuthorInfo_count">2522</span><span class="itemsShowAuthorInfo_unit">Contribution</span></div><div data-react-class="T.UserFollowButton" data-react-props="{&quot;url_name&quot;:&quot;7shi&quot;,&quot;initial_followed_by&quot;:false,&quot;size&quot;:&quot;btn-xs&quot;,&quot;position&quot;:&quot;author-info&quot;}"></div></div><section class="itemsShowAuthorPopularItems"><h5 class="itemsShowAuthorPopularItems_sectionTitle">Popular Posts</h5><ul class="itemsShowAuthorPopularItems_posts list-unstyled"><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/145f1234f8ec2af923ef">Haskell 超入門</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/547b6137d7a3c482fe68">モナド則がちょっと分かった？</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/cac7b3e9b90bf91b00cc">文字列で学ぶC++入門</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/85afd7bbd5d6c4115ad6">Haskell アクション 超入門</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/7shi/items/d1e5a0c22be6cf61d286">Haskell IDE Leksah 入門</a></li></ul></section></section><div class="scroll-chaser"><div class="google-adsense"><style>.test-text-responsible { width: 200px; height: 200px; }@media(min-width: 1200px) {  .test-text-responsible { width: 250px; height: 250px; }}@media(max-width: 979px) and (min-width: 768px) {  .test-text-responsible { width: 120px; height: 240px; }}@media(max-width: 767px) {  .test-text-responsible { width: 320px; height: 50px; }}</style><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle test-text-responsible" data-ad-client="ca-pub-8127218772604357" data-ad-slot="3880091879" style="display:inline-block"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div><div data-react-class="T.Toc" data-react-props="{&quot;body&quot;:&quot;\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E4%BA%92%E6%8F%9B\&quot;\u003e互換\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%82%BC%E3%83%AD\&quot;\u003eゼロ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%B9%BE%E4%BD%95%E5%AD%A6%E7%A9%8D\&quot;\u003e幾何学積\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%82%BD%E3%83%BC%E3%83%88\&quot;\u003eソート\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%AE%9F%E8%A3%85\&quot;\u003e実装\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E9%80%86%E5%85%83\&quot;\u003e逆元\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%AE%9F%E8%A3%85-1\&quot;\u003e実装\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E8%99%9A%E6%95%B0\&quot;\u003e虚数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%AE%9F%E8%A3%85-2\&quot;\u003e実装\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%83%A6%E3%83%BC%E3%82%AF%E3%83%AA%E3%83%83%E3%83%89%E7%A9%BA%E9%96%93%E3%81%AE%E3%83%9B%E3%83%83%E3%82%B8%E5%8F%8C%E5%AF%BE\&quot;\u003eユークリッド空間のホッジ双対\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%AE%9F%E8%A3%85-3\&quot;\u003e実装\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#2%E6%AC%A1%E5%85%83\&quot;\u003e2次元\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#3%E6%AC%A1%E5%85%83\&quot;\u003e3次元\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#4%E6%AC%A1%E5%85%83\&quot;\u003e4次元\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%86%85%E7%A9%8D\&quot;\u003e内積\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E6%93%AC%E3%82%B9%E3%82%AB%E3%83%A9%E3%83%BC\&quot;\u003e擬スカラー\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%AE%9F%E8%A3%85-4\&quot;\u003e実装\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#2%E6%AC%A1%E5%85%83-1\&quot;\u003e2次元\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#3%E6%AC%A1%E5%85%83-1\&quot;\u003e3次元\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#4%E6%AC%A1%E5%85%83-1\&quot;\u003e4次元\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%82%E8%80%83\&quot;\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n&quot;,&quot;wrapper&quot;:&quot;#article-body-wrapper&quot;}"></div></div></div><div class="row"><div class="col-sm-9"><div class="ArticleFooter__menu"><div class="s-flex-align-center"><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:3,&quot;show_count&quot;:true,&quot;uuid&quot;:&quot;f54302058149d07da592&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-footer&quot;}"></div><div class="ArticleFooter__userList"><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="apple4751"><a itemprop="url" href="/apple4751"><img alt="apple4751" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/93070/profile-images/1473705835" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="kktk-KO"><a itemprop="url" href="/kktk-KO"><img alt="kktk-KO" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/46436/profile-images/1473690647" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="bahaki386"><a itemprop="url" href="/bahaki386"><img alt="bahaki386" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/47544/profile-images/1473691031" /></a></div></div></div></div><div class="u-flex u-align-center"><div class="ArticleFooter__stock"><div class="js-stockbutton" data-position="footer_menu" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="ArticleFooter__editRequest"><a class="u-link-no-underline" data-toggle="tooltip" title="You can propose improvements about the article to the author 💪" href="/drafts/f54302058149d07da592/edit"><span class="fa fa-send-o fa-lg"></span> <span>Edit request</span></a></div><div class="dropdown ArticleFooter__dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a href="/7shi/items/f54302058149d07da592.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><i class="fa fa-fw fa-flag"></i> Report article</a></li></ul></div></div></div><ul class="references js-referencesView"><li class="references_header"><i class="fa fa-fw fa-link"></i> Linked from these articles</li><a class="references_toggleOldReferences js-toggleOldReferences" href="#"><i class="fa fa-expand js-toggleOldReferencesIcon"></i><span class="js-toggleOldReferencesText">Show old 3 links</span></a><li class="references_reference js-reference js-oldReference"><span>Linked from </span><a href="/7shi/items/017d2d2c758f76071f23#_reference-665d8dbb12029297108c"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />外積と愉快な仲間たち</a><time class="references_datetime js-dateTimeView" datetime="2016-10-30T17:43:20+00:00">4 months ago</time></li><li class="references_reference js-reference js-oldReference"><span>Linked from </span><a href="/7shi/items/a80988a32a0d706e9378#_reference-aab4230c703307d4607a"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />四元数と行列で見る内積と外積の「内」と「外」</a><time class="references_datetime js-dateTimeView" datetime="2016-12-09T07:44:45+00:00">3 months ago</time></li><li class="references_reference js-reference js-oldReference"><span>Linked from </span><a href="/7shi/items/2036e7a739c2a9e04025#_reference-eb63ee555285ec3ef287"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />四元数を作ろう</a><time class="references_datetime js-dateTimeView" datetime="2016-12-15T04:44:23+00:00">3 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/b34fe724d36fb7d96456#_reference-db77b7f845f6406ccdc0"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />八元数を作ろう</a><time class="references_datetime js-dateTimeView" datetime="2016-12-15T04:50:21+00:00">3 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/8495b2d6b888e7b8703f#_reference-97a2f51bc5835c1e613f"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />八元数の積をプログラムで確認</a><time class="references_datetime js-dateTimeView" datetime="2016-12-15T04:53:30+00:00">3 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/4fb60dacad46cb8e63b3#_reference-8c1a3be000292af45b30"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />多項式の積を計算</a><time class="references_datetime js-dateTimeView" datetime="2016-12-19T05:49:03+00:00">2 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/02c758c03d2fd7038912#_reference-360f91647171f4ed0ad4"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />外積の成分をプログラムで確認</a><time class="references_datetime js-dateTimeView" datetime="2016-12-20T09:15:07+00:00">2 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/7shi/items/88be5203769e629df243#_reference-2b3ca0a6286bd1c788f6"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" />多元数の積の構成</a><time class="references_datetime js-dateTimeView" datetime="2017-01-03T18:42:07+00:00">about 2 months ago</time></li></ul><div class="itemsShowBody_articleColumnFooter"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="ユークリッド空間のホッジ双対とバブルソート by @7shi on @Qiita" data-url="http://qiita.com/7shi/items/f54302058149d07da592" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="ユークリッド空間のホッジ双対とバブルソート" href="http://b.hatena.ne.jp/entry/http://qiita.com/7shi/items/f54302058149d07da592" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/7shi/items/f54302058149d07da592" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/7shi/items/f54302058149d07da592" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div></div><div class="itemsShowComment_wrapper" id="comments"><div data-react-class="T.CommentListContainer" data-react-props="{&quot;currentUser&quot;:null,&quot;initialComments&quot;:[],&quot;monthly_public_image_uploadable_size_limit&quot;:null,&quot;total_uploaded_public_image_size_in_current_month&quot;:null,&quot;item&quot;:{&quot;id&quot;:434372,&quot;uuid&quot;:&quot;f54302058149d07da592&quot;,&quot;suspended&quot;:false,&quot;secret&quot;:false},&quot;owner&quot;:{&quot;url_name&quot;:&quot;7shi&quot;},&quot;is_team&quot;:false,&quot;is_project&quot;:false,&quot;logged_in&quot;:false,&quot;polling&quot;:false,&quot;mention_candidates&quot;:[{&quot;id&quot;:32057,&quot;url_name&quot;:&quot;7shi&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823&quot;}]}">Comments Loading...</div></div></div></div></div></article><div class="js-report-form modal fade reportForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Report article</h4></div><div class="modal-body"><form action="/reports" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="GNpWt95MVYmnDpmqEFMSqXo+a/Wn7/Nl7HF0VKSwxgR2WM3vRWJswljdLLZgpqzwGnlPRjArqZLQr32vRb7Iwg==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/7shi/items/f54302058149d07da592" /><input type="hidden" name="item_uuid" id="item_uuid" value="f54302058149d07da592" /><p>Help us understand the problem. What is going on with this item?</p><br /><div class="form-group"><ul class="list-unstyled"><li><label><input type="radio" name="report_type" id="report_type_spam" value="spam" required="required" /> It&#39;s spam </label></li><li><label><input type="radio" name="report_type" id="report_type_harassment" value="harassment" required="required" /> It&#39;s abusive or harmful </label></li><li><label><input type="radio" name="report_type" id="report_type_inappropriate_content" value="inappropriate_content" required="required" /> It contains inappropriate content </label></li></ul></div><div class="reportForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary reportForm_submitButton"><i class="fa fa-send"></i> Submit</button></div></form></div></div></div></div><script id="js-item" type="application/json">{ "url": "http://qiita.com/7shi/items/f54302058149d07da592", "id": 434372, "uuid": "f54302058149d07da592" }</script><script class="js-user" type="application/json">{&quot;id&quot;:32057,&quot;url_name&quot;:&quot;7shi&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823&quot;}</script><script language="JavaScript" src="//cdn.bigmining.com/private/js/qiita_bigmining.js" type="text/javascript"></script></div><footer class="footer"><div class="footer_inner"><div class="footer_container"><ul class="footer_links-left"><li class="footer_link"><a class="footer_copyright" href="http://increments.co.jp">© 2011-2017 Increments Inc.</a></li><li class="footer_link"><a href="http://qiita.com/terms">Terms</a></li><li class="footer_link"><a href="http://qiita.com/privacy">Privacy</a></li><li class="footer_link"><a href="http://help.qiita.com">Help</a></li><li class="footer_link"><a href="https://increments.zendesk.com/anonymous_requests/new">Contact</a></li></ul><ul class="footer_links-right"><li class="footer_link"><a href="http://qiita.com/about">About</a></li><li class="footer_link"><a href="/users">Users</a></li><li class="footer_link"><a href="/tags">Tags</a></li><li class="footer_link"><a href="http://blog.qiita.com">Blog</a></li><li class="footer_link"><a href="http://qiita.com/api/v2/docs">API</a></li><li class="footer_link"><a href="https://teams.qiita.com/">Team</a></li><li class="footer_link"><a href="http://kobito.qiita.com">Kobito</a></li><li class="footer_link"><a class="js-public-form-feedback-link" data-target=".js-feedback-form" data-toggle="modal" href=""><i class="fa fa-heart"></i> Feedback <i class="fa fa-caret-down"></i></a></li></ul></div></div></footer><div class="js-feedback-form modal fade feedbackForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Feedback</h4></div><div class="modal-body"><form class="js-feedback-form-form" action="/feedbacks" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="8Qe5b0OYRywwDIjS8yHD3djWeAiZTiWeKTyQKVYVZFKfhSI32LZ+Z8/fPc6D1H2EuJFcuw6Kf2kV4pnStxtqlA==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/7shi/items/f54302058149d07da592" /><div class="form-group"><textarea name="feedback[message]" id="feedback_message" class="form-control js-feedback-form-text-area" placeholder="Please give us any feedback about Qiita." required="required" rows="5">
</textarea></div><div class="feedbackForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary feedbackForm_submitButton"><i class="fa fa-send"></i> Submit</button><p class="feedbackForm_note">We don&#39;t reply to any feedback.<br />If you need help with Qiita, please send a support request from <a href="https://increments.zendesk.com/anonymous_requests/new">here</a>.</p></div><div style="position:fixed;top:-99999px;opacity:0.0001;"><input name="feedback[name]" type="text" /></div></form></div></div></div></div><script>// if (window.mixpanel instanceof Element) {
//   window.mixpanel = [];
// }
// (function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
// for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);</script><script src="http://cdn.qiita.com/assets/public-8c6201a66dc6db6f64a9017391c319bf.min.js"></script><script>
  (function () {
    var script = document.getElementsByTagName('script')[0];
    var load = function (src, id) {
      var el = document.createElement('script');
      el.async = true;
      el.src = src;
      el.id = id;
      script.parentNode.insertBefore(el, script);
    };
      // Optimizely
      load('//cdn.optimizely.com/js/52738645.js', 'optimizely-jssdk');
      // Google Analytics
      window._gaq = window._gaq || [];
      var isCareer = location.hostname.split('.')[0] == 'career';
      if (isCareer) {
        window._gaq.push(['_setAccount', 'UA-24675221-11']);
        window._gaq.push(['_setDomainName', 'qiita.com']);
      } else {
        window._gaq.push(['_setAccount', 'UA-24675221-1']);
      }
      window._gaq.push(['_setCustomVar', 1, 'logged_in', 'false', 2]);
      window._gaq.push(['_trackPageview']);
      var src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      load(src, 'google-analytics-jssdk');
    // Google Analytics - Universal Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-24675221-12', {
          
        });
        ga('set', 'dimension1', 'false');
        ga('set', 'dimension3', 'false');
      ga('require', 'displayfeatures');
      ga('set', 'forceSSL', true);
      ga('send', 'pageview');
    // Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TBQWPN');
  })();
</script>
</body></html>