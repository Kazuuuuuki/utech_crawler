<!DOCTYPE html><html xmlns:og="http://ogp.me/ns#"><head><meta charset="UTF-8" /><title>Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ - Qiita</title><meta content="width=device-width,initial-scale=1" name="viewport" /><meta content="äººé–“ãŒåˆ†é¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ã‚’ã—ã¦ã„ã‚‹éš›ã«äººé–“ãŒãƒ‡ãƒ¼ã‚¿ã®é–“ã«ä»‹åœ¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å¼Šå®³ãŒå‡ºã¦ããŸã®ã§ã€æ•™å¸«ãªã—ã®ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡å™¨ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚


äººé–“ãŒãƒ©ãƒ™ãƒ«ä»˜ã‘ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å•é¡Œç‚¹


éšå±¤æ§‹é€ ã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦åˆ—ã«ãƒ©ãƒ™ãƒ«ä»˜ã‘ã‚‹
äººã«ã‚ˆã£ã¦å¤§ããåˆ¤æ–­ãŒé•ã£ã¦ãã‚‹ã‚ˆã†ãªãƒ©ãƒ™ãƒ«ã‚’ã¤ã‘ã‚‹
ä½œæ¥­é–‹å§‹æ™‚ç‚¹ã¨çµ‚äº†æ™‚ç‚¹ã§ãƒ©ãƒ™ãƒ«ã®ä»˜ã‘æ–¹ãŒå¤‰ã‚ã‚‹



å‚è€ƒè³‡æ–™



ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ§ãƒ³æœ€å…ˆç«¯ã‚¬ã‚¤ãƒ‰6 (CVIMãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚·ãƒªãƒ¼ã‚º)

Deep Learnin..." name="description" /><meta content="summary" name="twitter:card" /><meta content="@Qiita" name="twitter:site" /><meta content="shima_x" name="twitter:creator" /><meta content="Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ - Qiita" property="og:title" /><meta content="article" property="og:type" /><meta content="http://qiita.com/shima_x/items/196e8d823412e45680e9" property="og:url" /><meta content="http://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" property="og:image" /><meta content="äººé–“ãŒåˆ†é¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ã‚’ã—ã¦ã„ã‚‹éš›ã«äººé–“ãŒãƒ‡ãƒ¼ã‚¿ã®é–“ã«ä»‹åœ¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å¼Šå®³ãŒå‡ºã¦ããŸã®ã§ã€æ•™å¸«ãªã—ã®ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡å™¨ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚

#äººé–“ãŒãƒ©ãƒ™ãƒ«ä»˜ã‘ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å•é¡Œç‚¹
* éšå±¤æ§‹é€ ã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦..." property="og:description" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><link rel="shortcut icon" type="image/x-icon" href="http://cdn.qiita.com/assets/favicons/public/production-4ff10c1e1e2b5fcb353ff9cafdd56c70.ico" /><link rel="apple-touch-icon" type="image/png" href="http://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link rel="stylesheet" media="all" href="http://cdn.qiita.com/assets/public-81dd63f4385f99b52aeab91266068ebd.min.css" /><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="DAy/ZuqvduJiGCOHFziE/9e6F0M2pP6AWfjg7xAroBoba1vRFONddBFgp70qTmlFGQjcfQynkJSaRSkIHrn2Xw==" /></head><body class="without-js" id=""><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-TBQWPN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>
  document.body.className = document.body.className.replace('without-js', '') + ' with-js';
  window.Qiita = {"asset_host":"cdn.qiita.com","TLD":"com","controller_path":"public/items","controller_action":"public/items#show","controller":"items","action":"show","action_path":"public/items#show","env":"production","flash":{},"is_landing_page":false,"is_team_page":false,"request_parameters":{"controller":"public/items","action":"show","user_id":"shima_x","type":"items","id":"196e8d823412e45680e9"},"root_domain":"qiita.com","variant":null,"config":{"mixpanel":{"career":"dd35af27e959781713d63fd7ca898a8d","per_team":"c0a2116368b33b44b5029ebd2cc9b094","public":"be87616606b0e26a87689099aab2c4e5","team":"b7c0342acba2dbc8742484d98788efb3"},"default_locale":"ja","locale":"en"},"team":null,"user":null,"GIT_BRANCH":null,"DEBUG":false};

</script>
<div class="headerContainer headerContainer-public" role="navigation"><div class="js-react-on-rails-component" data-component-name="HeaderContainer" data-props="{&quot;user&quot;:null,&quot;team&quot;:null,&quot;news&quot;:{&quot;type&quot;:&quot;å‹Ÿé›†&quot;,&quot;content&quot;:&quot;Qiitaã‚„Qiita:Teamã‚’è‰¯ãã—ãŸã„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢&quot;,&quot;url&quot;:&quot;http://increments.co.jp/jobs/engineers?utm_source=qiita\u0026utm_medium=header_news&quot;},&quot;initial_unread_count&quot;:null,&quot;siteid_image&quot;:&quot;http://cdn.qiita.com/siteid-reverse.png&quot;,&quot;is_team_page&quot;:false,&quot;on_team_setting&quot;:false,&quot;show_post_menu&quot;:true,&quot;show_search_menu&quot;:true,&quot;is_fluid&quot;:false,&quot;locale&quot;:&quot;en&quot;}" data-trace="false" data-dom-id="HeaderContainer-react-component-eaaf0186-be67-45a0-805f-431dff0cb945"></div>
    <div id="HeaderContainer-react-component-eaaf0186-be67-45a0-805f-431dff0cb945"></div>
    
</div><div id="main"><script type="application/ld+json">{  "@context": "http://schema.org",  "@type": "BreadcrumbList",  "itemListElement": [    {      "@type": "ListItem",      "position": 1,      "item": {        "@id": "/",        "name": "Qiita"      }    },    {      "@type": "ListItem",      "position": 2,      "item": {        "@id": "/items",        "name": "Items"      }    },    {      "@type": "ListItem",      "position": 3,      "item": {        "@id": "/tags/Python",        "name": "Python"      }    }  ]}</script><article itemscope="" itemtype="http://schema.org/Article"><div class="ArticleMainHeader "><div class="container"></div><div class="container"><div class="row s-flex-align-center"><div class="col-sm-9"><h1 class="ArticleMainHeader__title" itemprop="headline">Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡</h1><ul class="TagList"><li class="TagList__item" data-count="9910"><a class="u-link-unstyled TagList__label" href="/tags/Python"><img alt="Python" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/28fd3d6b220c89e6197fd82c02fd2fcd2bb66d81/medium.jpg?1383884245" /><span>Python</span><div class="tagIcon_version">2.7</div></a></li><li class="TagList__item" data-count="1075"><a class="u-link-unstyled TagList__label" href="/tags/DeepLearning"><img alt="DeepLearning" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/eac844d1d880a38fc3be5ebf534cad5182b64ebf/medium.jpg?1453002020" /><span>DeepLearning</span></a></li><li class="TagList__item" data-count="1835"><a class="u-link-unstyled TagList__label" href="/tags/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92"><img alt="æ©Ÿæ¢°å­¦ç¿’" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/a94d4d239b3b0b83723d5b56c050ffc54b8593e7/medium.jpg?1394635775" /><span>æ©Ÿæ¢°å­¦ç¿’</span></a></li></ul></div><div class="col-sm-3"><div class="itemsShowHeaderStock"><ul class="list-unstyled itemsShowHeaderStock_statusList"><li><div class="itemsShowHeaderStock_count stock"><span class="fa fa-thumbs-up"></span><span class="js-likecount">116</span></div><div class="itemsShowHeaderStock_countText">Like</div></li><li><div class="itemsShowHeaderStock_count" content="0 UserComments" itemprop="commentCount"><span class="fa fa-comment"></span>0</div><div class="itemsShowHeaderStock_countText">Comment</div></li></ul></div><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:116,&quot;uuid&quot;:&quot;196e8d823412e45680e9&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-header&quot;}"></div><ul class="list-inline ArticleMainHeader__users"><li class="js-hovercard" data-hovercard-target-name="yusukekondo0503"><a itemprop="url" href="/yusukekondo0503"><img alt="yusukekondo0503" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/56716/profile-images/1473761374" /></a></li><li class="js-hovercard" data-hovercard-target-name="hoxo_m"><a itemprop="url" href="/hoxo_m"><img alt="hoxo_m" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/2570/profile-images/1478138583" /></a></li><li class="js-hovercard" data-hovercard-target-name="kiichi54321"><a itemprop="url" href="/kiichi54321"><img alt="kiichi54321" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/43633/profile-images/1473689593" /></a></li><li class="js-hovercard" data-hovercard-target-name="HirofumiYashima"><a itemprop="url" href="/HirofumiYashima"><img alt="HirofumiYashima" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/43487/profile-images/1473689546" /></a></li><li class="js-hovercard" data-hovercard-target-name="saicologic"><a itemprop="url" href="/saicologic"><img alt="saicologic" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/2432/profile-images/1473681518" /></a></li><li class="js-hovercard" data-hovercard-target-name="toohsk"><a itemprop="url" href="/toohsk"><img alt="toohsk" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/47270/profile-images/1473690928" /></a></li><li class="js-hovercard" data-hovercard-target-name="Reds"><a itemprop="url" href="/Reds"><img alt="Reds" class="thumb thumb--xs" src="https://0.gravatar.com/avatar/e751888e30cdc35253c1a3b241977adf?d=https%3A%2F%2Fidenticons.github.com%2F0e2f15414d97b8b642022be91ff105e0.png" /></a></li><li class="js-hovercard" data-hovercard-target-name="canard0328"><a itemprop="url" href="/canard0328"><img alt="canard0328" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/52533/profile-images/1473692763" /></a></li><li class="js-hovercard" data-hovercard-target-name="mero"><a itemprop="url" href="/mero"><img alt="mero" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/63104/profile-images/1473696161" /></a></li><li class="js-hovercard" data-hovercard-target-name="NaohiroKashimoto"><a itemprop="url" href="/NaohiroKashimoto"><img alt="NaohiroKashimoto" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/11055/profile-images/1473681901" /></a></li><li><a href="/shima_x/items/196e8d823412e45680e9/likers"><span class="fa fa-ellipsis-h"></span></a></li></ul></div></div></div></div><div class="ArticleAsideHeader"><div class="container"><div class="u-flex u-space-between"><div class="u-flex u-flex-wrap"><div class="u-flex u-align-center s-pdv-5 u-flex-wrap"><div class="ArticleAsideHeader__author"><a href="/shima_x"><img class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/12767/profile-images/1473682529" alt="1473682529" /></a> <a class="u-link-unstyled" href="/shima_x">shima_x</a> </div><div class="ArticleAsideHeader__date"><span>posted at <time datetime="2015-05-24T14:42:33+09:00" itemprop="datePublished">2015-05-24</time></span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"></div></div><div class="u-flex u-align-center s-flex-justiry-between s-pdv-5 u-shrink-0"><div class="ArticleAsideHeader__stock"><div class="js-stockbutton" data-position="top" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h fa-lg"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a href="/shima_x/items/196e8d823412e45680e9.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><span class="fa fa-fw fa-flag"></span> Report article</a></li></ul></div></div></div></div></div><div class="container"><div class="row" id="article-body-wrapper"><div class="col-sm-9"><section class="markdownContent markdownContent-headingEnabled js-task-list-container clearfix position-relative" id="item-196e8d823412e45680e9" itemprop="articleBody"><div class="alert alert-warning"><i class="fa fa-clock-o"></i> More than 1 year has passed since last update.</div><p>äººé–“ãŒåˆ†é¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ã‚’ã—ã¦ã„ã‚‹éš›ã«äººé–“ãŒãƒ‡ãƒ¼ã‚¿ã®é–“ã«ä»‹åœ¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å¼Šå®³ãŒå‡ºã¦ããŸã®ã§ã€æ•™å¸«ãªã—ã®ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡å™¨ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚</p>

<h1>
<span id="äººé–“ãŒãƒ©ãƒ™ãƒ«ä»˜ã‘ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å•é¡Œç‚¹" class="fragment"></span><a href="#%E4%BA%BA%E9%96%93%E3%81%8C%E3%83%A9%E3%83%99%E3%83%AB%E4%BB%98%E3%81%91%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AB%E3%82%88%E3%82%8B%E5%95%8F%E9%A1%8C%E7%82%B9"><i class="fa fa-link"></i></a>äººé–“ãŒãƒ©ãƒ™ãƒ«ä»˜ã‘ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å•é¡Œç‚¹</h1>

<ul>
<li>éšå±¤æ§‹é€ ã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦åˆ—ã«ãƒ©ãƒ™ãƒ«ä»˜ã‘ã‚‹</li>
<li>äººã«ã‚ˆã£ã¦å¤§ããåˆ¤æ–­ãŒé•ã£ã¦ãã‚‹ã‚ˆã†ãªãƒ©ãƒ™ãƒ«ã‚’ã¤ã‘ã‚‹</li>
<li>ä½œæ¥­é–‹å§‹æ™‚ç‚¹ã¨çµ‚äº†æ™‚ç‚¹ã§ãƒ©ãƒ™ãƒ«ã®ä»˜ã‘æ–¹ãŒå¤‰ã‚ã‚‹</li>
</ul>

<h1>
<span id="å‚è€ƒè³‡æ–™" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>å‚è€ƒè³‡æ–™</h1>

<ul>
<li>
<a href="http://www.amazon.co.jp/gp/product/4915851540/ref=as_li_tf_tl?ie=UTF8&amp;camp=247&amp;creative=1211&amp;creativeASIN=4915851540&amp;linkCode=as2&amp;tag=shimashimao06-22" rel="nofollow noopener" target="_blank">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ§ãƒ³æœ€å…ˆç«¯ã‚¬ã‚¤ãƒ‰6 (CVIMãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚·ãƒªãƒ¼ã‚º)</a><a href="http://ir-jp.amazon-adsystem.com/e/ir?t=shimashimao06-22&amp;l=as2&amp;o=9&amp;a=4915851540" target="_blank" rel="nofollow noopener"><img src="http://ir-jp.amazon-adsystem.com/e/ir?t=shimashimao06-22&amp;l=as2&amp;o=9&amp;a=4915851540" width="1" height="1" border="0" alt=""></a>
</li>
<li><a href="http://deeplearning.net/tutorial/" rel="nofollow noopener" target="_blank">Deep Learning Tutorials</a></li>
<li><a href="http://arxiv.org/abs/1405.4053" rel="nofollow noopener" target="_blank">Distributed Representations of Sentences and Documents, Le+, 2014</a></li>
</ul>

<h1>
<span id="ã‚„ã£ãŸã“ã¨" class="fragment"></span><a href="#%E3%82%84%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>ã‚„ã£ãŸã“ã¨</h1>

<ul>
<li>Doc2Vecã§å„æ–‡æ›¸ã«ã¤ã„ã¦ä»–ã®æ–‡æ›¸ã¨ã®é¡ä¼¼åº¦ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œæˆ</li>
<li>SVDã§æ¬¡å…ƒåœ§ç¸®</li>
<li>k-meansã§ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°</li>
</ul>

<p>k-meansã§ãªãã¦ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§åˆ†é¡ã—ãŸæ–¹ãŒè‰¯ã‹ã£ãŸãªã€ã¨åçœã—ã¦ã„ã¾ã™ã€‚<br>
ç†ç”±ã¨ã—ã¦ã¯Doc2Vecã§è¨ˆç®—ã—ãŸéš›ã«é¡ä¼¼åº¦ãŒå‡ºåŠ›ã•ã‚Œã‚‹æ–‡æ›¸ãŒé™ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚<br>
k-meansã§ã¯ä¸€åº¦ã‚¹ãƒ‘ãƒ¼ã‚¹ãªãƒãƒˆãƒªã‚¯ã‚¹ã‚’æ§‹ç¯‰ã—ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ãŒã€ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§åˆ†é¡ã‚’è¡Œãˆã°ã‚ã–ã‚ã–ç„¡é§„ãªãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã™ã‚‹å¿…è¦ãŒãªã‹ã£ãŸãªã¨ã€‚ã€‚</p>

<h1>
<span id="doc2vecã§ç‰¹å¾´é‡ã‚’ä½œæˆã™ã‚‹åˆ©ç‚¹" class="fragment"></span><a href="#doc2vec%E3%81%A7%E7%89%B9%E5%BE%B4%E9%87%8F%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E5%88%A9%E7%82%B9"><i class="fa fa-link"></i></a>Doc2Vecã§ç‰¹å¾´é‡ã‚’ä½œæˆã™ã‚‹åˆ©ç‚¹</h1>

<ul>
<li>æ–‡æ›¸å†…ã®æ–‡è„ˆã‚’è€ƒæ…®å‡ºæ¥ã‚‹ï¼ˆBoWãŒå…¥åŠ›ã§ã¯ãªã„ï¼‰</li>
<li>Word2VecãŒå…ƒã«ãªã£ã¦ã„ã‚‹ã®ã§ã€æ–‡æ›¸ã«é–¢é€£ã—ãŸwordã‚’å–å¾—å‡ºæ¥ã‚‹</li>
</ul>

<h1>
<span id="å‚è€ƒã‚³ãƒ¼ãƒ‰" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>å‚è€ƒã‚³ãƒ¼ãƒ‰</h1>

<p>ã‚³ãƒ¡ãƒ³ãƒˆã«æ—¥æœ¬èªã¨è‹±èªãŒæ··ã–ã£ã¦ã„ãŸã‚Šã€ã‹ãªã‚Šæ±šã„ã‚³ãƒ¼ãƒ‰ã§ç”³ã—è¨³æœ‰ã‚Šã¾ã›ã‚“ã€‚ã€‚</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre>
# coding: utf-8

from gensim import corpora, models
import numpy as np
from numpy import random
random.seed(555)
from scipy.cluster.vq import vq, kmeans, whiten
from sklearn.decomposition import TruncatedSVD
from collections import defaultdict
from separatewords import MecabTokenize  # ç›®çš„ã«åˆã‚ã›ãŸå½¢æ…‹ç´ è§£æå™¨ã‚’å‘¼ã³ã ã—ã¦ä¸‹ã•ã„


class MyTexts:
    def __init__(self, text_list):
        self.text_list = text_list

    def __iter__(self):
        for line in self.text_list:
            if line==b'æœªå…¥åŠ›': continue
            yield MecabTokenize.tokenize( line.rstrip().decode('utf-8') )


class LabeledLineSentence(object):
    def __init__(self, texts_words):
        self.texts_words = texts_words

    def __iter__(self):
        for uid, words in enumerate(self.texts_words):
            yield models.doc2vec.LabeledSentence(words, labels=['SENT_%s' % uid])


# Doc2Vecã§å–å¾—ã—ãŸå„æ–‡ç« ã®é¡ä¼¼åº¦ã‚’matrixã«ã™ã‚‹
# ã¤ã„ã§ã«å„æ–‡ç« ã®ä»£è¡¨ãƒ¯ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹
def create_sim_vec(model,n_sent):
    base_name = 'SENT_'
    sim_matrix = []
    sim_matrix_apd = sim_matrix.append
    word_matrix = []
    word_matrix_apd = word_matrix.append
    for i_sent in xrange(n_sent):
        sim_vec = np.zeros(n_sent)
        word_list = []
        word_list_apd = word_list.append
        # sentãŒå­˜åœ¨ã—ãªã„å ´åˆãŒã‚ã‚‹ã®ã§ã€ä¾‹å¤–å‡¦ç†ã‚’å…¥ã‚Œã¦ãŠã
        try:
            for word, sim_val in model.most_similar(base_name+str(i_sent)):
                if 'SENT_' in word:
                    _, s_idx = word.split('_')
                    sim_vec[int(s_idx)] = sim_val
                else:
                    word_list_apd(word)
        except:
            pass
        sim_matrix_apd(sim_vec)
        word_matrix_apd(word_list)
    return sim_matrix, word_matrix

# kmeansã§é¡ä¼¼ã®æ–‡æ›¸ã‚’ã¾ã¨ã‚ã‚‹
def sent_integrate(sim_matrix,n_class):
    # æ¬¡å…ƒã”ã¨ã®åˆ†æ•£ã‚’å‡ä¸€ã«ã™ã‚‹
    whiten(sim_matrix)

    centroid, destortion = kmeans(sim_matrix, n_class, iter=100, thresh=1e-05)
    labels, dist = vq(sim_matrix, centroid)
    return labels

def count_class(labels):
    res_dic = defaultdict(int)
    for label in labels:
        res_dic[label] += 1
    return res_dic

def count_labeled_data(label_data, labels):
    result_dict = {}
    for orig_labels, label in zip(label_data, labels):
        labels = np.array(orig_labels.split(), dtype=np.int64)
        if label not in result_dict:
            result_dict[label] = labels
        else:
            result_dict[label] += labels
    return result_dict


if __name__=='__main__':
    ifname = './out_data.csv'
    model_basename = './D2V/doc2vec_result/model'
    topic_result_basename = './D2V/doc2vec_result/topic'

    comment_data = []
    comment_data_apd = comment_data.append
    label_data = []
    label_data_apd = label_data.append
    with open(ifname, 'r') as f:
        for line in f:
            single_flag, label_flags, comment = line.strip().split('\t')
            comment_data_apd(comment.strip())
            label_data_apd(label_flags.strip())

    texts = MyTexts(comment_data)
    sentences = LabeledLineSentence(texts)
    model = models.Doc2Vec(alpha=0.025, min_alpha=0.025)  # use fixed learning rate
    model.build_vocab(sentences)

    # store the model to mmap-able files
    model.save(model_basename+'.d2v')

    # load the model back
    model_loaded = models.Doc2Vec.load(model_basename+'.d2v')

    epoch = 10
    for _ in xrange(epoch):
        model.train(sentences)
        model.alpha -= 0.002  # decrease the learning rate
        model.min_alpha = model.alpha  # fix the learning rate, no decay
    print 'done training'

    # show topic
    n_sent = len(comment_data)
    sent_matrix, word_matrix = create_sim_vec(model, n_sent)
    print 'done get sent_matrix'

    ## é¡ä¼¼æ–‡æ›¸ã‚’ã¾ã¨ã‚ã‚‹
    # svdã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿åœ§ç¸®(ãƒ‡ãƒ¼ã‚¿ã‚’å¯†ã«ã™ã‚‹)
    np.savetxt('./D2V/sent_matrix', np.array(sent_matrix))
    dimension = 100
    lsa = TruncatedSVD(dimension)
    info_matrix = lsa.fit_transform(sent_matrix)
    np.savetxt('./D2V/info_matrix', np.array(info_matrix))

    # kmeansã®å®Ÿæ–½
    n_class = 7
    labels = sent_integrate(np.array(info_matrix),n_class)
    np.savetxt('./D2V/sent_labels.csv', labels,delimiter=',', fmt='%d')
    print count_class(labels)

    # äººé–“ãŒåˆ†é¡ã—ãŸã‚‚ã®ã¨ã®æ¯”è¼ƒ
    print count_labeled_data(label_data, labels)
</pre></div></div>

<p>ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ã€(0Â¥t1 0 1 0 0 0 0Â¥txxxx)ã§1è¡ŒãŒæ§‹æˆã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚<br>
ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§7ã¤01ã®ãƒ•ãƒ©ã‚°ãŒç«‹ã£ã¦ã„ã‚‹ã®ãŒã€äººé–“ãŒä»˜ã‘ãŸãƒ©ãƒ™ãƒ«ã§ã™ã€‚</p>

<h1>
<span id="ã‚³ãƒ¡ãƒ³ãƒˆ" class="fragment"></span><a href="#%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>ã‚³ãƒ¡ãƒ³ãƒˆ</h1>

<p>å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã§ã®çµæœã‚’ä»˜ã‘ã¦ã„ãªã„ã®ã§ä¿¡æ†‘æ€§ãŒãªã„ã®ã§ã™ãŒã€<br>
2000å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç›®è¦–ã§ç¢ºèªã—ã¦ã€8å‰²ç¨‹åº¦ã¯é•å’Œæ„Ÿã®ãªã„åˆ†é¡ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚<br>
é€†ã«äººé–“ãŒä»˜ã‘ãŸãƒ©ãƒ™ãƒ«ã‚’è¦‹ã¦ã„ã¦æ„å‘³ä¸æ˜ãªã‚‚ã®ãŒ3å‰²ç¨‹åº¦ã‚ã‚Šã¾ã—ãŸã€‚<br>
ï¼ˆæ„Ÿæ€§ã®é•ã„ãªã®ã‹ä½•ãªã®ã‹ã€‚ã€‚ã€‚ï¼‰</p>

<p>æœ€è¿‘ã€æ‰‹æ³•ã®èª¬æ˜ã‚„å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚’è¼‰ã›ãšã«è¨˜äº‹ã‚’å…¬é–‹ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã§<br>
ä»Šå¾Œæ‰‹æŠœãã›ãšã«è¨˜äº‹ã‚’æ›¸ããŸã„ãªï¼ˆæ›¸ã‘ãŸã‚‰ã„ã„ãªï¼‰ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚<br>
ãŠæ‰‹æ•°ã§ã™ãŒé–“é•ã„ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã”æŒ‡æ‘˜ã„ãŸã ã‘ã¾ã™ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚</p>
<div class="hidden"><form class="js-task-list-update" action="/shima_x/items/196e8d823412e45680e9" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="r5QZ0AQzC7CkWeJbs3eEcvjt9jJkOQdvr+VoqD1P6Fa48/1n+n8gJtchZmGOAWnINl89DF46aXtsWKFPM92+Ew==" /><input type="hidden" name="updated_at_confirmation_in_unixtime" id="updated_at_confirmation_in_unixtime" value="1432446153" class="js-task-list-updated-at" /><textarea name="raw_body" id="raw_body" class="js-task-list-field">
äººé–“ãŒåˆ†é¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ã‚’ã—ã¦ã„ã‚‹éš›ã«äººé–“ãŒãƒ‡ãƒ¼ã‚¿ã®é–“ã«ä»‹åœ¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å¼Šå®³ãŒå‡ºã¦ããŸã®ã§ã€æ•™å¸«ãªã—ã®ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡å™¨ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚

#äººé–“ãŒãƒ©ãƒ™ãƒ«ä»˜ã‘ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å•é¡Œç‚¹
* éšå±¤æ§‹é€ ã«ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¸¦åˆ—ã«ãƒ©ãƒ™ãƒ«ä»˜ã‘ã‚‹
* äººã«ã‚ˆã£ã¦å¤§ããåˆ¤æ–­ãŒé•ã£ã¦ãã‚‹ã‚ˆã†ãªãƒ©ãƒ™ãƒ«ã‚’ã¤ã‘ã‚‹
* ä½œæ¥­é–‹å§‹æ™‚ç‚¹ã¨çµ‚äº†æ™‚ç‚¹ã§ãƒ©ãƒ™ãƒ«ã®ä»˜ã‘æ–¹ãŒå¤‰ã‚ã‚‹

# å‚è€ƒè³‡æ–™
* [ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ§ãƒ³æœ€å…ˆç«¯ã‚¬ã‚¤ãƒ‰6 (CVIMãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚·ãƒªãƒ¼ã‚º)](http://www.amazon.co.jp/gp/product/4915851540/ref=as_li_tf_tl?ie=UTF8&amp;camp=247&amp;creative=1211&amp;creativeASIN=4915851540&amp;linkCode=as2&amp;tag=shimashimao06-22)&lt;img src=&quot;http://ir-jp.amazon-adsystem.com/e/ir?t=shimashimao06-22&amp;l=as2&amp;o=9&amp;a=4915851540&quot; width=&quot;1&quot; height=&quot;1&quot; border=&quot;0&quot; alt=&quot;&quot; style=&quot;border:none !important; margin:0px !important;&quot; /&gt;
* [Deep Learning Tutorials](http://deeplearning.net/tutorial/)
* [Distributed Representations of Sentences and Documents, Le+, 2014](http://arxiv.org/abs/1405.4053)

# ã‚„ã£ãŸã“ã¨
* Doc2Vecã§å„æ–‡æ›¸ã«ã¤ã„ã¦ä»–ã®æ–‡æ›¸ã¨ã®é¡ä¼¼åº¦ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œæˆ
* SVDã§æ¬¡å…ƒåœ§ç¸®
* k-meansã§ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°

k-meansã§ãªãã¦ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§åˆ†é¡ã—ãŸæ–¹ãŒè‰¯ã‹ã£ãŸãªã€ã¨åçœã—ã¦ã„ã¾ã™ã€‚
ç†ç”±ã¨ã—ã¦ã¯Doc2Vecã§è¨ˆç®—ã—ãŸéš›ã«é¡ä¼¼åº¦ãŒå‡ºåŠ›ã•ã‚Œã‚‹æ–‡æ›¸ãŒé™ã‚‰ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚
k-meansã§ã¯ä¸€åº¦ã‚¹ãƒ‘ãƒ¼ã‚¹ãªãƒãƒˆãƒªã‚¯ã‚¹ã‚’æ§‹ç¯‰ã—ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ãŒã€ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§åˆ†é¡ã‚’è¡Œãˆã°ã‚ã–ã‚ã–ç„¡é§„ãªãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã™ã‚‹å¿…è¦ãŒãªã‹ã£ãŸãªã¨ã€‚ã€‚

# Doc2Vecã§ç‰¹å¾´é‡ã‚’ä½œæˆã™ã‚‹åˆ©ç‚¹
* æ–‡æ›¸å†…ã®æ–‡è„ˆã‚’è€ƒæ…®å‡ºæ¥ã‚‹ï¼ˆBoWãŒå…¥åŠ›ã§ã¯ãªã„ï¼‰
* Word2VecãŒå…ƒã«ãªã£ã¦ã„ã‚‹ã®ã§ã€æ–‡æ›¸ã«é–¢é€£ã—ãŸwordã‚’å–å¾—å‡ºæ¥ã‚‹

# å‚è€ƒã‚³ãƒ¼ãƒ‰
ã‚³ãƒ¡ãƒ³ãƒˆã«æ—¥æœ¬èªã¨è‹±èªãŒæ··ã–ã£ã¦ã„ãŸã‚Šã€ã‹ãªã‚Šæ±šã„ã‚³ãƒ¼ãƒ‰ã§ç”³ã—è¨³æœ‰ã‚Šã¾ã›ã‚“ã€‚ã€‚

```:
# coding: utf-8

from gensim import corpora, models
import numpy as np
from numpy import random
random.seed(555)
from scipy.cluster.vq import vq, kmeans, whiten
from sklearn.decomposition import TruncatedSVD
from collections import defaultdict
from separatewords import MecabTokenize  # ç›®çš„ã«åˆã‚ã›ãŸå½¢æ…‹ç´ è§£æå™¨ã‚’å‘¼ã³ã ã—ã¦ä¸‹ã•ã„


class MyTexts:
    def __init__(self, text_list):
        self.text_list = text_list

    def __iter__(self):
        for line in self.text_list:
            if line==b&#39;æœªå…¥åŠ›&#39;: continue
            yield MecabTokenize.tokenize( line.rstrip().decode(&#39;utf-8&#39;) )


class LabeledLineSentence(object):
    def __init__(self, texts_words):
        self.texts_words = texts_words

    def __iter__(self):
        for uid, words in enumerate(self.texts_words):
            yield models.doc2vec.LabeledSentence(words, labels=[&#39;SENT_%s&#39; % uid])


# Doc2Vecã§å–å¾—ã—ãŸå„æ–‡ç« ã®é¡ä¼¼åº¦ã‚’matrixã«ã™ã‚‹
# ã¤ã„ã§ã«å„æ–‡ç« ã®ä»£è¡¨ãƒ¯ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹
def create_sim_vec(model,n_sent):
    base_name = &#39;SENT_&#39;
    sim_matrix = []
    sim_matrix_apd = sim_matrix.append
    word_matrix = []
    word_matrix_apd = word_matrix.append
    for i_sent in xrange(n_sent):
        sim_vec = np.zeros(n_sent)
        word_list = []
        word_list_apd = word_list.append
        # sentãŒå­˜åœ¨ã—ãªã„å ´åˆãŒã‚ã‚‹ã®ã§ã€ä¾‹å¤–å‡¦ç†ã‚’å…¥ã‚Œã¦ãŠã
        try:
            for word, sim_val in model.most_similar(base_name+str(i_sent)):
                if &#39;SENT_&#39; in word:
                    _, s_idx = word.split(&#39;_&#39;)
                    sim_vec[int(s_idx)] = sim_val
                else:
                    word_list_apd(word)
        except:
            pass
        sim_matrix_apd(sim_vec)
        word_matrix_apd(word_list)
    return sim_matrix, word_matrix

# kmeansã§é¡ä¼¼ã®æ–‡æ›¸ã‚’ã¾ã¨ã‚ã‚‹
def sent_integrate(sim_matrix,n_class):
    # æ¬¡å…ƒã”ã¨ã®åˆ†æ•£ã‚’å‡ä¸€ã«ã™ã‚‹
    whiten(sim_matrix)

    centroid, destortion = kmeans(sim_matrix, n_class, iter=100, thresh=1e-05)
    labels, dist = vq(sim_matrix, centroid)
    return labels

def count_class(labels):
    res_dic = defaultdict(int)
    for label in labels:
        res_dic[label] += 1
    return res_dic

def count_labeled_data(label_data, labels):
    result_dict = {}
    for orig_labels, label in zip(label_data, labels):
        labels = np.array(orig_labels.split(), dtype=np.int64)
        if label not in result_dict:
            result_dict[label] = labels
        else:
            result_dict[label] += labels
    return result_dict


if __name__==&#39;__main__&#39;:
    ifname = &#39;./out_data.csv&#39;
    model_basename = &#39;./D2V/doc2vec_result/model&#39;
    topic_result_basename = &#39;./D2V/doc2vec_result/topic&#39;

    comment_data = []
    comment_data_apd = comment_data.append
    label_data = []
    label_data_apd = label_data.append
    with open(ifname, &#39;r&#39;) as f:
        for line in f:
            single_flag, label_flags, comment = line.strip().split(&#39;\t&#39;)
            comment_data_apd(comment.strip())
            label_data_apd(label_flags.strip())

    texts = MyTexts(comment_data)
    sentences = LabeledLineSentence(texts)
    model = models.Doc2Vec(alpha=0.025, min_alpha=0.025)  # use fixed learning rate
    model.build_vocab(sentences)

    # store the model to mmap-able files
    model.save(model_basename+&#39;.d2v&#39;)

    # load the model back
    model_loaded = models.Doc2Vec.load(model_basename+&#39;.d2v&#39;)

    epoch = 10
    for _ in xrange(epoch):
        model.train(sentences)
        model.alpha -= 0.002  # decrease the learning rate
        model.min_alpha = model.alpha  # fix the learning rate, no decay
    print &#39;done training&#39;

    # show topic
    n_sent = len(comment_data)
    sent_matrix, word_matrix = create_sim_vec(model, n_sent)
    print &#39;done get sent_matrix&#39;

    ## é¡ä¼¼æ–‡æ›¸ã‚’ã¾ã¨ã‚ã‚‹
    # svdã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿åœ§ç¸®(ãƒ‡ãƒ¼ã‚¿ã‚’å¯†ã«ã™ã‚‹)
    np.savetxt(&#39;./D2V/sent_matrix&#39;, np.array(sent_matrix))
    dimension = 100
    lsa = TruncatedSVD(dimension)
    info_matrix = lsa.fit_transform(sent_matrix)
    np.savetxt(&#39;./D2V/info_matrix&#39;, np.array(info_matrix))

    # kmeansã®å®Ÿæ–½
    n_class = 7
    labels = sent_integrate(np.array(info_matrix),n_class)
    np.savetxt(&#39;./D2V/sent_labels.csv&#39;, labels,delimiter=&#39;,&#39;, fmt=&#39;%d&#39;)
    print count_class(labels)

    # äººé–“ãŒåˆ†é¡ã—ãŸã‚‚ã®ã¨ã®æ¯”è¼ƒ
    print count_labeled_data(label_data, labels)
```

ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ã€(0Â¥t1 0 1 0 0 0 0Â¥txxxx)ã§1è¡ŒãŒæ§‹æˆã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚
ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§7ã¤01ã®ãƒ•ãƒ©ã‚°ãŒç«‹ã£ã¦ã„ã‚‹ã®ãŒã€äººé–“ãŒä»˜ã‘ãŸãƒ©ãƒ™ãƒ«ã§ã™ã€‚

# ã‚³ãƒ¡ãƒ³ãƒˆ
å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã§ã®çµæœã‚’ä»˜ã‘ã¦ã„ãªã„ã®ã§ä¿¡æ†‘æ€§ãŒãªã„ã®ã§ã™ãŒã€
2000å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç›®è¦–ã§ç¢ºèªã—ã¦ã€8å‰²ç¨‹åº¦ã¯é•å’Œæ„Ÿã®ãªã„åˆ†é¡ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚
é€†ã«äººé–“ãŒä»˜ã‘ãŸãƒ©ãƒ™ãƒ«ã‚’è¦‹ã¦ã„ã¦æ„å‘³ä¸æ˜ãªã‚‚ã®ãŒ3å‰²ç¨‹åº¦ã‚ã‚Šã¾ã—ãŸã€‚
ï¼ˆæ„Ÿæ€§ã®é•ã„ãªã®ã‹ä½•ãªã®ã‹ã€‚ã€‚ã€‚ï¼‰

æœ€è¿‘ã€æ‰‹æ³•ã®èª¬æ˜ã‚„å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚’è¼‰ã›ãšã«è¨˜äº‹ã‚’å…¬é–‹ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã§
ä»Šå¾Œæ‰‹æŠœãã›ãšã«è¨˜äº‹ã‚’æ›¸ããŸã„ãªï¼ˆæ›¸ã‘ãŸã‚‰ã„ã„ãªï¼‰ã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
ãŠæ‰‹æ•°ã§ã™ãŒé–“é•ã„ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã”æŒ‡æ‘˜ã„ãŸã ã‘ã¾ã™ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚
</textarea><input type="submit" name="commit" value="Save changes" data-disable-with="Save changes" /></form></div></section></div><div class="col-sm-3"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ by @shima_x on @Qiita" data-url="http://qiita.com/shima_x/items/196e8d823412e45680e9" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡" href="http://b.hatena.ne.jp/entry/http://qiita.com/shima_x/items/196e8d823412e45680e9" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/shima_x/items/196e8d823412e45680e9" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/shima_x/items/196e8d823412e45680e9" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div><section class="itemsShowAuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><a href="/shima_x"><img alt="" class="itemsShowAuthorInfo_userIcon" itemprop="image" src="https://qiita-image-store.s3.amazonaws.com/0/12767/profile-images/1473682529" /></a><div class="itemsShowAuthorInfo_profileStats"><strong class="itemsShowAuthorInfo_userName" itemprop="name"><a itemprop="url" href="/shima_x">shima_x</a></strong><div class="itemsShowAuthorInfo_contribution"><span class="itemsShowAuthorInfo_count">1349</span><span class="itemsShowAuthorInfo_unit">Contribution</span></div><div id="js-react-on-rails-context" data-rails-context="{}"></div>
<div class="js-react-on-rails-component" data-component-name="UserFollowButton" data-props="{&quot;initial_followed_by&quot;:false,&quot;position&quot;:&quot;author-info&quot;,&quot;size&quot;:&quot;btn-xs&quot;,&quot;url_name&quot;:&quot;shima_x&quot;}" data-trace="false" data-dom-id="UserFollowButton-react-component-a3c85ddb-6a0b-4d4b-84f4-242a460d7de5"></div>
    <div id="UserFollowButton-react-component-a3c85ddb-6a0b-4d4b-84f4-242a460d7de5"></div>
    
</div><section class="itemsShowAuthorPopularItems"><h5 class="itemsShowAuthorPopularItems_sectionTitle">äººæ°—ã®æŠ•ç¨¿</h5><ul class="itemsShowAuthorPopularItems_posts list-unstyled"><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/shima_x/items/196e8d823412e45680e9">Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/shima_x/items/a42c4b5de23bedb3b828">ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã§å¤‰åŒ–ç‚¹æ¤œçŸ¥</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/shima_x/items/e0cd6cd85dd857467c79">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒˆãƒ¬ãƒ¼ãƒ‰ã®å¼·åŒ–å­¦ç¿’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ãŸ</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/shima_x/items/59467952356ce632a8e2">ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åˆ†é¡å™¨ã®æ¯”è¼ƒ</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/shima_x/items/9829a1271ba7798c08b9">ç°¡å˜ãªãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆã®ç†è«–ã¨å®Ÿè£…</a></li></ul></section></section><div class="scroll-chaser"><div class="google-adsense"><style>.test-text-responsible { width: 200px; height: 200px; }@media(min-width: 1200px) {  .test-text-responsible { width: 250px; height: 250px; }}@media(max-width: 979px) and (min-width: 768px) {  .test-text-responsible { width: 120px; height: 240px; }}@media(max-width: 767px) {  .test-text-responsible { width: 320px; height: 50px; }}</style><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle test-text-responsible" data-ad-client="ca-pub-8127218772604357" data-ad-slot="3880091879" style="display:inline-block"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div><div class="js-react-on-rails-component" data-component-name="Toc" data-props="{&quot;body&quot;:&quot;\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E4%BA%BA%E9%96%93%E3%81%8C%E3%83%A9%E3%83%99%E3%83%AB%E4%BB%98%E3%81%91%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AB%E3%82%88%E3%82%8B%E5%95%8F%E9%A1%8C%E7%82%B9\&quot;\u003eäººé–“ãŒãƒ©ãƒ™ãƒ«ä»˜ã‘ã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹å•é¡Œç‚¹\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99\&quot;\u003eå‚è€ƒè³‡æ–™\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%82%84%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\&quot;\u003eã‚„ã£ãŸã“ã¨\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#doc2vec%E3%81%A7%E7%89%B9%E5%BE%B4%E9%87%8F%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E5%88%A9%E7%82%B9\&quot;\u003eDoc2Vecã§ç‰¹å¾´é‡ã‚’ä½œæˆã™ã‚‹åˆ©ç‚¹\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%82%E8%80%83%E3%82%B3%E3%83%BC%E3%83%89\&quot;\u003eå‚è€ƒã‚³ãƒ¼ãƒ‰\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88\&quot;\u003eã‚³ãƒ¡ãƒ³ãƒˆ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n&quot;,&quot;wrapper&quot;:&quot;#article-body-wrapper&quot;}" data-trace="false" data-dom-id="Toc-react-component-e055e7ee-b53f-4557-bc68-f2b0888c9628"></div>
    <div id="Toc-react-component-e055e7ee-b53f-4557-bc68-f2b0888c9628"></div>
    
</div></div><div class="row"><div class="col-sm-9"><div class="ArticleFooter__menu"><div class="s-flex-align-center"><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:116,&quot;show_count&quot;:true,&quot;uuid&quot;:&quot;196e8d823412e45680e9&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-footer&quot;}"></div><div class="ArticleFooter__userList"><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="yusukekondo0503"><a itemprop="url" href="/yusukekondo0503"><img alt="yusukekondo0503" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/56716/profile-images/1473761374" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="hoxo_m"><a itemprop="url" href="/hoxo_m"><img alt="hoxo_m" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/2570/profile-images/1478138583" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="kiichi54321"><a itemprop="url" href="/kiichi54321"><img alt="kiichi54321" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/43633/profile-images/1473689593" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="HirofumiYashima"><a itemprop="url" href="/HirofumiYashima"><img alt="HirofumiYashima" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/43487/profile-images/1473689546" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="saicologic"><a itemprop="url" href="/saicologic"><img alt="saicologic" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/2432/profile-images/1473681518" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="toohsk"><a itemprop="url" href="/toohsk"><img alt="toohsk" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/47270/profile-images/1473690928" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="Reds"><a itemprop="url" href="/Reds"><img alt="Reds" class="thumb thumb--xs" src="https://0.gravatar.com/avatar/e751888e30cdc35253c1a3b241977adf?d=https%3A%2F%2Fidenticons.github.com%2F0e2f15414d97b8b642022be91ff105e0.png" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="canard0328"><a itemprop="url" href="/canard0328"><img alt="canard0328" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/52533/profile-images/1473692763" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="mero"><a itemprop="url" href="/mero"><img alt="mero" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/63104/profile-images/1473696161" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="NaohiroKashimoto"><a itemprop="url" href="/NaohiroKashimoto"><img alt="NaohiroKashimoto" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/11055/profile-images/1473681901" /></a></div></div><div class="ArticleFooter__user"><a href="/shima_x/items/196e8d823412e45680e9/likers"><span class="fa fa-ellipsis-h"></span></a></div></div></div><div class="u-flex u-align-center"><div class="ArticleFooter__stock"><div class="js-stockbutton" data-position="footer_menu" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="ArticleFooter__editRequest"><a class="u-link-no-underline" data-toggle="tooltip" title="You can propose improvements about the article to the author ğŸ’ª" href="/drafts/196e8d823412e45680e9/edit"><span class="fa fa-send-o fa-lg"></span> <span>Edit request</span></a></div><div class="dropdown ArticleFooter__dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a href="/shima_x/items/196e8d823412e45680e9.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><i class="fa fa-fw fa-flag"></i> Report article</a></li></ul></div></div></div><div class="itemsShowBody_articleColumnFooter"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡ by @shima_x on @Qiita" data-url="http://qiita.com/shima_x/items/196e8d823412e45680e9" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="Doc2Vecã¨k-meansã§æ•™å¸«ãªã—ãƒ†ã‚­ã‚¹ãƒˆåˆ†é¡" href="http://b.hatena.ne.jp/entry/http://qiita.com/shima_x/items/196e8d823412e45680e9" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/shima_x/items/196e8d823412e45680e9" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/shima_x/items/196e8d823412e45680e9" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div></div><div class="itemsShowComment_wrapper" id="comments"><div class="js-react-on-rails-component" data-component-name="CommentListContainer" data-props="{&quot;currentUser&quot;:null,&quot;initialComments&quot;:[],&quot;monthly_public_image_uploadable_size_limit&quot;:null,&quot;total_uploaded_public_image_size_in_current_month&quot;:null,&quot;item&quot;:{&quot;id&quot;:304964,&quot;uuid&quot;:&quot;196e8d823412e45680e9&quot;,&quot;suspended&quot;:false,&quot;secret&quot;:false},&quot;owner&quot;:{&quot;url_name&quot;:&quot;shima_x&quot;},&quot;is_team&quot;:false,&quot;is_project&quot;:false,&quot;logged_in&quot;:false,&quot;polling&quot;:false,&quot;mention_candidates&quot;:[{&quot;id&quot;:12767,&quot;url_name&quot;:&quot;shima_x&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/12767/profile-images/1473682529&quot;}]}" data-trace="false" data-dom-id="CommentListContainer-react-component-f5d27e67-f3cd-490d-8525-f16ea71327de"></div>
    <div id="CommentListContainer-react-component-f5d27e67-f3cd-490d-8525-f16ea71327de"></div>
    
</div></div></div></div></article><div class="js-report-form modal fade reportForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Report article</h4></div><div class="modal-body"><form action="/reports" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="ZPCvn5Pa0ZGpNedOCBsd2tKudYkM6f+3AjITjGlXO9Bzl0sobZb6B9pNY3Q1bfBgHBy+tzbqkaPBj9prZ8VtlQ==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/shima_x/items/196e8d823412e45680e9" /><input type="hidden" name="item_uuid" id="item_uuid" value="196e8d823412e45680e9" /><p>Help us understand the problem. What is going on with this item?</p><br /><div class="form-group"><ul class="list-unstyled"><li><label><input type="radio" name="report_type" id="report_type_spam" value="spam" required="required" /> It&#39;s spam </label></li><li><label><input type="radio" name="report_type" id="report_type_harassment" value="harassment" required="required" /> It&#39;s abusive or harmful </label></li><li><label><input type="radio" name="report_type" id="report_type_inappropriate_content" value="inappropriate_content" required="required" /> It contains inappropriate content </label></li></ul></div><div class="reportForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary reportForm_submitButton"><i class="fa fa-send"></i> Submit</button></div></form></div></div></div></div><script id="js-item" type="application/json">{ "url": "http://qiita.com/shima_x/items/196e8d823412e45680e9", "id": 304964, "uuid": "196e8d823412e45680e9" }</script><script class="js-user" type="application/json">{&quot;id&quot;:12767,&quot;url_name&quot;:&quot;shima_x&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/12767/profile-images/1473682529&quot;}</script><script language="JavaScript" src="//cdn.bigmining.com/private/js/qiita_bigmining.js" type="text/javascript"></script></div><footer class="footer"><div class="footer_inner"><div class="footer_container"><ul class="footer_links-left"><li class="footer_link"><a class="footer_copyright" href="http://increments.co.jp">Â© 2011-2017 Increments Inc.</a></li><li class="footer_link"><a href="http://qiita.com/terms">Terms</a></li><li class="footer_link"><a href="http://qiita.com/privacy">Privacy</a></li><li class="footer_link"><a href="http://help.qiita.com">Help</a></li><li class="footer_link"><a href="https://increments.zendesk.com/anonymous_requests/new">Contact</a></li></ul><ul class="footer_links-right"><li class="footer_link"><a href="http://qiita.com/about">About</a></li><li class="footer_link"><a href="/users">Users</a></li><li class="footer_link"><a href="/tags">Tags</a></li><li class="footer_link"><a href="http://blog.qiita.com">Blog</a></li><li class="footer_link"><a href="http://qiita.com/api/v2/docs">API</a></li><li class="footer_link"><a href="https://teams.qiita.com/">Team</a></li><li class="footer_link"><a href="http://kobito.qiita.com">Kobito</a></li><li class="footer_link"><a class="js-public-form-feedback-link" data-target=".js-feedback-form" data-toggle="modal" href=""><i class="fa fa-heart"></i> Feedback <i class="fa fa-caret-down"></i></a></li></ul></div></div></footer><div class="js-feedback-form modal fade feedbackForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Feedback</h4></div><div class="modal-body"><form class="js-feedback-form-form" action="/feedbacks" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="a505BHMDlBAuNeOgfUog2wPMfwazr2fsnRdMvygchE58+t2zjU+/hl1NZ5pAPM1hzX60OImsCfheqoVYJo7SCw==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/shima_x/items/196e8d823412e45680e9" /><div class="form-group"><textarea name="feedback[message]" id="feedback_message" class="form-control js-feedback-form-text-area" placeholder="Please give us any feedback about Qiita." required="required" rows="5">
</textarea></div><div class="feedbackForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary feedbackForm_submitButton"><i class="fa fa-send"></i> Submit</button><p class="feedbackForm_note">We don&#39;t reply to any feedback.<br />If you need help with Qiita, please send a support request from <a href="https://increments.zendesk.com/anonymous_requests/new">here</a>.</p></div><div style="position:fixed;top:-99999px;opacity:0.0001;"><input name="feedback[name]" type="text" /></div></form></div></div></div></div><script>// if (window.mixpanel instanceof Element) {
//   window.mixpanel = [];
// }
// (function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
// for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);</script><script src="http://cdn.qiita.com/assets/public-3af9c1d29a49f3320bb796fb5e75304b.min.js"></script><script>
  (function () {
    var script = document.getElementsByTagName('script')[0];
    var load = function (src, id) {
      var el = document.createElement('script');
      el.async = true;
      el.src = src;
      el.id = id;
      script.parentNode.insertBefore(el, script);
    };
      // Optimizely
      load('//cdn.optimizely.com/js/52738645.js', 'optimizely-jssdk');
      // Google Analytics
      window._gaq = window._gaq || [];
      var isCareer = location.hostname.split('.')[0] == 'career';
      if (isCareer) {
        window._gaq.push(['_setAccount', 'UA-24675221-11']);
        window._gaq.push(['_setDomainName', 'qiita.com']);
      } else {
        window._gaq.push(['_setAccount', 'UA-24675221-1']);
      }
      window._gaq.push(['_setCustomVar', 1, 'logged_in', 'false', 2]);
      window._gaq.push(['_trackPageview']);
      var src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      load(src, 'google-analytics-jssdk');
    // Google Analytics - Universal Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-24675221-12', {
          
        });
          ga('create', 'UA-45403601-1', { name: 'user' });
          ga('user.send', 'pageview');
        ga('set', 'dimension1', 'false');
        ga('set', 'dimension3', 'false');
      ga('require', 'displayfeatures');
      ga('set', 'forceSSL', true);
      ga('send', 'pageview');
    // Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TBQWPN');
  })();
</script>
</body></html>