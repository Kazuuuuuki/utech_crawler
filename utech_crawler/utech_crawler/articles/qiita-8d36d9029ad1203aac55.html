<!DOCTYPE html><html xmlns:og="http://ogp.me/ns#"><head><meta charset="UTF-8" /><title>機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~ - Qiita</title><meta content="width=device-width,initial-scale=1" name="viewport" /><meta content="


NEW GAME! フィルタを通した著者












NEW GAME! フィルタを通したドワンゴの風景









NEW GAME! というアニメはご存知でしょうか。女の子たちがワイワイとゲーム会社で働く日常を描いた作品で、非常に良い作品なのですが、一方でこんなキラキラした会社ねーよと言われた挙句、実はあそこにいるのは皆中年男性で、働きすぎて周りが皆美少女に見える幻覚が見えているのではないかという説まであったりします。ドワンゴのslackには..." name="description" /><meta content="summary" name="twitter:card" /><meta content="@Qiita" name="twitter:site" /><meta content="機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~ - Qiita" property="og:title" /><meta content="article" property="og:type" /><meta content="http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" property="og:url" /><meta content="http://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" property="og:image" /><meta content="| NEW GAME! フィルタを通した著者 |
|:-----------:|
|![myface2d_new.gif](https://qiita-image-store.s3.amazonaws.com/0/28934/5a61..." property="og:description" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><link rel="shortcut icon" type="image/x-icon" href="http://cdn.qiita.com/assets/favicons/public/production-4ff10c1e1e2b5fcb353ff9cafdd56c70.ico" /><link rel="apple-touch-icon" type="image/png" href="http://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link rel="stylesheet" media="all" href="http://cdn.qiita.com/assets/public-81dd63f4385f99b52aeab91266068ebd.min.css" /><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="xEpofoPZ7ZIomCp9ioSrIGDWrGkppFqHpA5n70ByqcSfhCVEs8VINfRm+MABTYkLDMzOpIHAsKu0SRW3kTY1LQ==" /></head><body class="without-js" id=""><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-TBQWPN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>
  document.body.className = document.body.className.replace('without-js', '') + ' with-js';
  window.Qiita = {"asset_host":"cdn.qiita.com","TLD":"com","controller_path":"public/items","controller_action":"public/items#show","controller":"items","action":"show","action_path":"public/items#show","env":"production","flash":{},"is_landing_page":false,"is_team_page":false,"request_parameters":{"controller":"public/items","action":"show","user_id":"Hi-king","type":"items","id":"8d36d9029ad1203aac55"},"root_domain":"qiita.com","variant":null,"config":{"mixpanel":{"career":"dd35af27e959781713d63fd7ca898a8d","per_team":"c0a2116368b33b44b5029ebd2cc9b094","public":"be87616606b0e26a87689099aab2c4e5","team":"b7c0342acba2dbc8742484d98788efb3"},"default_locale":"ja","locale":"en"},"team":null,"user":null,"GIT_BRANCH":null,"DEBUG":false};

</script>
<div class="headerContainer headerContainer-public" role="navigation"><div class="js-react-on-rails-component" data-component-name="HeaderContainer" data-props="{&quot;user&quot;:null,&quot;team&quot;:null,&quot;news&quot;:{&quot;type&quot;:&quot;募集&quot;,&quot;content&quot;:&quot;QiitaやQiita:Teamを良くしたいエンジニア&quot;,&quot;url&quot;:&quot;http://increments.co.jp/jobs/engineers?utm_source=qiita\u0026utm_medium=header_news&quot;},&quot;initial_unread_count&quot;:null,&quot;siteid_image&quot;:&quot;http://cdn.qiita.com/siteid-reverse.png&quot;,&quot;is_team_page&quot;:false,&quot;on_team_setting&quot;:false,&quot;show_post_menu&quot;:true,&quot;show_search_menu&quot;:true,&quot;is_fluid&quot;:false,&quot;locale&quot;:&quot;en&quot;}" data-trace="false" data-dom-id="HeaderContainer-react-component-df161b08-b092-4f04-98cd-bc60cd51d631"></div>
    <div id="HeaderContainer-react-component-df161b08-b092-4f04-98cd-bc60cd51d631"></div>
    
</div><div id="main"><script type="application/ld+json">{  "@context": "http://schema.org",  "@type": "BreadcrumbList",  "itemListElement": [    {      "@type": "ListItem",      "position": 1,      "item": {        "@id": "/",        "name": "Qiita"      }    },    {      "@type": "ListItem",      "position": 2,      "item": {        "@id": "/items",        "name": "Items"      }    },    {      "@type": "ListItem",      "position": 3,      "item": {        "@id": "/tags/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92",        "name": "機械学習"      }    }  ]}</script><article itemscope="" itemtype="http://schema.org/Article"><div class="ArticleMainHeader ArticleMainHeader--adcalItem"><div class="container"></div><div class="container"><div class="row s-flex-align-center"><div class="col-sm-9"><div class="adventCalendarRibbon"><span><a class="adventCalendarRibbon_title" href="/advent-calendar/2016/dwango">ドワンゴ Advent Calendar 2016</a> Day 1</span></div><h1 class="ArticleMainHeader__title" itemprop="headline">機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~</h1><ul class="TagList"><li class="TagList__item" data-count="1835"><a class="u-link-unstyled TagList__label" href="/tags/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92"><img alt="機械学習" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/a94d4d239b3b0b83723d5b56c050ffc54b8593e7/medium.jpg?1394635775" /><span>機械学習</span></a></li><li class="TagList__item" data-count="74"><a class="u-link-unstyled TagList__label" href="/tags/%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><img alt="アニメーション" class="TagList__icon" src="//cdn.qiita.com/assets/icons/medium/missing-2e17009a0b32a6423572b0e6dc56727e.png" /><span>アニメーション</span></a></li><li class="TagList__item" data-count="322"><a class="u-link-unstyled TagList__label" href="/tags/%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86"><img alt="画像処理" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/4c43dc9a30e781489de25e68c0325ddb3279016e/medium.jpg?1422923133" /><span>画像処理</span></a></li><li class="TagList__item" data-count="1075"><a class="u-link-unstyled TagList__label" href="/tags/DeepLearning"><img alt="DeepLearning" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/eac844d1d880a38fc3be5ebf534cad5182b64ebf/medium.jpg?1453002020" /><span>DeepLearning</span></a></li></ul></div><div class="col-sm-3"><div class="itemsShowHeaderStock"><ul class="list-unstyled itemsShowHeaderStock_statusList"><li><div class="itemsShowHeaderStock_count stock"><span class="fa fa-thumbs-up"></span><span class="js-likecount">197</span></div><div class="itemsShowHeaderStock_countText">Like</div></li><li><div class="itemsShowHeaderStock_count" content="0 UserComments" itemprop="commentCount"><span class="fa fa-comment"></span>0</div><div class="itemsShowHeaderStock_countText">Comment</div></li></ul></div><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:197,&quot;uuid&quot;:&quot;8d36d9029ad1203aac55&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-header&quot;}"></div><ul class="list-inline ArticleMainHeader__users"><li class="js-hovercard" data-hovercard-target-name="inoue0426"><a itemprop="url" href="/inoue0426"><img alt="inoue0426" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/53633/profile-images/1473693121" /></a></li><li class="js-hovercard" data-hovercard-target-name="gomi_ningen"><a itemprop="url" href="/gomi_ningen"><img alt="gomi_ningen" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/56771/profile-images/1473694109" /></a></li><li class="js-hovercard" data-hovercard-target-name="koki_cheese"><a itemprop="url" href="/koki_cheese"><img alt="koki_cheese" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/15818/profile-images/1473681695" /></a></li><li class="js-hovercard" data-hovercard-target-name="meronmks"><a itemprop="url" href="/meronmks"><img alt="meronmks" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/89306/profile-images/1483621271" /></a></li><li class="js-hovercard" data-hovercard-target-name="tosier"><a itemprop="url" href="/tosier"><img alt="tosier" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/110594/profile-images/1473711266" /></a></li><li class="js-hovercard" data-hovercard-target-name="pgkuroneru"><a itemprop="url" href="/pgkuroneru"><img alt="pgkuroneru" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/133020/profile-images/1480734225" /></a></li><li class="js-hovercard" data-hovercard-target-name="looseleaf"><a itemprop="url" href="/looseleaf"><img alt="looseleaf" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/121870/profile-images/1473715052" /></a></li><li class="js-hovercard" data-hovercard-target-name="taku_0401"><a itemprop="url" href="/taku_0401"><img alt="taku_0401" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/126517/profile-images/1473716589" /></a></li><li class="js-hovercard" data-hovercard-target-name="salty-vanilla"><a itemprop="url" href="/salty-vanilla"><img alt="salty-vanilla" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/136317/profile-images/1473719913" /></a></li><li class="js-hovercard" data-hovercard-target-name="rizumi"><a itemprop="url" href="/rizumi"><img alt="rizumi" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/117503/profile-images/1476977532" /></a></li><li><a href="/Hi-king/items/8d36d9029ad1203aac55/likers"><span class="fa fa-ellipsis-h"></span></a></li></ul></div></div></div></div><div class="ArticleAsideHeader"><div class="container"><div class="u-flex u-space-between"><div class="u-flex u-flex-wrap"><div class="u-flex u-align-center s-pdv-5 u-flex-wrap"><div class="ArticleAsideHeader__author"><a href="/Hi-king"><img class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/28934/profile-images/1473685273" alt="1473685273" /></a> <a class="u-link-unstyled" href="/Hi-king">Hi-king</a> </div><div class="ArticleAsideHeader__date"><meta content="2016-12-01T03:25:25+09:00" itemprop="datePublished" /><span data-toggle="tooltip" title="posted at 2016-12-01">Edited at <time datetime="2016-12-01T14:18:53+09:00" itemprop="dateModified">2016-12-01</time></span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"><div class="ArticleAsideHeader__revision"> <a data-toggle="tooltip" title="Revisions" href="/Hi-king/items/8d36d9029ad1203aac55/revisions"><span class="fa fa-history"></span></a><span class="ArticleAsideHeader__revisionCount">9</span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"></div></div><div class="u-flex u-align-center s-flex-justiry-between s-pdv-5 u-shrink-0"><div class="ArticleAsideHeader__stock"><div class="js-stockbutton" data-position="top" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h fa-lg"></span></a><ul class="dropdown-menu dropdown-menu-right"><li class="dropdown__item--mobile"><a href="/Hi-king/items/8d36d9029ad1203aac55/revisions"><span class="fa fa-fw fa-history"></span> Revisions<span>(9)</span></a></li><li><a href="/Hi-king/items/8d36d9029ad1203aac55.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><span class="fa fa-fw fa-flag"></span> Report article</a></li></ul></div></div></div></div></div><div class="container"><div class="row" id="article-body-wrapper"><div class="col-sm-9"><section class="markdownContent markdownContent-headingEnabled js-task-list-container clearfix position-relative" id="item-8d36d9029ad1203aac55" itemprop="articleBody"><table>
<thead>
<tr>
<th style="text-align: center">NEW GAME! フィルタを通した著者</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/5a61444b-f39c-138b-7500-dabe4738e5ff.gif" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/5a61444b-f39c-138b-7500-dabe4738e5ff.gif" alt="myface2d_new.gif"></a></td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th style="text-align: center">NEW GAME! フィルタを通したドワンゴの風景</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/671b83f7-3edb-4f0a-e38f-347831c4168b.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/671b83f7-3edb-4f0a-e38f-347831c4168b.png" alt="test.png"></a></td>
</tr>
</tbody>
</table>

<p><a href="http://newgame-anime.com/" rel="nofollow noopener" target="_blank">NEW GAME!</a> というアニメはご存知でしょうか。女の子たちがワイワイとゲーム会社で働く日常を描いた作品で、非常に良い作品なのですが、一方でこんなキラキラした会社ねーよと言われた挙句、実はあそこにいるのは皆中年男性で、働きすぎて周りが皆美少女に見える幻覚が見えているのではないかという説まであったりします。ドワンゴのslackには、バーチャル彼女生成系チャンネル#kanojo_createや、美少女変身願望チャンネル#become_bishoujoというものが存在するので、現実を捻じ曲げてしまう異もあながちあり得ない話ではないのではないかとも思ってしまいます。</p>

<p>私もそんな一人であり、そんな美しい幻覚なら喜んで受け入れよう、ということで作ったのがこのリアルタイムNEW GAME!フィルタです</p>

<h1>
<span id="似顔絵データが存在しない--転移学習" class="fragment"></span><a href="#%E4%BC%BC%E9%A1%94%E7%B5%B5%E3%83%87%E3%83%BC%E3%82%BF%E3%81%8C%E5%AD%98%E5%9C%A8%E3%81%97%E3%81%AA%E3%81%84--%E8%BB%A2%E7%A7%BB%E5%AD%A6%E7%BF%92"><i class="fa fa-link"></i></a>似顔絵データが存在しない = 転移学習</h1>

<p>さて、ここでやりたいのは、<strong>実写画像を入力として、その実写画像に似てはいるが、二次元美少女に見える画像を機械学習で生成する</strong>ことです。</p>

<p>まさにそのものズバリ、という研究はないのですが、シンプルに考えるなら、この問題は以下のようなネットワークで実現できることがわかります。</p>

<table>
<thead>
<tr>
<th style="text-align: center">最終的に作りたいネットワーク</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/622f2e5c-1a56-1f56-b6e2-257eb0821bfa.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/622f2e5c-1a56-1f56-b6e2-257eb0821bfa.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<p>しかし、このアイデアには問題があり、<strong>入力(実写)と出力(似顔絵)の対応付けられたデータセットが必要だが、それは手に入らない</strong>のです。自分には絵を描くスキルがないのに、絵を描かないと学習ができないというのは辛い問題です。</p>

<p>ここで、問題をいくつかのステップに分割することでどうにかこうにかやりくりして学習することを考えます。このように、そのものずばりのデータがない、などの理由でバシッと解けない問題を、複数の部分問題を順番に解いていくことで何とか解決する学習方法を転移学習と言います。</p>

<p>似顔絵ネットワークの学習は、次の3STEPに沿って進んでいきます。</p>

<table>
<thead>
<tr>
<th style="text-align: left">Step</th>
<th style="text-align: left">内容</th>
<th style="text-align: left">ネットワーク</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">1</td>
<td style="text-align: left">とりあえずなんらかの美少女が生成できるネットワーク</td>
<td style="text-align: left"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/7232746d-e9a3-f8c9-3f9e-71783a95b1cb.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/7232746d-e9a3-f8c9-3f9e-71783a95b1cb.png" alt="image"></a></td>
</tr>
<tr>
<td style="text-align: left">2</td>
<td style="text-align: left">入力のイラストに似せた美少女を複製できるネットワーク</td>
<td style="text-align: left"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/dfdc7e35-ed25-961c-efec-dc7d4c03354c.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/dfdc7e35-ed25-961c-efec-dc7d4c03354c.png" alt="image"></a></td>
</tr>
<tr>
<td style="text-align: left">3</td>
<td style="text-align: left">実写を入力として、それに近い美少女を生成できるネットワーク</td>
<td style="text-align: left"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/3828894e-247e-b82f-31ef-9a36e8f26772.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/3828894e-247e-b82f-31ef-9a36e8f26772.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<p>アーキテクチャの全体図は以下のようになり、青のGeneratorをどんどん強くする形になっています。</p>

<table>
<thead>
<tr>
<th style="text-align: center">転移学習アーキテクチャ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/936031f9-cf47-c59d-34dd-c7bb83d78eed.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/936031f9-cf47-c59d-34dd-c7bb83d78eed.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<h1>
<span id="step1-generator--ランダムイラストネットワーク" class="fragment"></span><a href="#step1-generator--%E3%83%A9%E3%83%B3%E3%83%80%E3%83%A0%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF"><i class="fa fa-link"></i></a>STEP1: Generator = ランダムイラストネットワーク</h1>

<table>
<thead>
<tr>
<th style="text-align: center">STEP1でやりたいこと</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/7232746d-e9a3-f8c9-3f9e-71783a95b1cb.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/7232746d-e9a3-f8c9-3f9e-71783a95b1cb.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<p>似顔絵生成の問題の第一歩として、まずは、様々なイラストを描くことができるネットワーク、を作ります。これは2016年に非常に盛り上がった手法で、沢山の先行研究があります</p>

<ul>
<li><a href="http://qiita.com/mattya/items/e5bfe5e04b9d2f0bbd47" id="reference-8bfb18813b7de50e743e">Chainerで顔イラストの自動生成
</a></li>
<li><a href="http://qiita.com/rezoolab/items/5cc96b6d31153e0c86bc" id="reference-e1f2004eb9e7290caaf5">Chainerを使ってコンピュータにイラストを描かせる
</a></li>
<li><a href="http://memo.sugyan.com/entry/20160516/1463359395" rel="nofollow noopener" target="_blank">TensorFlowによるDCGANでアイドルの顔画像生成</a></li>
</ul>

<p>ここでも、これらの例に漏れず、まずはGeneratorについて、DCGANを用いた学習を行います。ここでは、まだ実写のことは考えずに、イラストのデータだけを使って学習することができます。イラストは、<a href="https://nico-opendata.jp/ja/index.html" rel="nofollow noopener" target="_blank">nico-illustデータセット</a>から20万件ほどを用いて学習しました。</p>

<table>
<thead>
<tr>
<th style="text-align: center">Generatorの学習</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/cb37a92b-35cf-6e4c-bee3-068ce826bfa7.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/cb37a92b-35cf-6e4c-bee3-068ce826bfa7.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<p>詳細については前述のブログに任せますが、新しく、入力が実在のイラストか生成画像かを判別する赤色の <em>Discriminator</em> を導入し、これを騙すように青色の <em>Generator</em> をトレーニングすることで、Generatorが様々なイラストを描ける能力を獲得するものです。</p>

<table>
<thead>
<tr>
<th style="text-align: center">結果1: Generatorによって創作されたイラストたち</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/11245f59-a85b-1a0c-a542-54141f41616c.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/11245f59-a85b-1a0c-a542-54141f41616c.png" alt="generator_model_3010000.png"></a></td>
</tr>
</tbody>
</table>

<p>このトレーニングによって獲得した、イラストを描く能力、の結果はこちら⬆︎。それなりに納得のいくイラストができました。ただし、この段階では、<strong>こうこうこういうイラストを描いてくださいという注文をすることはできません</strong></p>

<h1>
<span id="step2-入力のイラストに似せたイラストを複製" class="fragment"></span><a href="#step2-%E5%85%A5%E5%8A%9B%E3%81%AE%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88%E3%81%AB%E4%BC%BC%E3%81%9B%E3%81%9F%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88%E3%82%92%E8%A4%87%E8%A3%BD"><i class="fa fa-link"></i></a>STEP2: 入力のイラストに似せたイラストを複製</h1>

<p>では、自分好みのイラストを描いてもらうにはどうしたらいいでしょうか。<br>
こちらに関しても、文章などで何らかの注文(条件)を追加する先行研究があります。<br>
今回は最終的に実写-&gt;イラストとしたいため、画像を条件として入力し、なるべくそれに近い画像を生成するように学習します。</p>

<table>
<thead>
<tr>
<th style="text-align: center">STEP2でやりたいこと</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/dfdc7e35-ed25-961c-efec-dc7d4c03354c.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/dfdc7e35-ed25-961c-efec-dc7d4c03354c.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<p>上図のように、STEP1で学習したVectorizerに加えて、Vectorizerというあらたなネットワークを導入し、これによって、 <strong>入力画像を復元できるGeneratorの入力パラメータを見つけます</strong></p>

<table>
<thead>
<tr>
<th style="text-align: center">Vectorizerの学習</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/8aeba268-8b9b-59df-fe08-fe8a6ea18a6e.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/8aeba268-8b9b-59df-fe08-fe8a6ea18a6e.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<p>学習の方法は上図の通りで、STEP1で学習したGeneratorをつかえば、ランダムなパラメータと、それをGeneratorに入れたときにできた画像を無限に用意できるので、それらを学習データとして、逆にもとのパラメータを復元するようにVectorizerを学習するのみです。</p>

<p>このSTEPが終わると、<strong>Generatorによって生成された画像であれば、ほぼ完璧に復元でき、一般のイラストもある程度再現できるようになります</strong>。ただし、このネットワークはイラストしか見たことがないので、<strong>実写画像については、まだ似顔絵を描くことはできません</strong></p>

<h1>
<span id="step3-実写画像を入力として似顔絵を生成" class="fragment"></span><a href="#step3-%E5%AE%9F%E5%86%99%E7%94%BB%E5%83%8F%E3%82%92%E5%85%A5%E5%8A%9B%E3%81%A8%E3%81%97%E3%81%A6%E4%BC%BC%E9%A1%94%E7%B5%B5%E3%82%92%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>STEP3: 実写画像を入力として似顔絵を生成</h1>

<table>
<thead>
<tr>
<th style="text-align: center">STEP3でやりたいこと</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/622f2e5c-1a56-1f56-b6e2-257eb0821bfa.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/622f2e5c-1a56-1f56-b6e2-257eb0821bfa.png" alt="image"></a></td>
</tr>
</tbody>
</table>

<p>さて、機械学習を専門とする人にはここが一番面白いところかと思います。いままで、イラストしか学習してこなかったネットワークにどうやって実写画像からの似顔絵生成を行わせるか。</p>

<p>まず、前提として、Generatorは何を入力してもイラストにしてくれるので、STEP2までのVectorizer-&gt;Generatorでも、何らかの顔イラストは生成することはできます。ここでやりたいのは、"入力実写画像の特徴を保った出力イラストを作る"という制約をどうやって学習させるか、です。たとえば、安直に、もとの入力と画像的に近いイラストを出力するように、と考えてしまうと、これは似顔絵ではなく実写画像そのままを作ってしまいます。</p>

<p>この問題を解決するためには、<strong>実写画像と似顔絵では共通しているべき特徴のみを保存する</strong>という方法が必要です。</p>

<table>
<thead>
<tr>
<th style="text-align: center">実写画像Vectorizerの学習</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/3828894e-247e-b82f-31ef-9a36e8f26772.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/3828894e-247e-b82f-31ef-9a36e8f26772.png" alt="image"></a></td>
</tr>
<tr>
<td style="text-align: center">実写画像 -&gt; Vectorizer -&gt; Generator -&gt; (似顔絵) -&gt; Classifier -&gt; 元の顔の特徴</td>
</tr>
</tbody>
</table>

<p>上図のように、新たにClassifierを導入し、一旦STEP2のVectorizer-&gt;Generatorを経由して、似顔絵を無理やり作り、その似顔絵から、 <strong>元の画像の特徴(若い、丸顔、くまがある etc...)を識別できるように、Classifier、Generator、Vectorizerをまとめて学習し直します</strong>。顔の特徴のタグがつけられてるデータセットとして、<a href="http://mmlab.ie.cuhk.edu.hk/projects/CelebA.html" rel="nofollow noopener" target="_blank">Large-scale CelebFaces Attributes (CelebA) Dataset<br>
</a> を利用しました。</p>

<p>なお、Vectorizer、Generator、Classiferともに5層のニューラルネットワークで構成しているので、STEP3まで至ると、まとめて15層の(ディープ)ニューラルネットワークとして扱っていることになります。</p>

<h1>
<span id="実験結果" class="fragment"></span><a href="#%E5%AE%9F%E9%A8%93%E7%B5%90%E6%9E%9C"><i class="fa fa-link"></i></a>実験結果</h1>

<p>ここまでで、すべてのステップの学習が終わりました。以下に、実際に実写画像を美少女に変換した結果を数枚載せます。</p>

<table>
<thead>
<tr>
<th style="text-align: center">なぜか我々が放り込まれている世界</th>
<th style="text-align: center">ほんとうの世界(美少女)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">
<a href="https://qiita-image-store.s3.amazonaws.com/0/28934/57f71b9b-216e-8ec9-c141-1d54627c2612.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/57f71b9b-216e-8ec9-c141-1d54627c2612.jpeg" alt="img_q1.jpg"></a><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/75be7964-c584-3c5a-2d53-cd0c0ecb023e.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/75be7964-c584-3c5a-2d53-cd0c0ecb023e.jpeg" alt="img_q4.jpg"></a><a href="http://dwango.co.jp/saiyo/people/field1.html" rel="nofollow noopener" target="_blank">ドワンゴ採用ページ</a>
</td>
<td style="text-align: center">
<a href="https://qiita-image-store.s3.amazonaws.com/0/28934/671b83f7-3edb-4f0a-e38f-347831c4168b.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/671b83f7-3edb-4f0a-e38f-347831c4168b.png" alt="test.png"></a><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/9911b1f1-4820-bcde-fdd9-4daa6f255f22.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/9911b1f1-4820-bcde-fdd9-4daa6f255f22.png" alt="test.png"></a>
</td>
</tr>
<tr>
<td style="text-align: center">
<a href="https://qiita-image-store.s3.amazonaws.com/0/28934/3af7db9c-c56a-cb6b-6033-35b44367910f.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/3af7db9c-c56a-cb6b-6033-35b44367910f.jpeg" alt="YUKA0I9A7452_TP_V.jpg"></a><a href="https://www.pakutaso.com/" class="autolink" rel="nofollow noopener" target="_blank">https://www.pakutaso.com/</a>
</td>
<td style="text-align: center"><a href="https://qiita-image-store.s3.amazonaws.com/0/28934/ea175e46-031e-b1b8-ef3a-d836b3bf2eae.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/28934/ea175e46-031e-b1b8-ef3a-d836b3bf2eae.png" alt="test.png"></a></td>
</tr>
</tbody>
</table>

<p>これらの実験結果から、髪型や顔向きについて保持しつつ、実写画像をいい感じに美少女画像に変換成功していることがわかります。また、眼鏡もギリギリ再現できているのですが、これはSTEP3の学習が進むことによって成功するようになりました。</p>

<p>多少重たい処理なのですが、手元のMacBookPro環境でも、webカメラから入力した画像を使ってほぼリアルタイムで動かすことができます。頑張ればすべての人間を美少女に変換するゴーグルも作れそうな気がします。Hololensが、ほしい！！</p>

<p>なお、コードと学習済みモデルは <a href="https://github.com/Hi-king/kawaii_creator" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/Hi-king/kawaii_creator</a> で公開しているので、ぜひお試しください。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<ul>
<li>実写とイラストの対応データセットがなくても、なんとか似顔絵ネットワークを学習することはできる</li>
<li>実写とイラストという、異なるドメインの学習を行うには、それぞれの問題を同一のネットワークを利用して順番に学習していく、転移学習が有効。</li>
</ul>

<h1>
<span id="参考文献" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><i class="fa fa-link"></i></a>参考文献</h1>

<ul>
<li>
<p>GAN</p>

<ul>
<li>論文: <a href="https://arxiv.org/abs/1511.06434" class="autolink" rel="nofollow noopener" target="_blank">https://arxiv.org/abs/1511.06434</a>

<ul>
<li>その実装:  <a href="https://github.com/mattya/chainer-DCGAN" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/mattya/chainer-DCGAN</a>
</li>
</ul>
</li>
<li>文章 -&gt; 画像生成

<ul>
<li>論文: <a href="https://arxiv.org/abs/1605.05396" class="autolink" rel="nofollow noopener" target="_blank">https://arxiv.org/abs/1605.05396</a>
</li>
<li>解説記事: <a href="http://www.slideshare.net/mmisono/generative-adversarial-text-to-image-synthesis" class="autolink" rel="nofollow noopener" target="_blank">http://www.slideshare.net/mmisono/generative-adversarial-text-to-image-synthesis</a> </li>
<li>解説記事: <a href="http://niconare.nicovideo.jp/watch/kn1626" class="autolink" rel="nofollow noopener" target="_blank">http://niconare.nicovideo.jp/watch/kn1626</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>顔認識</p>

<ul>
<li>論文: <a href="https://arxiv.org/abs/1509.06451" rel="nofollow noopener" target="_blank">From Facial Parts Responses to Face Detection: A Deep Learning Approach</a>
</li>
<li>データセット: <a href="http://mmlab.ie.cuhk.edu.hk/projects/CelebA.html" rel="nofollow noopener" target="_blank">Large-scale CelebFaces Attributes (CelebA) Dataset
</a>
</li>
</ul>
</li>
<li>
<p>クロスドメインの学習</p>

<ul>
<li>論文: <a href="https://www.eecs.qmul.ac.uk/~qian/Project_cvpr16.html" class="autolink" rel="nofollow noopener" target="_blank">https://www.eecs.qmul.ac.uk/~qian/Project_cvpr16.html</a>
</li>
</ul>
</li>
</ul>
<div class="hidden"><form class="js-task-list-update" action="/Hi-king/items/8d36d9029ad1203aac55" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="PhiUgG6OjIiFfH/gX9LzHIhPdC6I06FDjvIUM6La0pxl1tm6XpIpL1mCrV3UG9E35FUW4yC3S2+etWZrc55OdQ==" /><input type="hidden" name="updated_at_confirmation_in_unixtime" id="updated_at_confirmation_in_unixtime" value="1480569533" class="js-task-list-updated-at" /><textarea name="raw_body" id="raw_body" class="js-task-list-field">
| NEW GAME! フィルタを通した著者 |
|:-----------:|
|![myface2d_new.gif](https://qiita-image-store.s3.amazonaws.com/0/28934/5a61444b-f39c-138b-7500-dabe4738e5ff.gif)|


| NEW GAME! フィルタを通したドワンゴの風景 |
|:-----------:|
|![test.png](https://qiita-image-store.s3.amazonaws.com/0/28934/671b83f7-3edb-4f0a-e38f-347831c4168b.png)|


[NEW GAME!](http://newgame-anime.com/) というアニメはご存知でしょうか。女の子たちがワイワイとゲーム会社で働く日常を描いた作品で、非常に良い作品なのですが、一方でこんなキラキラした会社ねーよと言われた挙句、実はあそこにいるのは皆中年男性で、働きすぎて周りが皆美少女に見える幻覚が見えているのではないかという説まであったりします。ドワンゴのslackには、バーチャル彼女生成系チャンネル#kanojo_createや、美少女変身願望チャンネル#become_bishoujoというものが存在するので、現実を捻じ曲げてしまう異もあながちあり得ない話ではないのではないかとも思ってしまいます。

私もそんな一人であり、そんな美しい幻覚なら喜んで受け入れよう、ということで作ったのがこのリアルタイムNEW GAME!フィルタです

似顔絵データが存在しない = 転移学習
====================================

さて、ここでやりたいのは、**実写画像を入力として、その実写画像に似てはいるが、二次元美少女に見える画像を機械学習で生成する**ことです。

まさにそのものズバリ、という研究はないのですが、シンプルに考えるなら、この問題は以下のようなネットワークで実現できることがわかります。

|最終的に作りたいネットワーク|
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/622f2e5c-1a56-1f56-b6e2-257eb0821bfa.png)|

しかし、このアイデアには問題があり、**入力(実写)と出力(似顔絵)の対応付けられたデータセットが必要だが、それは手に入らない**のです。自分には絵を描くスキルがないのに、絵を描かないと学習ができないというのは辛い問題です。

ここで、問題をいくつかのステップに分割することでどうにかこうにかやりくりして学習することを考えます。このように、そのものずばりのデータがない、などの理由でバシッと解けない問題を、複数の部分問題を順番に解いていくことで何とか解決する学習方法を転移学習と言います。

似顔絵ネットワークの学習は、次の3STEPに沿って進んでいきます。

| Step | 内容 | ネットワーク |
|:-----------|:------------|:------------|
|1|とりあえずなんらかの美少女が生成できるネットワーク| ![image](https://qiita-image-store.s3.amazonaws.com/0/28934/7232746d-e9a3-f8c9-3f9e-71783a95b1cb.png)|
|2|入力のイラストに似せた美少女を複製できるネットワーク|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/dfdc7e35-ed25-961c-efec-dc7d4c03354c.png)|
|3|実写を入力として、それに近い美少女を生成できるネットワーク|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/3828894e-247e-b82f-31ef-9a36e8f26772.png)|

アーキテクチャの全体図は以下のようになり、青のGeneratorをどんどん強くする形になっています。

|転移学習アーキテクチャ|
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/936031f9-cf47-c59d-34dd-c7bb83d78eed.png)|

STEP1: Generator = ランダムイラストネットワーク
==============================================

| STEP1でやりたいこと |
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/7232746d-e9a3-f8c9-3f9e-71783a95b1cb.png)|

似顔絵生成の問題の第一歩として、まずは、様々なイラストを描くことができるネットワーク、を作ります。これは2016年に非常に盛り上がった手法で、沢山の先行研究があります

* [Chainerで顔イラストの自動生成
](http://qiita.com/mattya/items/e5bfe5e04b9d2f0bbd47)
* [Chainerを使ってコンピュータにイラストを描かせる
](http://qiita.com/rezoolab/items/5cc96b6d31153e0c86bc)
* [TensorFlowによるDCGANでアイドルの顔画像生成](http://memo.sugyan.com/entry/20160516/1463359395)

ここでも、これらの例に漏れず、まずはGeneratorについて、DCGANを用いた学習を行います。ここでは、まだ実写のことは考えずに、イラストのデータだけを使って学習することができます。イラストは、[nico-illustデータセット](https://nico-opendata.jp/ja/index.html)から20万件ほどを用いて学習しました。

| Generatorの学習 |
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/cb37a92b-35cf-6e4c-bee3-068ce826bfa7.png)|

詳細については前述のブログに任せますが、新しく、入力が実在のイラストか生成画像かを判別する赤色の _Discriminator_ を導入し、これを騙すように青色の _Generator_ をトレーニングすることで、Generatorが様々なイラストを描ける能力を獲得するものです。

| 結果1: Generatorによって創作されたイラストたち |
|:-----------:|
|![generator_model_3010000.png](https://qiita-image-store.s3.amazonaws.com/0/28934/11245f59-a85b-1a0c-a542-54141f41616c.png)|

このトレーニングによって獲得した、イラストを描く能力、の結果はこちら⬆︎。それなりに納得のいくイラストができました。ただし、この段階では、**こうこうこういうイラストを描いてくださいという注文をすることはできません**

STEP2: 入力のイラストに似せたイラストを複製
==========================================

では、自分好みのイラストを描いてもらうにはどうしたらいいでしょうか。
こちらに関しても、文章などで何らかの注文(条件)を追加する先行研究があります。
今回は最終的に実写-&gt;イラストとしたいため、画像を条件として入力し、なるべくそれに近い画像を生成するように学習します。

| STEP2でやりたいこと |
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/dfdc7e35-ed25-961c-efec-dc7d4c03354c.png)|

上図のように、STEP1で学習したVectorizerに加えて、Vectorizerというあらたなネットワークを導入し、これによって、 **入力画像を復元できるGeneratorの入力パラメータを見つけます**

| Vectorizerの学習 |
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/8aeba268-8b9b-59df-fe08-fe8a6ea18a6e.png)|

学習の方法は上図の通りで、STEP1で学習したGeneratorをつかえば、ランダムなパラメータと、それをGeneratorに入れたときにできた画像を無限に用意できるので、それらを学習データとして、逆にもとのパラメータを復元するようにVectorizerを学習するのみです。

このSTEPが終わると、**Generatorによって生成された画像であれば、ほぼ完璧に復元でき、一般のイラストもある程度再現できるようになります**。ただし、このネットワークはイラストしか見たことがないので、**実写画像については、まだ似顔絵を描くことはできません**

STEP3: 実写画像を入力として似顔絵を生成
==========================================

|STEP3でやりたいこと|
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/622f2e5c-1a56-1f56-b6e2-257eb0821bfa.png)|

さて、機械学習を専門とする人にはここが一番面白いところかと思います。いままで、イラストしか学習してこなかったネットワークにどうやって実写画像からの似顔絵生成を行わせるか。

まず、前提として、Generatorは何を入力してもイラストにしてくれるので、STEP2までのVectorizer-&gt;Generatorでも、何らかの顔イラストは生成することはできます。ここでやりたいのは、&quot;入力実写画像の特徴を保った出力イラストを作る&quot;という制約をどうやって学習させるか、です。たとえば、安直に、もとの入力と画像的に近いイラストを出力するように、と考えてしまうと、これは似顔絵ではなく実写画像そのままを作ってしまいます。

この問題を解決するためには、**実写画像と似顔絵では共通しているべき特徴のみを保存する**という方法が必要です。

| 実写画像Vectorizerの学習 |
|:-----------:|
|![image](https://qiita-image-store.s3.amazonaws.com/0/28934/3828894e-247e-b82f-31ef-9a36e8f26772.png)|
|実写画像 -&gt; Vectorizer -&gt; Generator -&gt; (似顔絵) -&gt; Classifier -&gt; 元の顔の特徴|

上図のように、新たにClassifierを導入し、一旦STEP2のVectorizer-&gt;Generatorを経由して、似顔絵を無理やり作り、その似顔絵から、 **元の画像の特徴(若い、丸顔、くまがある etc...)を識別できるように、Classifier、Generator、Vectorizerをまとめて学習し直します**。顔の特徴のタグがつけられてるデータセットとして、[Large-scale CelebFaces Attributes (CelebA) Dataset
](http://mmlab.ie.cuhk.edu.hk/projects/CelebA.html) を利用しました。

なお、Vectorizer、Generator、Classiferともに5層のニューラルネットワークで構成しているので、STEP3まで至ると、まとめて15層の(ディープ)ニューラルネットワークとして扱っていることになります。

実験結果
===========================================

ここまでで、すべてのステップの学習が終わりました。以下に、実際に実写画像を美少女に変換した結果を数枚載せます。

| なぜか我々が放り込まれている世界 | ほんとうの世界(美少女) |
|:-----------:|:-----------:|
|![img_q1.jpg](https://qiita-image-store.s3.amazonaws.com/0/28934/57f71b9b-216e-8ec9-c141-1d54627c2612.jpeg)![img_q4.jpg](https://qiita-image-store.s3.amazonaws.com/0/28934/75be7964-c584-3c5a-2d53-cd0c0ecb023e.jpeg)[ドワンゴ採用ページ](http://dwango.co.jp/saiyo/people/field1.html)|![test.png](https://qiita-image-store.s3.amazonaws.com/0/28934/671b83f7-3edb-4f0a-e38f-347831c4168b.png)![test.png](https://qiita-image-store.s3.amazonaws.com/0/28934/9911b1f1-4820-bcde-fdd9-4daa6f255f22.png)|
|![YUKA0I9A7452_TP_V.jpg](https://qiita-image-store.s3.amazonaws.com/0/28934/3af7db9c-c56a-cb6b-6033-35b44367910f.jpeg)https://www.pakutaso.com/|![test.png](https://qiita-image-store.s3.amazonaws.com/0/28934/ea175e46-031e-b1b8-ef3a-d836b3bf2eae.png)|

これらの実験結果から、髪型や顔向きについて保持しつつ、実写画像をいい感じに美少女画像に変換成功していることがわかります。また、眼鏡もギリギリ再現できているのですが、これはSTEP3の学習が進むことによって成功するようになりました。

多少重たい処理なのですが、手元のMacBookPro環境でも、webカメラから入力した画像を使ってほぼリアルタイムで動かすことができます。頑張ればすべての人間を美少女に変換するゴーグルも作れそうな気がします。Hololensが、ほしい！！

なお、コードと学習済みモデルは https://github.com/Hi-king/kawaii_creator で公開しているので、ぜひお試しください。

まとめ
===========================================

* 実写とイラストの対応データセットがなくても、なんとか似顔絵ネットワークを学習することはできる
* 実写とイラストという、異なるドメインの学習を行うには、それぞれの問題を同一のネットワークを利用して順番に学習していく、転移学習が有効。

参考文献
===========

* GAN
    * 論文: https://arxiv.org/abs/1511.06434
        * その実装:  https://github.com/mattya/chainer-DCGAN
    * 文章 -&gt; 画像生成
        * 論文: https://arxiv.org/abs/1605.05396
        * 解説記事: http://www.slideshare.net/mmisono/generative-adversarial-text-to-image-synthesis 
        * 解説記事: http://niconare.nicovideo.jp/watch/kn1626

* 顔認識
    * 論文: [From Facial Parts Responses to Face Detection: A Deep Learning Approach](https://arxiv.org/abs/1509.06451)
    * データセット: [Large-scale CelebFaces Attributes (CelebA) Dataset
](http://mmlab.ie.cuhk.edu.hk/projects/CelebA.html)

* クロスドメインの学習
    * 論文: https://www.eecs.qmul.ac.uk/~qian/Project_cvpr16.html
</textarea><input type="submit" name="commit" value="Save changes" data-disable-with="Save changes" /></form></div></section></div><div class="col-sm-3"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~ on @Qiita" data-url="http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~" href="http://b.hatena.ne.jp/entry/http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div><section class="itemsShowAuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><a href="/Hi-king"><img alt="" class="itemsShowAuthorInfo_userIcon" itemprop="image" src="https://qiita-image-store.s3.amazonaws.com/0/28934/profile-images/1473685273" /></a><div class="itemsShowAuthorInfo_profileStats"><strong class="itemsShowAuthorInfo_userName" itemprop="name"><a itemprop="url" href="/Hi-king">Hi-king</a></strong><div class="itemsShowAuthorInfo_contribution"><span class="itemsShowAuthorInfo_count">366</span><span class="itemsShowAuthorInfo_unit">Contribution</span></div><div id="js-react-on-rails-context" data-rails-context="{}"></div>
<div class="js-react-on-rails-component" data-component-name="UserFollowButton" data-props="{&quot;initial_followed_by&quot;:false,&quot;position&quot;:&quot;author-info&quot;,&quot;size&quot;:&quot;btn-xs&quot;,&quot;url_name&quot;:&quot;Hi-king&quot;}" data-trace="false" data-dom-id="UserFollowButton-react-component-02bc1177-d2c8-4d76-8f98-7090ddd7405f"></div>
    <div id="UserFollowButton-react-component-02bc1177-d2c8-4d76-8f98-7090ddd7405f"></div>
    
</div><section class="itemsShowAuthorPopularItems"><h5 class="itemsShowAuthorPopularItems_sectionTitle">Popular Posts</h5><ul class="itemsShowAuthorPopularItems_posts list-unstyled"><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/Hi-king/items/8d36d9029ad1203aac55">機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/Hi-king/items/a8485557095692f1bf13">.gitignoreでホワイトリストを使う</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/Hi-king/items/1e3e9aaae4195e3542c8">pythonの辞書で，存在しないキーにアクセスされたら任意の値で初期化する</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/Hi-king/items/1256ae3cbfafa8471f64">OpenToonzのプラグインを作るよ~ネガポジ反転</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/Hi-king/items/d2ab7df3511e75fc8318">windowsから送られてきたzipファイルを解凍するとファイル名が大変なことになっている時</a></li></ul></section></section><div class="scroll-chaser"><div class="google-adsense"><style>.test-text-responsible { width: 200px; height: 200px; }@media(min-width: 1200px) {  .test-text-responsible { width: 250px; height: 250px; }}@media(max-width: 979px) and (min-width: 768px) {  .test-text-responsible { width: 120px; height: 240px; }}@media(max-width: 767px) {  .test-text-responsible { width: 320px; height: 50px; }}</style><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle test-text-responsible" data-ad-client="ca-pub-8127218772604357" data-ad-slot="3880091879" style="display:inline-block"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div><div class="js-react-on-rails-component" data-component-name="Toc" data-props="{&quot;body&quot;:&quot;\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E4%BC%BC%E9%A1%94%E7%B5%B5%E3%83%87%E3%83%BC%E3%82%BF%E3%81%8C%E5%AD%98%E5%9C%A8%E3%81%97%E3%81%AA%E3%81%84--%E8%BB%A2%E7%A7%BB%E5%AD%A6%E7%BF%92\&quot;\u003e似顔絵データが存在しない = 転移学習\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#step1-generator--%E3%83%A9%E3%83%B3%E3%83%80%E3%83%A0%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF\&quot;\u003eSTEP1: Generator = ランダムイラストネットワーク\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#step2-%E5%85%A5%E5%8A%9B%E3%81%AE%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88%E3%81%AB%E4%BC%BC%E3%81%9B%E3%81%9F%E3%82%A4%E3%83%A9%E3%82%B9%E3%83%88%E3%82%92%E8%A4%87%E8%A3%BD\&quot;\u003eSTEP2: 入力のイラストに似せたイラストを複製\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#step3-%E5%AE%9F%E5%86%99%E7%94%BB%E5%83%8F%E3%82%92%E5%85%A5%E5%8A%9B%E3%81%A8%E3%81%97%E3%81%A6%E4%BC%BC%E9%A1%94%E7%B5%B5%E3%82%92%E7%94%9F%E6%88%90\&quot;\u003eSTEP3: 実写画像を入力として似顔絵を生成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%AE%9F%E9%A8%93%E7%B5%90%E6%9E%9C\&quot;\u003e実験結果\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%81%BE%E3%81%A8%E3%82%81\&quot;\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\&quot;\u003e参考文献\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n&quot;,&quot;wrapper&quot;:&quot;#article-body-wrapper&quot;}" data-trace="false" data-dom-id="Toc-react-component-7fbf0d49-1e57-4642-926e-8b015872235a"></div>
    <div id="Toc-react-component-7fbf0d49-1e57-4642-926e-8b015872235a"></div>
    
</div></div><div class="row"><div class="col-sm-9"><div class="ArticleFooter__menu"><div class="s-flex-align-center"><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:197,&quot;show_count&quot;:true,&quot;uuid&quot;:&quot;8d36d9029ad1203aac55&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-footer&quot;}"></div><div class="ArticleFooter__userList"><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="inoue0426"><a itemprop="url" href="/inoue0426"><img alt="inoue0426" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/53633/profile-images/1473693121" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="gomi_ningen"><a itemprop="url" href="/gomi_ningen"><img alt="gomi_ningen" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/56771/profile-images/1473694109" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="koki_cheese"><a itemprop="url" href="/koki_cheese"><img alt="koki_cheese" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/15818/profile-images/1473681695" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="meronmks"><a itemprop="url" href="/meronmks"><img alt="meronmks" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/89306/profile-images/1483621271" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="tosier"><a itemprop="url" href="/tosier"><img alt="tosier" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/110594/profile-images/1473711266" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="pgkuroneru"><a itemprop="url" href="/pgkuroneru"><img alt="pgkuroneru" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/133020/profile-images/1480734225" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="looseleaf"><a itemprop="url" href="/looseleaf"><img alt="looseleaf" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/121870/profile-images/1473715052" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="taku_0401"><a itemprop="url" href="/taku_0401"><img alt="taku_0401" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/126517/profile-images/1473716589" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="salty-vanilla"><a itemprop="url" href="/salty-vanilla"><img alt="salty-vanilla" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/136317/profile-images/1473719913" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="rizumi"><a itemprop="url" href="/rizumi"><img alt="rizumi" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/117503/profile-images/1476977532" /></a></div></div><div class="ArticleFooter__user"><a href="/Hi-king/items/8d36d9029ad1203aac55/likers"><span class="fa fa-ellipsis-h"></span></a></div></div></div><div class="u-flex u-align-center"><div class="ArticleFooter__stock"><div class="js-stockbutton" data-position="footer_menu" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="ArticleFooter__editRequest"><a class="u-link-no-underline" data-toggle="tooltip" title="You can propose improvements about the article to the author 💪" href="/drafts/8d36d9029ad1203aac55/edit"><span class="fa fa-send-o fa-lg"></span> <span>Edit request</span></a></div><div class="dropdown ArticleFooter__dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a href="/Hi-king/items/8d36d9029ad1203aac55.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><i class="fa fa-fw fa-flag"></i> Report article</a></li></ul></div></div></div><div class="itemsShowBody_adventCalendar"><div class="itemsShowBody_adventCalendar_header"><i class="fa fa-fw fa-calendar"></i> This post is the <span class="date">No.1</span> article of <a class="title" href="/advent-calendar/2016/dwango">ドワンゴ Advent Calendar 2016</a></div><ul class="itemsShowBody_adventCalendar_nav list-unstyled"><li class="itemsShowBody_adventCalendar_neighborItem itemsShowBody_adventCalendar_neighborItem-next"><span class="itemsShowBody_adventCalendar_date"><i class="fa fa-fw fa-arrow-circle-right"></i> Day 2:</span><span class="itemsShowBody_adventCalendar_title"> <a class="itemsShowBody_adventCalendar_link" href="/advent-calendar/2016/dwango#day-2">Next</a></span></li></ul></div><ul class="references js-referencesView"><li class="references_header"><i class="fa fa-fw fa-link"></i> Linked from these articles</li><li class="references_reference js-reference"><span>Linked from </span><a href="/Hiroshiba/items/d5749d8896613e6f0b48#_reference-ff4d0406869d2ec48b46"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/103491/profile-images/1473709030" />Girl Friend Factory - 機械学習で彼女を創る -</a><time class="references_datetime js-dateTimeView" datetime="2016-12-09T04:06:35+00:00">3 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/nonbiri15/items/518562c515f68d496a80#_reference-865336109f437d927d26"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/83761/profile-images/1473702877" />DeepLearningはアニメを変えるのか？</a><time class="references_datetime js-dateTimeView" datetime="2016-12-25T10:15:30+00:00">3 months ago</time></li></ul><div class="itemsShowBody_articleColumnFooter"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~ on @Qiita" data-url="http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="機械学習で美少女化 ~ あるいはNEW GAME! の世界 ~" href="http://b.hatena.ne.jp/entry/http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/Hi-king/items/8d36d9029ad1203aac55" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div></div><div class="itemsShowComment_wrapper" id="comments"><div class="js-react-on-rails-component" data-component-name="CommentListContainer" data-props="{&quot;currentUser&quot;:null,&quot;initialComments&quot;:[],&quot;monthly_public_image_uploadable_size_limit&quot;:null,&quot;total_uploaded_public_image_size_in_current_month&quot;:null,&quot;item&quot;:{&quot;id&quot;:442658,&quot;uuid&quot;:&quot;8d36d9029ad1203aac55&quot;,&quot;suspended&quot;:false,&quot;secret&quot;:false},&quot;owner&quot;:{&quot;url_name&quot;:&quot;Hi-king&quot;},&quot;is_team&quot;:false,&quot;is_project&quot;:false,&quot;logged_in&quot;:false,&quot;polling&quot;:false,&quot;mention_candidates&quot;:[{&quot;id&quot;:28934,&quot;url_name&quot;:&quot;Hi-king&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/28934/profile-images/1473685273&quot;}]}" data-trace="false" data-dom-id="CommentListContainer-react-component-24b23a3c-179b-4456-bf78-c534c392cca3"></div>
    <div id="CommentListContainer-react-component-24b23a3c-179b-4456-bf78-c534c392cca3"></div>
    
</div></div></div></div></article><div class="js-report-form modal fade reportForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Report article</h4></div><div class="modal-body"><form action="/reports" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="xv0NIpA5uvU4MAwCCRSCrar2UiQxpiThuEV9G3a4AdedM0AYoCUfUuTO3r+C3aCGxuww6ZnCzs2oAg9Dp/ydPg==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/Hi-king/items/8d36d9029ad1203aac55" /><input type="hidden" name="item_uuid" id="item_uuid" value="8d36d9029ad1203aac55" /><p>Help us understand the problem. What is going on with this item?</p><br /><div class="form-group"><ul class="list-unstyled"><li><label><input type="radio" name="report_type" id="report_type_spam" value="spam" required="required" /> It&#39;s spam </label></li><li><label><input type="radio" name="report_type" id="report_type_harassment" value="harassment" required="required" /> It&#39;s abusive or harmful </label></li><li><label><input type="radio" name="report_type" id="report_type_inappropriate_content" value="inappropriate_content" required="required" /> It contains inappropriate content </label></li></ul></div><div class="reportForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary reportForm_submitButton"><i class="fa fa-send"></i> Submit</button></div></form></div></div></div></div><script id="js-item" type="application/json">{ "url": "http://qiita.com/Hi-king/items/8d36d9029ad1203aac55", "id": 442658, "uuid": "8d36d9029ad1203aac55" }</script><script class="js-user" type="application/json">{&quot;id&quot;:28934,&quot;url_name&quot;:&quot;Hi-king&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/28934/profile-images/1473685273&quot;}</script><script language="JavaScript" src="//cdn.bigmining.com/private/js/qiita_bigmining.js" type="text/javascript"></script></div><footer class="footer"><div class="footer_inner"><div class="footer_container"><ul class="footer_links-left"><li class="footer_link"><a class="footer_copyright" href="http://increments.co.jp">© 2011-2017 Increments Inc.</a></li><li class="footer_link"><a href="http://qiita.com/terms">Terms</a></li><li class="footer_link"><a href="http://qiita.com/privacy">Privacy</a></li><li class="footer_link"><a href="http://help.qiita.com">Help</a></li><li class="footer_link"><a href="https://increments.zendesk.com/anonymous_requests/new">Contact</a></li></ul><ul class="footer_links-right"><li class="footer_link"><a href="http://qiita.com/about">About</a></li><li class="footer_link"><a href="/users">Users</a></li><li class="footer_link"><a href="/tags">Tags</a></li><li class="footer_link"><a href="http://blog.qiita.com">Blog</a></li><li class="footer_link"><a href="http://qiita.com/api/v2/docs">API</a></li><li class="footer_link"><a href="https://teams.qiita.com/">Team</a></li><li class="footer_link"><a href="http://kobito.qiita.com">Kobito</a></li><li class="footer_link"><a class="js-public-form-feedback-link" data-target=".js-feedback-form" data-toggle="modal" href=""><i class="fa fa-heart"></i> Feedback <i class="fa fa-caret-down"></i></a></li></ul></div></div></footer><div class="js-feedback-form modal fade feedbackForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Feedback</h4></div><div class="modal-body"><form class="js-feedback-form-form" action="/feedbacks" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="WBn03I1Qdid+bHh7RF03XgSXCu0jnfvVSZnOOV4M+ogD17nmvUzTgKKSqsbPlBV1aI1oIIv5EflZ3rxhj0hmYQ==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/Hi-king/items/8d36d9029ad1203aac55" /><div class="form-group"><textarea name="feedback[message]" id="feedback_message" class="form-control js-feedback-form-text-area" placeholder="Please give us any feedback about Qiita." required="required" rows="5">
</textarea></div><div class="feedbackForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary feedbackForm_submitButton"><i class="fa fa-send"></i> Submit</button><p class="feedbackForm_note">We don&#39;t reply to any feedback.<br />If you need help with Qiita, please send a support request from <a href="https://increments.zendesk.com/anonymous_requests/new">here</a>.</p></div><div style="position:fixed;top:-99999px;opacity:0.0001;"><input name="feedback[name]" type="text" /></div></form></div></div></div></div><script>// if (window.mixpanel instanceof Element) {
//   window.mixpanel = [];
// }
// (function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
// for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);</script><script src="http://cdn.qiita.com/assets/public-3af9c1d29a49f3320bb796fb5e75304b.min.js"></script><script>
  (function () {
    var script = document.getElementsByTagName('script')[0];
    var load = function (src, id) {
      var el = document.createElement('script');
      el.async = true;
      el.src = src;
      el.id = id;
      script.parentNode.insertBefore(el, script);
    };
      // Optimizely
      load('//cdn.optimizely.com/js/52738645.js', 'optimizely-jssdk');
      // Google Analytics
      window._gaq = window._gaq || [];
      var isCareer = location.hostname.split('.')[0] == 'career';
      if (isCareer) {
        window._gaq.push(['_setAccount', 'UA-24675221-11']);
        window._gaq.push(['_setDomainName', 'qiita.com']);
      } else {
        window._gaq.push(['_setAccount', 'UA-24675221-1']);
      }
      window._gaq.push(['_setCustomVar', 1, 'logged_in', 'false', 2]);
      window._gaq.push(['_trackPageview']);
      var src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      load(src, 'google-analytics-jssdk');
    // Google Analytics - Universal Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-24675221-12', {
          
        });
          ga('create', 'UA-43722559-1', { name: 'user' });
          ga('user.send', 'pageview');
        ga('set', 'dimension1', 'false');
        ga('set', 'dimension3', 'false');
      ga('require', 'displayfeatures');
      ga('set', 'forceSSL', true);
      ga('send', 'pageview');
    // Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TBQWPN');
  })();
</script>
</body></html>