<!DOCTYPE html><html xmlns:og="http://ogp.me/ns#"><head><meta charset="UTF-8" /><title>機械学習のデータセット画像枚数を増やす方法 - Qiita</title><meta content="width=device-width,initial-scale=1" name="viewport" /><meta content="

画像水増しの意義

ディープラーニングのCNN等のクラス分類の精度を向上させるためには、優れた学習データセットが必要です。精度を担保するためには、以下のような工夫をする必要があります。


十分な画像枚数を用意する。
各タグの画像枚数を揃える
タグ付けをより正確に行う
同じ分類のものでも、見た目が異なる場合は細かくタグを分ける


これらを行うためには、とにかく枚数が必要です。種類によって枚数に偏りがある場合もあり、すべて手作業で抽出・タグ付けしていると大変です。
..." name="description" /><meta content="summary" name="twitter:card" /><meta content="@Qiita" name="twitter:site" /><meta content="機械学習のデータセット画像枚数を増やす方法 - Qiita" property="og:title" /><meta content="article" property="og:type" /><meta content="http://qiita.com/bohemian916/items/9630661cd5292240f8c7" property="og:url" /><meta content="http://cdn.qiita.com/assets/qiita-fb-2887e7b4aad86fd8c25cea84846f2236.png" property="og:image" /><meta content="## 画像水増しの意義
ディープラーニングのCNN等のクラス分類の精度を向上させるためには、優れた学習データセットが必要です。精度を担保するためには、以下のような工夫をする必要があります。

* 十分な画像枚数を用意する。
* 各タグ..." property="og:description" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><link rel="shortcut icon" type="image/x-icon" href="http://cdn.qiita.com/assets/favicons/public/production-4ff10c1e1e2b5fcb353ff9cafdd56c70.ico" /><link rel="apple-touch-icon" type="image/png" href="http://cdn.qiita.com/assets/favicons/public/apple-touch-icon-f9a6afad761ec2306e10db2736187c8b.png" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link rel="stylesheet" media="all" href="http://cdn.qiita.com/assets/public-81dd63f4385f99b52aeab91266068ebd.min.css" /><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="pZHTV6PAzFJvmnwb0JNDeiDtzLbJtqso4jJM74YAXauytxhAIksfAJMv7vrDOxkxXU7v3JvT92XPfmkZtn7dCw==" /></head><body class="without-js" id=""><noscript><iframe height="0" src="//www.googletagmanager.com/ns.html?id=GTM-TBQWPN" style="display:none;visibility:hidden" width="0"></iframe></noscript><script>
  document.body.className = document.body.className.replace('without-js', '') + ' with-js';
  window.Qiita = {"asset_host":"cdn.qiita.com","TLD":"com","controller_path":"public/items","controller_action":"public/items#show","controller":"items","action":"show","action_path":"public/items#show","env":"production","flash":{},"is_landing_page":false,"is_team_page":false,"request_parameters":{"controller":"public/items","action":"show","user_id":"bohemian916","type":"items","id":"9630661cd5292240f8c7"},"root_domain":"qiita.com","variant":null,"config":{"mixpanel":{"career":"dd35af27e959781713d63fd7ca898a8d","per_team":"c0a2116368b33b44b5029ebd2cc9b094","public":"be87616606b0e26a87689099aab2c4e5","team":"b7c0342acba2dbc8742484d98788efb3"},"default_locale":"ja","locale":"en"},"team":null,"user":null,"GIT_BRANCH":null,"DEBUG":false};

</script>
<div class="headerContainer headerContainer-public" role="navigation"><div class="js-react-on-rails-component" data-component-name="HeaderContainer" data-props="{&quot;user&quot;:null,&quot;team&quot;:null,&quot;news&quot;:{&quot;type&quot;:&quot;Hot&quot;,&quot;content&quot;:&quot;Markdownによる情報共有サービス、Qiita:Team&quot;,&quot;url&quot;:&quot;https://teams.qiita.com?utm_source=qiita\u0026utm_medium=header_news&quot;},&quot;initial_unread_count&quot;:null,&quot;siteid_image&quot;:&quot;http://cdn.qiita.com/siteid-reverse.png&quot;,&quot;is_team_page&quot;:false,&quot;on_team_setting&quot;:false,&quot;show_post_menu&quot;:true,&quot;show_search_menu&quot;:true,&quot;is_fluid&quot;:false,&quot;locale&quot;:&quot;en&quot;}" data-trace="false" data-dom-id="HeaderContainer-react-component-88de49f1-9871-46e9-bab4-daecf9caa981"></div>
    <div id="HeaderContainer-react-component-88de49f1-9871-46e9-bab4-daecf9caa981"></div>
    
</div><div id="main"><script type="application/ld+json">{  "@context": "http://schema.org",  "@type": "BreadcrumbList",  "itemListElement": [    {      "@type": "ListItem",      "position": 1,      "item": {        "@id": "/",        "name": "Qiita"      }    },    {      "@type": "ListItem",      "position": 2,      "item": {        "@id": "/items",        "name": "Items"      }    },    {      "@type": "ListItem",      "position": 3,      "item": {        "@id": "/tags/OpenCV",        "name": "OpenCV"      }    }  ]}</script><article itemscope="" itemtype="http://schema.org/Article"><div class="ArticleMainHeader "><div class="container"></div><div class="container"><div class="row s-flex-align-center"><div class="col-sm-9"><h1 class="ArticleMainHeader__title" itemprop="headline">機械学習のデータセット画像枚数を増やす方法</h1><ul class="TagList"><li class="TagList__item" data-count="651"><a class="u-link-unstyled TagList__label" href="/tags/OpenCV"><img alt="OpenCV" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/52891c930a92eb009cc503c1c2165c866ad9d20a/medium.jpg?1470059263" /><span>OpenCV</span></a></li><li class="TagList__item" data-count="1075"><a class="u-link-unstyled TagList__label" href="/tags/DeepLearning"><img alt="DeepLearning" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/eac844d1d880a38fc3be5ebf534cad5182b64ebf/medium.jpg?1453002020" /><span>DeepLearning</span></a></li><li class="TagList__item" data-count="9910"><a class="u-link-unstyled TagList__label" href="/tags/Python"><img alt="Python" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/28fd3d6b220c89e6197fd82c02fd2fcd2bb66d81/medium.jpg?1383884245" /><span>Python</span></a></li><li class="TagList__item" data-count="1835"><a class="u-link-unstyled TagList__label" href="/tags/%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92"><img alt="機械学習" class="TagList__icon" src="https://s3-ap-northeast-1.amazonaws.com/qiita-tag-image/a94d4d239b3b0b83723d5b56c050ffc54b8593e7/medium.jpg?1394635775" /><span>機械学習</span></a></li></ul></div><div class="col-sm-3"><div class="itemsShowHeaderStock"><ul class="list-unstyled itemsShowHeaderStock_statusList"><li><div class="itemsShowHeaderStock_count stock"><span class="fa fa-thumbs-up"></span><span class="js-likecount">101</span></div><div class="itemsShowHeaderStock_countText">Like</div></li><li><div class="itemsShowHeaderStock_count" content="0 UserComments" itemprop="commentCount"><span class="fa fa-comment"></span>0</div><div class="itemsShowHeaderStock_countText">Comment</div></li></ul></div><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:101,&quot;uuid&quot;:&quot;9630661cd5292240f8c7&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-header&quot;}"></div><ul class="list-inline ArticleMainHeader__users"><li class="js-hovercard" data-hovercard-target-name="SatoshiRobatoFujimoto"><a itemprop="url" href="/SatoshiRobatoFujimoto"><img alt="SatoshiRobatoFujimoto" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/63863/profile-images/1473696399" /></a></li><li class="js-hovercard" data-hovercard-target-name="mouriman"><a itemprop="url" href="/mouriman"><img alt="mouriman" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/100875/profile-images/1473708231" /></a></li><li class="js-hovercard" data-hovercard-target-name="ytakky"><a itemprop="url" href="/ytakky"><img alt="ytakky" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/62018/profile-images/1473695825" /></a></li><li class="js-hovercard" data-hovercard-target-name="eqs"><a itemprop="url" href="/eqs"><img alt="eqs" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/83161/profile-images/1473702685" /></a></li><li class="js-hovercard" data-hovercard-target-name="izktmys"><a itemprop="url" href="/izktmys"><img alt="izktmys" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/102327/profile-images/1473708664" /></a></li><li class="js-hovercard" data-hovercard-target-name="rintarou"><a itemprop="url" href="/rintarou"><img alt="rintarou" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/77499/profile-images/1473700845" /></a></li><li class="js-hovercard" data-hovercard-target-name="hiro_matsuno2"><a itemprop="url" href="/hiro_matsuno2"><img alt="hiro_matsuno2" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/9764/profile-images/1473681543" /></a></li><li class="js-hovercard" data-hovercard-target-name="ZeroDotZero"><a itemprop="url" href="/ZeroDotZero"><img alt="ZeroDotZero" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/75925/profile-images/1473700310" /></a></li><li class="js-hovercard" data-hovercard-target-name="chrysocome"><a itemprop="url" href="/chrysocome"><img alt="chrysocome" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/41477/profile-images/1485746108" /></a></li><li class="js-hovercard" data-hovercard-target-name="sotoshigoto"><a itemprop="url" href="/sotoshigoto"><img alt="sotoshigoto" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/30644/profile-images/1473685534" /></a></li><li><a href="/bohemian916/items/9630661cd5292240f8c7/likers"><span class="fa fa-ellipsis-h"></span></a></li></ul></div></div></div></div><div class="ArticleAsideHeader"><div class="container"><div class="u-flex u-space-between"><div class="u-flex u-flex-wrap"><div class="u-flex u-align-center s-pdv-5 u-flex-wrap"><div class="ArticleAsideHeader__author"><a href="/bohemian916"><img class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/50474/profile-images/1473692117" alt="1473692117" /></a> <a class="u-link-unstyled" href="/bohemian916">bohemian916</a> </div><div class="ArticleAsideHeader__date"><meta content="2016-01-07T12:44:39+09:00" itemprop="datePublished" /><span data-toggle="tooltip" title="posted at 2016-01-07">Edited at <time datetime="2016-04-06T10:55:37+09:00" itemprop="dateModified">2016-04-06</time></span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"><div class="ArticleAsideHeader__revision"> <a data-toggle="tooltip" title="Revisions" href="/bohemian916/items/9630661cd5292240f8c7/revisions"><span class="fa fa-history"></span></a><span class="ArticleAsideHeader__revisionCount">4</span></div></div><div class="u-flex u-align-center s-pdv-5 mobile-hidden"></div></div><div class="u-flex u-align-center s-flex-justiry-between s-pdv-5 u-shrink-0"><div class="ArticleAsideHeader__stock"><div class="js-stockbutton" data-position="top" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h fa-lg"></span></a><ul class="dropdown-menu dropdown-menu-right"><li class="dropdown__item--mobile"><a href="/bohemian916/items/9630661cd5292240f8c7/revisions"><span class="fa fa-fw fa-history"></span> Revisions<span>(4)</span></a></li><li><a href="/bohemian916/items/9630661cd5292240f8c7.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><span class="fa fa-fw fa-flag"></span> Report article</a></li></ul></div></div></div></div></div><div class="container"><div class="row" id="article-body-wrapper"><div class="col-sm-9"><section class="markdownContent markdownContent-headingEnabled js-task-list-container clearfix position-relative" id="item-9630661cd5292240f8c7" itemprop="articleBody">
<h2>
<span id="画像水増しの意義" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E6%B0%B4%E5%A2%97%E3%81%97%E3%81%AE%E6%84%8F%E7%BE%A9"><i class="fa fa-link"></i></a>画像水増しの意義</h2>

<p>ディープラーニングのCNN等のクラス分類の精度を向上させるためには、優れた学習データセットが必要です。精度を担保するためには、以下のような工夫をする必要があります。</p>

<ul>
<li>十分な画像枚数を用意する。</li>
<li>各タグの画像枚数を揃える</li>
<li>タグ付けをより正確に行う</li>
<li>同じ分類のものでも、見た目が異なる場合は細かくタグを分ける</li>
</ul>

<p>これらを行うためには、とにかく枚数が必要です。種類によって枚数に偏りがある場合もあり、すべて手作業で抽出・タグ付けしていると大変です。</p>

<p>そこで、ある程度タグ付けされた画像たちを加工することで、画像の枚数を増やすことを考えます。その手法を幾つか紹介します。なお説明には、<a href="http://bohemia.hatenablog.com/entry/2016/01/07/104017" rel="nofollow noopener" target="_blank">高城れにさんを画像処理のサンプルに使うべき</a>との意見に基づき、高城れにさんを利用します。  </p>

<h2>
<span id="水増し手法" class="fragment"></span><a href="#%E6%B0%B4%E5%A2%97%E3%81%97%E6%89%8B%E6%B3%95"><i class="fa fa-link"></i></a>水増し手法</h2>

<p>OpenCV 3.0 Pythonで実装します。<br><br>
実際に水増しに使えるソースをこちらに用意しておきます。</p>

<p><a href="https://github.com/bohemian916/deeplearning_tool/blob/master/increase_picture.py" rel="nofollow noopener" target="_blank">Github</a></p>

<h3>
<span id="コントラスト調整" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%88%E3%83%A9%E3%82%B9%E3%83%88%E8%AA%BF%E6%95%B4"><i class="fa fa-link"></i></a>コントラスト調整</h3>

<p>コントラストを強調、低減させた画像を作ります。<br><br>
強調するには、一定以下の低輝度の画素を0,　一定以上の高輝度の画素を255にし、中間の輝度のものを調整します。<br>
逆に低減するには、輝度の幅を小さくするように調整します。こちらの図がわかりやすいです。<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/5fbabaa6-f134-b630-fe7b-7794f3fe0307.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/5fbabaa6-f134-b630-fe7b-7794f3fe0307.png" alt="http://livedoor.blogimg.jp/progr-python2/imgs/f/8/f867a2e8.png"></a></p>

<div class="code-frame" data-lang="py"><div class="highlight"><pre>
<span class="c"># ルックアップテーブルの生成</span>
<span class="n">min_table</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">max_table</span> <span class="o">=</span> <span class="mi">205</span>
<span class="n">diff_table</span> <span class="o">=</span> <span class="n">max_table</span> <span class="o">-</span> <span class="n">min_table</span>

<span class="n">LUT_HC</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s">'uint8'</span> <span class="p">)</span>
<span class="n">LUT_LC</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s">'uint8'</span> <span class="p">)</span>

<span class="c"># ハイコントラストLUT作成</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_table</span><span class="p">):</span>
    <span class="n">LUT_HC</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">min_table</span><span class="p">,</span> <span class="n">max_table</span><span class="p">):</span>
    <span class="n">LUT_HC</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">min_table</span><span class="p">)</span> <span class="o">/</span> <span class="n">diff_table</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_table</span><span class="p">,</span> <span class="mi">255</span><span class="p">):</span>
    <span class="n">LUT_HC</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>

<span class="c"># ローコントラストLUT作成</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">):</span>
    <span class="n">LUT_LC</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_table</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">diff_table</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span>

<span class="c"># 変換</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s">"reni.jpg"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">high_cont_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">LUT</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">LUT_HC</span><span class="p">)</span>
<span class="n">low_cont_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">LUT</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">LUT_LC</span><span class="p">)</span>
</pre></div></div>

<p>コントラストを強調したもの<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/9ef8d5eb-ee91-0eff-3c3c-ec9a7d9af9e4.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/9ef8d5eb-ee91-0eff-3c3c-ec9a7d9af9e4.jpeg" alt="reni_takagi_2012_04_15_1.jpg"></a></p>

<p>コントラストを低減したもの<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/7cdca8f9-1eb2-f456-9d09-7747e17d9fb5.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/7cdca8f9-1eb2-f456-9d09-7747e17d9fb5.jpeg" alt="reni_takagi_2012_04_15_2.jpg"></a></p>

<p>参考<br>
<a href="http://opencv.blog.jp/algorithm/tone_curve" rel="nofollow noopener" target="_blank">トーンカーブで画像の濃度変換</a></p>

<h3>
<span id="ガンマ変換" class="fragment"></span><a href="#%E3%82%AC%E3%83%B3%E3%83%9E%E5%A4%89%E6%8F%9B"><i class="fa fa-link"></i></a>ガンマ変換</h3>

<p>ディスプレイの表示などの際に使われる変換で、輝度値をγの値によって変化させます。<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/1ac70b0f-7b74-05dd-64d8-f74d8cf17a65.png" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/1ac70b0f-7b74-05dd-64d8-f74d8cf17a65.png" alt="http://livedoor.blogimg.jp/progr-python2/imgs/0/4/043dfda9.png"></a></p>

<p>コントラスト調整のソースのルックアップテーブルを、こちらに置き換えてください。</p>

<div class="code-frame" data-lang="py"><div class="highlight"><pre>
<span class="c"># ガンマ変換ルックアップテーブル</span>
<span class="n">gamma1</span> <span class="o">=</span> <span class="mf">0.75</span>
<span class="n">gamma2</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">):</span>
    <span class="n">LUT_G1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">gamma1</span><span class="p">)</span>
    <span class="n">LUT_G2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">/</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">gamma2</span><span class="p">)</span>
</pre></div></div>

<p>γ=1.5のとき<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/aa56dec8-1893-7f58-d417-ed858b1bb895.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/aa56dec8-1893-7f58-d417-ed858b1bb895.jpeg" alt="reni_takagi_2012_04_15_3.jpg"></a></p>

<p>γ=0.75のとき<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/1c3c7562-9ee0-54b7-6086-aaf2c5dfdde7.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/1c3c7562-9ee0-54b7-6086-aaf2c5dfdde7.jpeg" alt="reni_takagi_2012_04_15_2.jpg"></a></p>

<p>参考<br><br>
<a href="http://imagingsolution.blog107.fc2.com/blog-entry-67.html" rel="nofollow noopener" target="_blank">ルックアップテーブル（ガンマ補正の例）</a>  </p>

<h3>
<span id="平滑化" class="fragment"></span><a href="#%E5%B9%B3%E6%BB%91%E5%8C%96"><i class="fa fa-link"></i></a>平滑化</h3>

<p>画像を滑らかにします。ここでは平均化フィルタをかけています。</p>

<div class="code-frame" data-lang="py"><div class="highlight"><pre>
<span class="n">average_square</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">src</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s">"reni.jpg"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">blur_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">blur</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">average_square</span><span class="p">)</span>
</pre></div></div>

<p>10×10平均化フィルタ<br><br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/461a821f-5bfc-3ae6-567e-08abf89e53f5.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/461a821f-5bfc-3ae6-567e-08abf89e53f5.jpeg" alt="reni_takagi_2012_04_15_5.jpg"></a></p>

<p>参考<br>
<a href="http://imagingsolution.blog107.fc2.com/blog-entry-88.html" rel="nofollow noopener" target="_blank">平滑化（移動平均、ガウシアン）フィルタ</a></p>

<h3>
<span id="ガウス分布に基づくノイズ" class="fragment"></span><a href="#%E3%82%AC%E3%82%A6%E3%82%B9%E5%88%86%E5%B8%83%E3%81%AB%E5%9F%BA%E3%81%A5%E3%81%8F%E3%83%8E%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>ガウス分布に基づくノイズ</h3>

<p>各画素にガウス分布に基づく生成値を足して、ノイズを付加します。</p>

<p>σ=15のガウシアンノイズ<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/37b71800-c31e-b700-845d-8d70aa096829.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/37b71800-c31e-b700-845d-8d70aa096829.jpeg" alt="reni_takagi_2012_04_15_7.jpg"></a></p>

<div class="code-frame" data-lang="py"><div class="highlight"><pre>
<span class="n">src</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s">"reni.jpg"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">ch</span><span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">shape</span>
<span class="n">mean</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">gauss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span><span class="n">sigma</span><span class="p">,(</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">ch</span><span class="p">))</span>
<span class="n">gauss</span> <span class="o">=</span> <span class="n">gauss</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">ch</span><span class="p">)</span>
<span class="n">gauss_img</span> <span class="o">=</span> <span class="n">src</span> <span class="o">+</span> <span class="n">gauss</span>
</pre></div></div>

<p>参考<br>
<a href="http://www.comp.tmu.ac.jp/morbier/imagproc/imageconvert.html" rel="nofollow noopener" target="_blank">画像情報（輝度データ）の変換</a></p>

<h3>
<span id="saltpepperノイズ" class="fragment"></span><a href="#saltpepper%E3%83%8E%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>Salt&amp;Pepperノイズ</h3>

<p>塩と胡椒をかけたようなノイズなので、こう呼ばれます。インパルスノイズとも言うそうです。</p>

<div class="code-frame" data-lang="py"><div class="highlight"><pre>
<span class="n">src</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s">"reni.jpg"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">ch</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">shape</span>
<span class="n">s_vs_p</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">amount</span> <span class="o">=</span> <span class="mf">0.004</span>
<span class="n">sp_img</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c"># 塩モード</span>
<span class="n">num_salt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">amount</span> <span class="o">*</span> <span class="n">src</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="n">s_vs_p</span><span class="p">)</span>
<span class="n">coords</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span> <span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_salt</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">src</span><span class="o">.</span><span class="n">shape</span><span class="p">]</span>
<span class="n">sp_img</span><span class="p">[</span><span class="n">coords</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c"># 胡椒モード</span>
<span class="n">num_pepper</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">amount</span><span class="o">*</span> <span class="n">src</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.</span> <span class="o">-</span> <span class="n">s_vs_p</span><span class="p">))</span>
<span class="n">coords</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">-</span><span class="mi">1</span> <span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_pepper</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">src</span><span class="o">.</span><span class="n">shape</span><span class="p">]</span>
<span class="n">sp_img</span><span class="p">[</span><span class="n">coords</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

</pre></div></div>

<p>0.4%の画素にノイズ<br>
<a href="https://qiita-image-store.s3.amazonaws.com/0/50474/cb4288e8-8dd7-bcce-1159-9606ac6178af.jpeg" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.amazonaws.com/0/50474/cb4288e8-8dd7-bcce-1159-9606ac6178af.jpeg" alt="reni_takagi_2012_04_15_8.jpg"></a></p>

<h3>
<span id="反転" class="fragment"></span><a href="#%E5%8F%8D%E8%BB%A2"><i class="fa fa-link"></i></a>反転</h3>

<p>左右の反転、上下の反転を行います。</p>

<div class="code-frame" data-lang="py"><div class="highlight"><pre>
<span class="n">src</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s">"reni.jpg"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">hflip_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">vflip_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="拡大縮小" class="fragment"></span><a href="#%E6%8B%A1%E5%A4%A7%E7%B8%AE%E5%B0%8F"><i class="fa fa-link"></i></a>拡大縮小</h3>

<p>画像の一部を拡大、縮小します。</p>

<div class="code-frame" data-lang="py"><div class="highlight"><pre>
<span class="n">src</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s">"reni.jpg"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">hight</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">half_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">src</span><span class="p">,(</span><span class="n">hight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
</pre></div></div>
<div class="hidden"><form class="js-task-list-update" action="/bohemian916/items/9630661cd5292240f8c7" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="patch" /><input type="hidden" name="authenticity_token" value="qIAfv/UJuhP1uR3Wvc0gzSDOj14I7eDWoHRNgUbEp0i/ptSodIJpQQkMjzeuZXqGXW2sNFqIvJuNOGh3dron6A==" /><input type="hidden" name="updated_at_confirmation_in_unixtime" id="updated_at_confirmation_in_unixtime" value="1459907737" class="js-task-list-updated-at" /><textarea name="raw_body" id="raw_body" class="js-task-list-field">
## 画像水増しの意義
ディープラーニングのCNN等のクラス分類の精度を向上させるためには、優れた学習データセットが必要です。精度を担保するためには、以下のような工夫をする必要があります。

* 十分な画像枚数を用意する。
* 各タグの画像枚数を揃える
* タグ付けをより正確に行う
* 同じ分類のものでも、見た目が異なる場合は細かくタグを分ける
  
これらを行うためには、とにかく枚数が必要です。種類によって枚数に偏りがある場合もあり、すべて手作業で抽出・タグ付けしていると大変です。

そこで、ある程度タグ付けされた画像たちを加工することで、画像の枚数を増やすことを考えます。その手法を幾つか紹介します。なお説明には、[高城れにさんを画像処理のサンプルに使うべき](http://bohemia.hatenablog.com/entry/2016/01/07/104017)との意見に基づき、高城れにさんを利用します。  


## 水増し手法
OpenCV 3.0 Pythonで実装します。  
実際に水増しに使えるソースをこちらに用意しておきます。

[Github](https://github.com/bohemian916/deeplearning_tool/blob/master/increase_picture.py)


### コントラスト調整
コントラストを強調、低減させた画像を作ります。  
強調するには、一定以下の低輝度の画素を0,　一定以上の高輝度の画素を255にし、中間の輝度のものを調整します。
逆に低減するには、輝度の幅を小さくするように調整します。こちらの図がわかりやすいです。
![http://livedoor.blogimg.jp/progr-python2/imgs/f/8/f867a2e8.png](https://qiita-image-store.s3.amazonaws.com/0/50474/5fbabaa6-f134-b630-fe7b-7794f3fe0307.png)

  
```py
# ルックアップテーブルの生成
min_table = 50
max_table = 205
diff_table = max_table - min_table

LUT_HC = np.arange(256, dtype = &#39;uint8&#39; )
LUT_LC = np.arange(256, dtype = &#39;uint8&#39; )

# ハイコントラストLUT作成
for i in range(0, min_table):
    LUT_HC[i] = 0
for i in range(min_table, max_table):
    LUT_HC[i] = 255 * (i - min_table) / diff_table
for i in range(max_table, 255):
    LUT_HC[i] = 255

# ローコントラストLUT作成
for i in range(256):
    LUT_LC[i] = min_table + i * (diff_table) / 255

# 変換
src = cv2.imread(&quot;reni.jpg&quot;, 1)
high_cont_img = cv2.LUT(src, LUT_HC)
low_cont_img = cv2.LUT(src, LUT_LC)
```
コントラストを強調したもの
![reni_takagi_2012_04_15_1.jpg](https://qiita-image-store.s3.amazonaws.com/0/50474/9ef8d5eb-ee91-0eff-3c3c-ec9a7d9af9e4.jpeg)

コントラストを低減したもの
![reni_takagi_2012_04_15_2.jpg](https://qiita-image-store.s3.amazonaws.com/0/50474/7cdca8f9-1eb2-f456-9d09-7747e17d9fb5.jpeg)


参考
[トーンカーブで画像の濃度変換](http://opencv.blog.jp/algorithm/tone_curve)

### ガンマ変換
ディスプレイの表示などの際に使われる変換で、輝度値をγの値によって変化させます。
![http://livedoor.blogimg.jp/progr-python2/imgs/0/4/043dfda9.png](https://qiita-image-store.s3.amazonaws.com/0/50474/1ac70b0f-7b74-05dd-64d8-f74d8cf17a65.png)

コントラスト調整のソースのルックアップテーブルを、こちらに置き換えてください。

```py
# ガンマ変換ルックアップテーブル
gamma1 = 0.75
gamma2 = 1.5
for i in range(256):
    LUT_G1[i] = 255 * pow(float(i) / 255, 1.0 / gamma1)
    LUT_G2[i] = 255 * pow(float(i) / 255, 1.0 / gamma2)
```
γ=1.5のとき
![reni_takagi_2012_04_15_3.jpg](https://qiita-image-store.s3.amazonaws.com/0/50474/aa56dec8-1893-7f58-d417-ed858b1bb895.jpeg)


γ=0.75のとき
![reni_takagi_2012_04_15_2.jpg](https://qiita-image-store.s3.amazonaws.com/0/50474/1c3c7562-9ee0-54b7-6086-aaf2c5dfdde7.jpeg)

参考  
[ルックアップテーブル（ガンマ補正の例）] (http://imagingsolution.blog107.fc2.com/blog-entry-67.html)  

### 平滑化
画像を滑らかにします。ここでは平均化フィルタをかけています。
  
```py
average_square = (10,10)
src = cv2.imread(&quot;reni.jpg&quot;, 1)
blur_img = cv2.blur(src, average_square)
```

10×10平均化フィルタ  
![reni_takagi_2012_04_15_5.jpg](https://qiita-image-store.s3.amazonaws.com/0/50474/461a821f-5bfc-3ae6-567e-08abf89e53f5.jpeg)
  
参考
[平滑化（移動平均、ガウシアン）フィルタ](http://imagingsolution.blog107.fc2.com/blog-entry-88.html)

### ガウス分布に基づくノイズ
各画素にガウス分布に基づく生成値を足して、ノイズを付加します。

σ=15のガウシアンノイズ
![reni_takagi_2012_04_15_7.jpg](https://qiita-image-store.s3.amazonaws.com/0/50474/37b71800-c31e-b700-845d-8d70aa096829.jpeg)
  
  
```py
src = cv2.imread(&quot;reni.jpg&quot;, 1)
row,col,ch= src.shape
mean = 0
sigma = 15
gauss = np.random.normal(mean,sigma,(row,col,ch))
gauss = gauss.reshape(row,col,ch)
gauss_img = src + gauss
```

参考
[画像情報（輝度データ）の変換](http://www.comp.tmu.ac.jp/morbier/imagproc/imageconvert.html)

### Salt&amp;Pepperノイズ
塩と胡椒をかけたようなノイズなので、こう呼ばれます。インパルスノイズとも言うそうです。

```py
src = cv2.imread(&quot;reni.jpg&quot;, 1)
row,col,ch = src.shape
s_vs_p = 0.5
amount = 0.004
sp_img = src.copy()

# 塩モード
num_salt = np.ceil(amount * src.size * s_vs_p)
coords = [np.random.randint(0, i-1 , int(num_salt)) for i in src.shape]
sp_img[coords[:-1]] = (255,255,255)

# 胡椒モード
num_pepper = np.ceil(amount* src.size * (1. - s_vs_p))
coords = [np.random.randint(0, i-1 , int(num_pepper)) for i in src.shape]
sp_img[coords[:-1]] = (0,0,0)

```
0.4%の画素にノイズ
![reni_takagi_2012_04_15_8.jpg](https://qiita-image-store.s3.amazonaws.com/0/50474/cb4288e8-8dd7-bcce-1159-9606ac6178af.jpeg)


### 反転
左右の反転、上下の反転を行います。

```py
src = cv2.imread(&quot;reni.jpg&quot;, 1)
hflip_img = cv2.flip(src, 1)
vflip_img = cv2.flip(src, 0)
```

### 拡大縮小
画像の一部を拡大、縮小します。

```py
src = cv2.imread(&quot;reni.jpg&quot;, 1)
hight = src.shape[0]
width = src.shape[1]
half_img = cv2.resize(src,(hight/2,width/2))
```
</textarea><input type="submit" name="commit" value="Save changes" data-disable-with="Save changes" /></form></div></section></div><div class="col-sm-3"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="機械学習のデータセット画像枚数を増やす方法 on @Qiita" data-url="http://qiita.com/bohemian916/items/9630661cd5292240f8c7" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="機械学習のデータセット画像枚数を増やす方法" href="http://b.hatena.ne.jp/entry/http://qiita.com/bohemian916/items/9630661cd5292240f8c7" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/bohemian916/items/9630661cd5292240f8c7" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/bohemian916/items/9630661cd5292240f8c7" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div><section class="itemsShowAuthorInfo" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><a href="/bohemian916"><img alt="" class="itemsShowAuthorInfo_userIcon" itemprop="image" src="https://qiita-image-store.s3.amazonaws.com/0/50474/profile-images/1473692117" /></a><div class="itemsShowAuthorInfo_profileStats"><strong class="itemsShowAuthorInfo_userName" itemprop="name"><a itemprop="url" href="/bohemian916">bohemian916</a></strong><div class="itemsShowAuthorInfo_contribution"><span class="itemsShowAuthorInfo_count">750</span><span class="itemsShowAuthorInfo_unit">Contribution</span></div><div id="js-react-on-rails-context" data-rails-context="{}"></div>
<div class="js-react-on-rails-component" data-component-name="UserFollowButton" data-props="{&quot;initial_followed_by&quot;:false,&quot;position&quot;:&quot;author-info&quot;,&quot;size&quot;:&quot;btn-xs&quot;,&quot;url_name&quot;:&quot;bohemian916&quot;}" data-trace="false" data-dom-id="UserFollowButton-react-component-7bceadbd-730f-41a3-b79f-5419880fa374"></div>
    <div id="UserFollowButton-react-component-7bceadbd-730f-41a3-b79f-5419880fa374"></div>
    
</div><section class="itemsShowAuthorPopularItems"><h5 class="itemsShowAuthorPopularItems_sectionTitle">人気の投稿</h5><ul class="itemsShowAuthorPopularItems_posts list-unstyled"><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/bohemian916/items/9630661cd5292240f8c7">機械学習のデータセット画像枚数を増やす方法</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/bohemian916/items/62ef3fe4d90745cc92f6">Googleから出た機械学習ライブラリTensorFlowのインストール</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/bohemian916/items/9f1e053bf73724fe0b1e">趣味用に安く深層学習PCを作った</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/bohemian916/items/4f0736dcea932a162d9e">Pythonの環境構築からTensorFlowインストール</a></li><li itemscope="" itemtype="http://schema.org/Article"> <a itemprop="url" track="click" data-label="AuthorPopularItemsAtSidebar" href="/bohemian916/items/ba46964a3d2ed7ae0dc5">AutoLayoutでアニメーションを設定する方法(Objective-C版)</a></li></ul></section><section class="itemsShowAuthorInfo_organization"><h5 class="itemsShowAuthorInfo_organizationTitle">ORGANIZATION</h5><span itemprop="memberOf" itemscope="" itemtype="http://schema.org/Organization"><a itemprop="url" href="/organizations/nextgroup"><img alt="株式会社ネクスト" class="itemsShowAuthorInfo_organizationLogo" itemprop="image" src="https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/e8be762dc66f89306dc358e7bf34201744c9d09a/original.jpg?1401762088" /></a></span></section></section><div class="scroll-chaser"><div class="google-adsense"><style>.test-text-responsible { width: 200px; height: 200px; }@media(min-width: 1200px) {  .test-text-responsible { width: 250px; height: 250px; }}@media(max-width: 979px) and (min-width: 768px) {  .test-text-responsible { width: 120px; height: 240px; }}@media(max-width: 767px) {  .test-text-responsible { width: 320px; height: 50px; }}</style><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle test-text-responsible" data-ad-client="ca-pub-8127218772604357" data-ad-slot="3880091879" style="display:inline-block"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div><div class="js-react-on-rails-component" data-component-name="Toc" data-props="{&quot;body&quot;:&quot;\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E7%94%BB%E5%83%8F%E6%B0%B4%E5%A2%97%E3%81%97%E3%81%AE%E6%84%8F%E7%BE%A9\&quot;\u003e画像水増しの意義\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E6%B0%B4%E5%A2%97%E3%81%97%E6%89%8B%E6%B3%95\&quot;\u003e水増し手法\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%82%B3%E3%83%B3%E3%83%88%E3%83%A9%E3%82%B9%E3%83%88%E8%AA%BF%E6%95%B4\&quot;\u003eコントラスト調整\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%82%AC%E3%83%B3%E3%83%9E%E5%A4%89%E6%8F%9B\&quot;\u003eガンマ変換\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%B9%B3%E6%BB%91%E5%8C%96\&quot;\u003e平滑化\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E3%82%AC%E3%82%A6%E3%82%B9%E5%88%86%E5%B8%83%E3%81%AB%E5%9F%BA%E3%81%A5%E3%81%8F%E3%83%8E%E3%82%A4%E3%82%BA\&quot;\u003eガウス分布に基づくノイズ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#saltpepper%E3%83%8E%E3%82%A4%E3%82%BA\&quot;\u003eSalt\u0026amp;Pepperノイズ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E5%8F%8D%E8%BB%A2\&quot;\u003e反転\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\&quot;#%E6%8B%A1%E5%A4%A7%E7%B8%AE%E5%B0%8F\&quot;\u003e拡大縮小\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n&quot;,&quot;wrapper&quot;:&quot;#article-body-wrapper&quot;}" data-trace="false" data-dom-id="Toc-react-component-06fe038f-d934-4b9f-b86a-8552725e8f16"></div>
    <div id="Toc-react-component-06fe038f-d934-4b9f-b86a-8552725e8f16"></div>
    
</div></div><div class="row"><div class="col-sm-9"><div class="ArticleFooter__menu"><div class="s-flex-align-center"><div class="js-likebutton" data-props="{&quot;like_status&quot;:false,&quot;like_count&quot;:101,&quot;show_count&quot;:true,&quot;uuid&quot;:&quot;9630661cd5292240f8c7&quot;,&quot;likable_type&quot;:&quot;Article&quot;,&quot;position&quot;:&quot;article-footer&quot;}"></div><div class="ArticleFooter__userList"><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="SatoshiRobatoFujimoto"><a itemprop="url" href="/SatoshiRobatoFujimoto"><img alt="SatoshiRobatoFujimoto" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/63863/profile-images/1473696399" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="mouriman"><a itemprop="url" href="/mouriman"><img alt="mouriman" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/100875/profile-images/1473708231" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="ytakky"><a itemprop="url" href="/ytakky"><img alt="ytakky" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/62018/profile-images/1473695825" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="eqs"><a itemprop="url" href="/eqs"><img alt="eqs" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/83161/profile-images/1473702685" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="izktmys"><a itemprop="url" href="/izktmys"><img alt="izktmys" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/102327/profile-images/1473708664" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="rintarou"><a itemprop="url" href="/rintarou"><img alt="rintarou" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/77499/profile-images/1473700845" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="hiro_matsuno2"><a itemprop="url" href="/hiro_matsuno2"><img alt="hiro_matsuno2" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/9764/profile-images/1473681543" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="ZeroDotZero"><a itemprop="url" href="/ZeroDotZero"><img alt="ZeroDotZero" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/75925/profile-images/1473700310" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="chrysocome"><a itemprop="url" href="/chrysocome"><img alt="chrysocome" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/41477/profile-images/1485746108" /></a></div></div><div class="ArticleFooter__user"><div class="js-hovercard" data-hovercard-target-name="sotoshigoto"><a itemprop="url" href="/sotoshigoto"><img alt="sotoshigoto" class="thumb thumb--xs" src="https://qiita-image-store.s3.amazonaws.com/0/30644/profile-images/1473685534" /></a></div></div><div class="ArticleFooter__user"><a href="/bohemian916/items/9630661cd5292240f8c7/likers"><span class="fa fa-ellipsis-h"></span></a></div></div></div><div class="u-flex u-align-center"><div class="ArticleFooter__stock"><div class="js-stockbutton" data-position="footer_menu" data-props="{&quot;stock_status&quot;:false}"></div></div><div class="ArticleFooter__editRequest"><a class="u-link-no-underline" data-toggle="tooltip" title="You can propose improvements about the article to the author 💪" href="/drafts/9630661cd5292240f8c7/edit"><span class="fa fa-send-o fa-lg"></span> <span>Edit request</span></a></div><div class="dropdown ArticleFooter__dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="fa fa-ellipsis-h"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a href="/bohemian916/items/9630661cd5292240f8c7.md"><span class="fa fa-fw fa-file-text-o"></span> Show article as Markdown</a></li><li><a data-target=".js-report-form" data-toggle="modal" href="#"><i class="fa fa-fw fa-flag"></i> Report article</a></li></ul></div></div></div><ul class="references js-referencesView"><li class="references_header"><i class="fa fa-fw fa-link"></i> Linked from these articles</li><li class="references_reference js-reference"><span>Linked from </span><a href="/nonbiri15/items/f5c5c4357458bfeb03bb#_reference-b4d1fe34be9caf50336e"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/83761/profile-images/1473702877" />機械学習のデータの集め方</a><time class="references_datetime js-dateTimeView" datetime="2016-05-31T15:51:36+00:00">10 months ago</time></li><li class="references_reference js-reference"><span>Linked from </span><a href="/kamujun/items/d6efc03ff5c8f0d53c13#_reference-4fe20d98bd812177a404"><img alt="" width="18" height="18" src="https://qiita-image-store.s3.amazonaws.com/0/143285/profile-images/1480386708" />ニューラルネットワークは電気ねずみの夢を見るか？</a><time class="references_datetime js-dateTimeView" datetime="2016-12-23T19:19:13+00:00">3 months ago</time></li></ul><div class="itemsShowBody_articleColumnFooter"><div class="socialButtons"><div class="socialButtons_twitter"><a class="twitter-share-button" data-text="機械学習のデータセット画像枚数を増やす方法 on @Qiita" data-url="http://qiita.com/bohemian916/items/9630661cd5292240f8c7" href="https://twitter.com/share">Tweet</a></div><div class="socialButtons_hatebu"><a class="hatena-bookmark-button" data-hatena-bookmark-layout="simple-balloon" data-hatena-bookmark-title="機械学習のデータセット画像枚数を増やす方法" href="http://b.hatena.ne.jp/entry/http://qiita.com/bohemian916/items/9630661cd5292240f8c7" title="Add to Hatena Bookmark"><img alt="Add to Hatena Bookmark" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20" /></a><script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript"></script></div><div class="socialButtons_googlePlus"><div class="g-plusone" data-href="http://qiita.com/bohemian916/items/9630661cd5292240f8c7" data-size="medium"></div></div><div class="socialButtons_facebook"><div class="fb-like" data-action="like" data-href="http://qiita.com/bohemian916/items/9630661cd5292240f8c7" data-layout="button_count" data-share="false" data-show-faces="false"></div></div><div class="socialButtons_pocket"><a class="pocket-btn" data-lang="en" data-pocket-count="horizontal" data-pocket-label="pocket"></a></div></div></div><div class="itemsShowComment_wrapper" id="comments"><div class="js-react-on-rails-component" data-component-name="CommentListContainer" data-props="{&quot;currentUser&quot;:null,&quot;initialComments&quot;:[],&quot;monthly_public_image_uploadable_size_limit&quot;:null,&quot;total_uploaded_public_image_size_in_current_month&quot;:null,&quot;item&quot;:{&quot;id&quot;:359644,&quot;uuid&quot;:&quot;9630661cd5292240f8c7&quot;,&quot;suspended&quot;:false,&quot;secret&quot;:false},&quot;owner&quot;:{&quot;url_name&quot;:&quot;bohemian916&quot;},&quot;is_team&quot;:false,&quot;is_project&quot;:false,&quot;logged_in&quot;:false,&quot;polling&quot;:false,&quot;mention_candidates&quot;:[{&quot;id&quot;:50474,&quot;url_name&quot;:&quot;bohemian916&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/50474/profile-images/1473692117&quot;}]}" data-trace="false" data-dom-id="CommentListContainer-react-component-047ec1a3-5407-4756-a850-97df82258c19"></div>
    <div id="CommentListContainer-react-component-047ec1a3-5407-4756-a850-97df82258c19"></div>
    
</div></div></div></div></article><div class="js-report-form modal fade reportForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Report article</h4></div><div class="modal-body"><form action="/reports" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="/a7ewl9FG/wZr5lVfGU1x1oCnrkTJukdjG2HnfthGxXqiBXV3s7IruUaC7RvzW+MJ6G900FDtVChIaJryx+btQ==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/bohemian916/items/9630661cd5292240f8c7" /><input type="hidden" name="item_uuid" id="item_uuid" value="9630661cd5292240f8c7" /><p>Help us understand the problem. What is going on with this item?</p><br /><div class="form-group"><ul class="list-unstyled"><li><label><input type="radio" name="report_type" id="report_type_spam" value="spam" required="required" /> It&#39;s spam </label></li><li><label><input type="radio" name="report_type" id="report_type_harassment" value="harassment" required="required" /> It&#39;s abusive or harmful </label></li><li><label><input type="radio" name="report_type" id="report_type_inappropriate_content" value="inappropriate_content" required="required" /> It contains inappropriate content </label></li></ul></div><div class="reportForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary reportForm_submitButton"><i class="fa fa-send"></i> Submit</button></div></form></div></div></div></div><script id="js-item" type="application/json">{ "url": "http://qiita.com/bohemian916/items/9630661cd5292240f8c7", "id": 359644, "uuid": "9630661cd5292240f8c7" }</script><script class="js-user" type="application/json">{&quot;id&quot;:50474,&quot;url_name&quot;:&quot;bohemian916&quot;,&quot;profile_image_url&quot;:&quot;https://qiita-image-store.s3.amazonaws.com/0/50474/profile-images/1473692117&quot;}</script><script language="JavaScript" src="//cdn.bigmining.com/private/js/qiita_bigmining.js" type="text/javascript"></script></div><footer class="footer"><div class="footer_inner"><div class="footer_container"><ul class="footer_links-left"><li class="footer_link"><a class="footer_copyright" href="http://increments.co.jp">© 2011-2017 Increments Inc.</a></li><li class="footer_link"><a href="http://qiita.com/terms">Terms</a></li><li class="footer_link"><a href="http://qiita.com/privacy">Privacy</a></li><li class="footer_link"><a href="http://help.qiita.com">Help</a></li><li class="footer_link"><a href="https://increments.zendesk.com/anonymous_requests/new">Contact</a></li></ul><ul class="footer_links-right"><li class="footer_link"><a href="http://qiita.com/about">About</a></li><li class="footer_link"><a href="/users">Users</a></li><li class="footer_link"><a href="/tags">Tags</a></li><li class="footer_link"><a href="http://blog.qiita.com">Blog</a></li><li class="footer_link"><a href="http://qiita.com/api/v2/docs">API</a></li><li class="footer_link"><a href="https://teams.qiita.com/">Team</a></li><li class="footer_link"><a href="http://kobito.qiita.com">Kobito</a></li><li class="footer_link"><a class="js-public-form-feedback-link" data-target=".js-feedback-form" data-toggle="modal" href=""><i class="fa fa-heart"></i> Feedback <i class="fa fa-caret-down"></i></a></li></ul></div></div></footer><div class="js-feedback-form modal fade feedbackForm"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button name="button" type="submit" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Feedback</h4></div><div class="modal-body"><form class="js-feedback-form-form" action="/feedbacks" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="e1rnkTTG6Ga2h/i1oy0KeHKE/PdmMv+jj8URQJMgvdFsfCyGtU07NEoyalSwhVAzDyffnTRXo+6iiTS2o149cQ==" /><input type="hidden" name="redirect_path" id="redirect_path" value="/bohemian916/items/9630661cd5292240f8c7" /><div class="form-group"><textarea name="feedback[message]" id="feedback_message" class="form-control js-feedback-form-text-area" placeholder="Please give us any feedback about Qiita." required="required" rows="5">
</textarea></div><div class="feedbackForm_submitButtonContainer"><button name="button" type="submit" class="btn btn-primary feedbackForm_submitButton"><i class="fa fa-send"></i> Submit</button><p class="feedbackForm_note">We don&#39;t reply to any feedback.<br />If you need help with Qiita, please send a support request from <a href="https://increments.zendesk.com/anonymous_requests/new">here</a>.</p></div><div style="position:fixed;top:-99999px;opacity:0.0001;"><input name="feedback[name]" type="text" /></div></form></div></div></div></div><script>// if (window.mixpanel instanceof Element) {
//   window.mixpanel = [];
// }
// (function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
// for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);</script><script src="http://cdn.qiita.com/assets/public-3af9c1d29a49f3320bb796fb5e75304b.min.js"></script><script>
  (function () {
    var script = document.getElementsByTagName('script')[0];
    var load = function (src, id) {
      var el = document.createElement('script');
      el.async = true;
      el.src = src;
      el.id = id;
      script.parentNode.insertBefore(el, script);
    };
      // Optimizely
      load('//cdn.optimizely.com/js/52738645.js', 'optimizely-jssdk');
      // Google Analytics
      window._gaq = window._gaq || [];
      var isCareer = location.hostname.split('.')[0] == 'career';
      if (isCareer) {
        window._gaq.push(['_setAccount', 'UA-24675221-11']);
        window._gaq.push(['_setDomainName', 'qiita.com']);
      } else {
        window._gaq.push(['_setAccount', 'UA-24675221-1']);
      }
      window._gaq.push(['_setCustomVar', 1, 'logged_in', 'false', 2]);
      window._gaq.push(['_trackPageview']);
      var src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      load(src, 'google-analytics-jssdk');
    // Google Analytics - Universal Analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-24675221-12', {
          
        });
          ga('create', 'UA-28813598-2', { name: 'user' });
          ga('user.send', 'pageview');
        ga('set', 'dimension1', 'false');
        ga('set', 'dimension3', 'false');
      ga('require', 'displayfeatures');
      ga('set', 'forceSSL', true);
      ga('send', 'pageview');
    // Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TBQWPN');
  })();
</script>
</body></html>